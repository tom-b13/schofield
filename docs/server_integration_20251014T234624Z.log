INFO:     Will watch for changes in these directories: ['/home/codex/schofield']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [3202959] using WatchFiles
2025-10-15 00:46:25,965 INFO:app.logic.repository_answers:answers_cache_init cache_id=139996804270528
2025-10-15 00:46:26,005 INFO:app.routes.screens:screens_module_loaded
INFO:     Started server process [3202970]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:50498 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50502 - "GET / HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50514 - "GET / HTTP/1.1" 404 Not Found
2025-10-15 00:46:27,526 INFO:app.logic.repository_answers:answers_delete rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:27,531 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:27,535 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:27,536 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:27,540 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:27,540 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:27,543 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:27,547 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:27,555 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:     127.0.0.1:50530 - "DELETE /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 204 No Content
2025-10-15 00:46:27,639 INFO:app.routes.screens:screen_get_request rs_id_raw=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key_raw=s-main
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:27,660 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:27,666 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:27,666 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:27,672 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:27,672 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:27,676 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:27,679 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:27,687 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:27,697 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:27,701 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:27,701 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:27,706 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:27,706 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:27,710 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:27,714 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:27,723 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:27,741 INFO:app.routes.screens:screen_get_etag_parity rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main computed=W/"8258d729a99b2179cfeab0b18754ca01fa8382ec" screen_view=W/"8258d729a99b2179cfeab0b18754ca01fa8382ec" headers_set=W/"8258d729a99b2179cfeab0b18754ca01fa8382ec"
2025-10-15 00:46:27,743 INFO:app.routes.screens:screen_get response_set_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main etag=W/"8258d729a99b2179cfeab0b18754ca01fa8382ec" before_count=0 after_count=0
INFO:     127.0.0.1:50534 - "GET /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/screens/s-main HTTP/1.1" 200 OK
2025-10-15 00:46:27,862 INFO:app.logic.repository_answers:answers_delete rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:27,866 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:27,870 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:27,871 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:27,876 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:27,876 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:27,879 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:27,882 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:27,890 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:     127.0.0.1:50542 - "DELETE /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 204 No Content
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:27,988 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:27,994 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:27,994 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:27,999 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:27,999 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:28,002 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:28,006 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,014 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:28,014 INFO:app.routes.answers:autosave_start rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 if_match_raw=* if_match_norm=* current_etag=W/"f0877e0647785ec8f8847b0ea77f25e98b92d545"
2025-10-15 00:46:28,016 INFO:app.routes.answers:autosave_precheck_counts rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main existing_screen_count=0
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,022 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,022 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,022 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,025 INFO:app.routes.answers:vis_pre_state rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parents=['641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:28,030 INFO:app.routes.answers:vis_pre_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main pre_set={'2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} pre_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:28,032 INFO:app.routes.answers:autosave_write_begin rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 value=True option_id=None
2025-10-15 00:46:28,037 INFO:app.logic.repository_answers:answers_write rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
2025-10-15 00:46:28,039 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,045 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:28,046 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,046 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,046 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:28,046 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:28,046 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,046 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:28,046 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:28,046 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,046 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,050 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:28,050 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,056 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,056 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:28,057 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:28,057 INFO:app.routes.answers:vis_post_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main post_set={'59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} post_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:28,057 INFO:app.routes.answers:visibility_delta_inputs rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'] visible_post=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_value_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} parent_value_post={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:28,057 INFO:app.routes.answers:vis_suppress_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:28,057 INFO:app.routes.answers:autosave_ok rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 screen_key=s-main new_etag=W/"d6b2d1cf05a4e068e71e26b63199855bf527a697" write_performed=True now_visible=['59830e92-110f-5c6b-8cae-3388c0141e97'] now_hidden=[]
INFO:     127.0.0.1:50544 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 200 OK
2025-10-15 00:46:28,140 INFO:app.routes.screens:screen_get_request rs_id_raw=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key_raw=s-main
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,155 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:28,155 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,155 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,155 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:28,155 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:28,155 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,155 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:28,155 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:28,155 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,156 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,159 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:28,159 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,165 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,165 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,168 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,173 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:28,173 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,173 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,173 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:28,173 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:28,173 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,174 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:28,174 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:28,174 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,174 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,177 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:28,177 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,184 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,184 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,187 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,193 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,197 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:28,197 INFO:app.routes.screens:screen_get_etag_parity rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main computed=W/"d6b2d1cf05a4e068e71e26b63199855bf527a697" screen_view=W/"d6b2d1cf05a4e068e71e26b63199855bf527a697" headers_set=W/"d6b2d1cf05a4e068e71e26b63199855bf527a697"
2025-10-15 00:46:28,198 INFO:app.routes.screens:screen_get response_set_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main etag=W/"d6b2d1cf05a4e068e71e26b63199855bf527a697" before_count=1 after_count=1
INFO:     127.0.0.1:50558 - "GET /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/screens/s-main HTTP/1.1" 200 OK
2025-10-15 00:46:28,305 INFO:app.logic.repository_answers:answers_delete rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,310 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:28,315 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,315 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,321 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:28,321 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:28,325 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:28,329 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,336 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:     127.0.0.1:50566 - "DELETE /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 204 No Content
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,428 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:28,434 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,434 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,440 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:28,440 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:28,443 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:28,447 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,457 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:28,457 INFO:app.routes.answers:autosave_start rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 if_match_raw=* if_match_norm=* current_etag=W/"9a2bbb3f1e7d6453485acd3f1e80a632240ce802"
2025-10-15 00:46:28,459 INFO:app.routes.answers:autosave_precheck_counts rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main existing_screen_count=0
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,466 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,466 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,466 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,469 INFO:app.routes.answers:vis_pre_state rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parents=['641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:28,476 INFO:app.routes.answers:vis_pre_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main pre_set={'2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} pre_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:28,478 INFO:app.routes.answers:autosave_write_begin rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 value=False option_id=None
2025-10-15 00:46:28,481 INFO:app.logic.repository_answers:answers_write rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
2025-10-15 00:46:28,484 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,491 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:28,491 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,491 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,491 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, False)}
2025-10-15 00:46:28,491 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'}
2025-10-15 00:46:28,491 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,491 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'} visible_ids_cnt=2
2025-10-15 00:46:28,491 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:28,491 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,491 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,491 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:28,493 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'} visible_ids_cnt=2
2025-10-15 00:46:28,493 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,497 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,498 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:28,498 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'}
2025-10-15 00:46:28,498 INFO:app.routes.answers:vis_post_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main post_set={'2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} post_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:28,498 INFO:app.routes.answers:visibility_delta_inputs rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'] visible_post=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_value_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} parent_value_post={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'}
2025-10-15 00:46:28,500 INFO:app.routes.answers:vis_suppress_probe rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 repo_has=False pre_image_has=False suppressed=False parent_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} parent_post={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'}
2025-10-15 00:46:28,500 INFO:app.routes.answers:vis_suppress_repo_miss rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 qid=59830e92-110f-5c6b-8cae-3388c0141e97 repo_row=None
2025-10-15 00:46:28,500 INFO:app.routes.answers:vis_suppress_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main now_hidden_cnt=1 suppressed_cnt=0 not_suppressed=['59830e92-110f-5c6b-8cae-3388c0141e97']
2025-10-15 00:46:28,500 INFO:app.routes.answers:autosave_ok rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 screen_key=s-main new_etag=W/"100bd7beaa72a49743c7fb56edf5ece848a2132e" write_performed=True now_visible=[] now_hidden=['59830e92-110f-5c6b-8cae-3388c0141e97']
INFO:     127.0.0.1:50580 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 200 OK
2025-10-15 00:46:28,586 INFO:app.routes.screens:screen_get_request rs_id_raw=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key_raw=s-main
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,604 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:28,604 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,604 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,604 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, False)}
2025-10-15 00:46:28,604 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'}
2025-10-15 00:46:28,604 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,604 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'} visible_ids_cnt=2
2025-10-15 00:46:28,604 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:28,604 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,605 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,605 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:28,606 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'} visible_ids_cnt=2
2025-10-15 00:46:28,607 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,611 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,612 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,615 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,620 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:28,620 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,620 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,620 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, False)}
2025-10-15 00:46:28,620 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'}
2025-10-15 00:46:28,620 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,621 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'} visible_ids_cnt=2
2025-10-15 00:46:28,621 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:28,621 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,621 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,621 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:28,622 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'} visible_ids_cnt=2
2025-10-15 00:46:28,622 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,627 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,627 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,630 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,637 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,640 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,640 INFO:app.routes.screens:screen_get_etag_parity rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main computed=W/"100bd7beaa72a49743c7fb56edf5ece848a2132e" screen_view=W/"100bd7beaa72a49743c7fb56edf5ece848a2132e" headers_set=W/"100bd7beaa72a49743c7fb56edf5ece848a2132e"
2025-10-15 00:46:28,642 INFO:app.routes.screens:screen_get response_set_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main etag=W/"100bd7beaa72a49743c7fb56edf5ece848a2132e" before_count=1 after_count=1
INFO:     127.0.0.1:50584 - "GET /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/screens/s-main HTTP/1.1" 200 OK
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,746 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:28,746 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,746 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,746 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, False)}
2025-10-15 00:46:28,746 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'}
2025-10-15 00:46:28,746 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,746 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'} visible_ids_cnt=2
2025-10-15 00:46:28,746 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:28,746 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,746 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,746 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:28,748 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'} visible_ids_cnt=2
2025-10-15 00:46:28,748 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,753 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:28,753 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:28,753 INFO:app.routes.answers:autosave_start rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 if_match_raw=W/"100bd7beaa72a49743c7fb56edf5ece848a2132e" if_match_norm=100bd7beaa72a49743c7fb56edf5ece848a2132e current_etag=W/"100bd7beaa72a49743c7fb56edf5ece848a2132e"
INFO:     127.0.0.1:50246 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 200 OK
2025-10-15 00:46:28,861 INFO:app.logic.repository_answers:answers_delete rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,865 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:28,869 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,869 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,874 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:28,874 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:28,877 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:28,880 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,889 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:     127.0.0.1:50258 - "DELETE /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 204 No Content
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:28,982 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:28,987 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,987 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:28,991 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:28,991 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:28,994 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:28,997 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,005 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:29,005 INFO:app.routes.answers:autosave_start rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 if_match_raw=* if_match_norm=* current_etag=W/"6feb23457d456c1bb190846fb6266c4b517d14c6"
2025-10-15 00:46:29,007 INFO:app.routes.answers:autosave_precheck_counts rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main existing_screen_count=0
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,012 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,012 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,012 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,015 INFO:app.routes.answers:vis_pre_state rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parents=['641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:29,020 INFO:app.routes.answers:vis_pre_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main pre_set={'2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} pre_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:29,021 INFO:app.routes.answers:autosave_write_begin rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 value=True option_id=None
2025-10-15 00:46:29,024 INFO:app.logic.repository_answers:answers_write rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
2025-10-15 00:46:29,025 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,031 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:29,031 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,031 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,031 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:29,031 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,031 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,031 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:29,032 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:29,032 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,032 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,034 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:29,034 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,040 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,040 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:29,040 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,040 INFO:app.routes.answers:vis_post_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main post_set={'59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} post_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:29,040 INFO:app.routes.answers:visibility_delta_inputs rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'] visible_post=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_value_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} parent_value_post={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,040 INFO:app.routes.answers:vis_suppress_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:29,040 INFO:app.routes.answers:autosave_ok rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 screen_key=s-main new_etag=W/"060338bf49dda609345ee3dca574ff53b80814e9" write_performed=True now_visible=['59830e92-110f-5c6b-8cae-3388c0141e97'] now_hidden=[]
INFO:     127.0.0.1:50270 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 200 OK
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,128 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:29,129 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,129 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,129 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:29,129 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,129 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,129 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:29,129 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:29,129 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,129 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,132 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:29,132 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,138 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,138 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:29,138 INFO:app.routes.answers:autosave_start rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 if_match_raw=* if_match_norm=* current_etag=W/"060338bf49dda609345ee3dca574ff53b80814e9"
2025-10-15 00:46:29,140 INFO:app.routes.answers:autosave_precheck_counts rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main existing_screen_count=1
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,143 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,143 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,143 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:29,143 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,143 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,143 INFO:app.routes.answers:vis_pre_state rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parents=['641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:29,145 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,148 INFO:app.routes.answers:vis_pre_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main pre_set={'59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} pre_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:29,149 INFO:app.routes.answers:autosave_write_begin rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 value=Jane Doe option_id=None
2025-10-15 00:46:29,152 INFO:app.logic.repository_answers:answers_write rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 path=db_ok
2025-10-15 00:46:29,153 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,159 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:29,159 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,159 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,160 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:29,160 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,160 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,160 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:29,160 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:29,160 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,160 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,160 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:29,161 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:29,161 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,162 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,166 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,166 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:29,166 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,166 INFO:app.routes.answers:vis_post_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main post_set={'59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} post_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:29,166 INFO:app.routes.answers:visibility_delta_inputs rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2'] visible_post=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_value_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} parent_value_post={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,166 INFO:app.routes.answers:vis_suppress_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:29,166 INFO:app.routes.answers:autosave_ok rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 screen_key=s-main new_etag=W/"88fa7c57d06981453c21ef8d33401d74576e55ef" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:50284 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/59830e92-110f-5c6b-8cae-3388c0141e97 HTTP/1.1" 200 OK
2025-10-15 00:46:29,248 INFO:app.routes.screens:screen_get_request rs_id_raw=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key_raw=s-main
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,265 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:29,265 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,265 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,265 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:29,265 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,266 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,266 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:29,266 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:29,266 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,266 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,266 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:29,268 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:29,268 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,268 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,273 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,273 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,276 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,281 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:29,281 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,281 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,281 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:29,281 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,281 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,281 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:29,281 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:29,281 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,281 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,281 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:29,284 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:29,284 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,284 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,288 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,288 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,290 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,295 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,298 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,298 INFO:app.routes.screens:screen_get_etag_parity rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main computed=W/"88fa7c57d06981453c21ef8d33401d74576e55ef" screen_view=W/"88fa7c57d06981453c21ef8d33401d74576e55ef" headers_set=W/"88fa7c57d06981453c21ef8d33401d74576e55ef"
2025-10-15 00:46:29,300 INFO:app.routes.screens:screen_get response_set_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main etag=W/"88fa7c57d06981453c21ef8d33401d74576e55ef" before_count=2 after_count=2
INFO:     127.0.0.1:50288 - "GET /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/screens/s-main HTTP/1.1" 200 OK
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,397 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:29,397 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,397 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,397 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:29,397 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,397 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,397 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:29,397 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:29,397 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,398 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,398 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:29,399 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:29,400 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,400 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,404 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,405 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:29,405 INFO:app.routes.answers:autosave_start rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 if_match_raw=W/"88fa7c57d06981453c21ef8d33401d74576e55ef" if_match_norm=88fa7c57d06981453c21ef8d33401d74576e55ef current_etag=W/"88fa7c57d06981453c21ef8d33401d74576e55ef"
2025-10-15 00:46:29,406 INFO:app.routes.answers:autosave_precheck_counts rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main existing_screen_count=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,409 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,409 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,409 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:29,409 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,409 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:29,409 INFO:app.routes.answers:vis_pre_state rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parents=['641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:29,411 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:29,411 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:29,412 INFO:app.routes.answers:vis_pre_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main pre_set={'59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} pre_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:29,413 INFO:app.routes.answers:autosave_write_begin rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 value=False option_id=None
2025-10-15 00:46:29,416 INFO:app.logic.repository_answers:answers_write rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
2025-10-15 00:46:29,417 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,423 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:29,423 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:29,423 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:29,423 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, False)}
2025-10-15 00:46:29,423 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'}
2025-10-15 00:46:29,423 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:29,423 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'} visible_ids_cnt=2
2025-10-15 00:46:29,423 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:29,423 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:29,423 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:29,424 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:29,425 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'} visible_ids_cnt=2
2025-10-15 00:46:29,425 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,429 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, False)
2025-10-15 00:46:29,429 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:29,429 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'}
2025-10-15 00:46:29,429 INFO:app.routes.answers:vis_post_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main post_set={'2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} post_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:29,429 INFO:app.routes.answers:visibility_delta_inputs rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2'] visible_post=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_value_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} parent_value_post={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'}
2025-10-15 00:46:29,429 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:29,429 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:29,430 INFO:app.routes.answers:vis_suppress_probe rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 repo_has=True pre_image_has=True suppressed=True parent_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} parent_post={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'false'}
2025-10-15 00:46:29,430 INFO:app.routes.answers:vis_suppress_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main now_hidden_cnt=1 suppressed_cnt=1 not_suppressed=[]
2025-10-15 00:46:29,430 INFO:app.routes.answers:autosave_ok rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 screen_key=s-main new_etag=W/"ee57194253d052c3b459216917cb665ecaa63600" write_performed=True now_visible=[] now_hidden=['59830e92-110f-5c6b-8cae-3388c0141e97']
2025-10-15 00:46:29,430 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
INFO:     127.0.0.1:50300 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 200 OK
2025-10-15 00:46:29,534 INFO:app.logic.repository_answers:answers_delete rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,538 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:29,543 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,543 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,547 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:29,547 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:29,550 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:29,553 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,565 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:     127.0.0.1:50310 - "DELETE /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 204 No Content
2025-10-15 00:46:29,656 INFO:app.routes.screens:screen_get_request rs_id_raw=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key_raw=s-main
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,671 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:29,676 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,676 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,681 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:29,681 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:29,684 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:29,687 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,695 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,704 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:29,708 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,708 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,712 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:29,712 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:29,715 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:29,718 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,726 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,743 INFO:app.routes.screens:screen_get_etag_parity rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main computed=W/"a13e2f9601a45bd952ae4c530c27dc610125c4d7" screen_view=W/"a13e2f9601a45bd952ae4c530c27dc610125c4d7" headers_set=W/"a13e2f9601a45bd952ae4c530c27dc610125c4d7"
2025-10-15 00:46:29,744 INFO:app.routes.screens:screen_get response_set_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main etag=W/"a13e2f9601a45bd952ae4c530c27dc610125c4d7" before_count=1 after_count=1
INFO:     127.0.0.1:50320 - "GET /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/screens/s-main HTTP/1.1" 200 OK
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,860 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:29,864 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,864 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,869 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:29,870 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:29,874 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:29,877 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,886 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:29,886 INFO:app.routes.answers:autosave_start rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b if_match_raw=W/"a13e2f9601a45bd952ae4c530c27dc610125c4d7" if_match_norm=a13e2f9601a45bd952ae4c530c27dc610125c4d7 current_etag=W/"a13e2f9601a45bd952ae4c530c27dc610125c4d7"
2025-10-15 00:46:29,889 INFO:app.routes.answers:autosave_precheck_counts rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main existing_screen_count=1
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,895 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,895 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,895 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,897 INFO:app.routes.answers:vis_pre_state rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parents=['641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:29,900 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:29,902 INFO:app.routes.answers:vis_pre_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main pre_set={'2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} pre_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:29,904 INFO:app.routes.answers:autosave_write_begin rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b value=ACME Trading option_id=None
2025-10-15 00:46:29,906 INFO:app.logic.repository_answers:answers_write rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b path=db_ok
2025-10-15 00:46:29,908 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,914 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:29,920 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,920 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,924 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:29,924 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:29,928 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:29,928 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
2025-10-15 00:46:29,930 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:29,932 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:29,937 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:29,937 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,938 INFO:app.routes.answers:vis_post_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main post_set={'2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} post_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:29,938 INFO:app.routes.answers:visibility_delta_inputs rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'] visible_post=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_value_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} parent_value_post={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:29,938 INFO:app.routes.answers:vis_suppress_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:29,938 INFO:app.routes.answers:autosave_ok rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b screen_key=s-main new_etag=W/"34ce14a8a0a855d2b96129aced51a2474c18eb5c" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:50324 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/2b6fdab4-24e3-5a77-8985-e390e19ce02b HTTP/1.1" 200 OK
2025-10-15 00:46:30,045 INFO:app.logic.repository_answers:answers_delete rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,051 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:30,056 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,056 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,062 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,062 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:30,066 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:30,066 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
2025-10-15 00:46:30,068 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,069 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,075 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:     127.0.0.1:50332 - "DELETE /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 204 No Content
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,167 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:30,171 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,171 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,176 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,176 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:30,179 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:30,180 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
2025-10-15 00:46:30,181 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,183 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,188 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:30,188 INFO:app.routes.answers:autosave_start rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 if_match_raw=* if_match_norm=* current_etag=W/"b2a468f74a33b0d507359e2e6b272cbf2682993d"
2025-10-15 00:46:30,190 INFO:app.routes.answers:autosave_precheck_counts rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main existing_screen_count=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,196 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,196 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,196 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,199 INFO:app.routes.answers:vis_pre_state rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parents=['641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:30,202 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:30,202 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
2025-10-15 00:46:30,202 INFO:app.routes.answers:vis_pre_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main pre_set={'2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} pre_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:30,204 INFO:app.routes.answers:autosave_write_begin rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 value=True option_id=None
2025-10-15 00:46:30,206 INFO:app.logic.repository_answers:answers_write rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
2025-10-15 00:46:30,208 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,213 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:30,214 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,214 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,214 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:30,214 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:30,214 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,214 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:30,214 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:30,214 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,214 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,214 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:30,214 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
2025-10-15 00:46:30,214 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:30,215 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,215 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:30,215 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,219 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,219 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:30,219 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:30,219 INFO:app.routes.answers:vis_post_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main post_set={'59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} post_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:30,219 INFO:app.routes.answers:visibility_delta_inputs rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'] visible_post=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '59830e92-110f-5c6b-8cae-3388c0141e97', '641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_value_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} parent_value_post={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:30,219 INFO:app.routes.answers:vis_suppress_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:30,219 INFO:app.routes.answers:autosave_ok rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 screen_key=s-main new_etag=W/"b3e0efa5d5139dbf082605db59e8a8c33ce37c9d" write_performed=True now_visible=['59830e92-110f-5c6b-8cae-3388c0141e97'] now_hidden=[]
INFO:     127.0.0.1:50338 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 200 OK
2025-10-15 00:46:30,296 INFO:app.routes.screens:screen_get_request rs_id_raw=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key_raw=s-main
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,311 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:30,311 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,312 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,312 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:30,312 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:30,312 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,312 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:30,312 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:30,312 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,312 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,312 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:30,312 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
2025-10-15 00:46:30,312 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:30,312 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,312 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:30,312 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,315 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,315 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,318 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,323 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:30,323 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,323 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,323 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': (None, None, None, True)}
2025-10-15 00:46:30,324 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'}
2025-10-15 00:46:30,324 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,324 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:30,324 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:30,324 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,324 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,324 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:30,324 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
2025-10-15 00:46:30,324 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': 'true'} visible_ids_cnt=3
2025-10-15 00:46:30,324 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,324 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:30,324 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,328 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,328 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '59830e92-110f-5c6b-8cae-3388c0141e97', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,331 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,337 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,340 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 tuple=(None, None, None, True)
2025-10-15 00:46:30,340 INFO:app.routes.screens:screen_get_etag_parity rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main computed=W/"b3e0efa5d5139dbf082605db59e8a8c33ce37c9d" screen_view=W/"b3e0efa5d5139dbf082605db59e8a8c33ce37c9d" headers_set=W/"b3e0efa5d5139dbf082605db59e8a8c33ce37c9d"
2025-10-15 00:46:30,343 INFO:app.routes.screens:screen_get response_set_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main etag=W/"b3e0efa5d5139dbf082605db59e8a8c33ce37c9d" before_count=3 after_count=3
INFO:     127.0.0.1:50340 - "GET /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/screens/s-main HTTP/1.1" 200 OK
2025-10-15 00:46:30,459 INFO:app.logic.repository_answers:answers_delete rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,465 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:30,470 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,470 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,474 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,474 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:30,477 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:30,477 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
2025-10-15 00:46:30,479 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,480 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,485 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:     127.0.0.1:50356 - "DELETE /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 204 No Content
2025-10-15 00:46:30,577 INFO:app.routes.screens:screen_get_request rs_id_raw=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key_raw=s-main
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,591 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:30,595 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,595 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,599 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,599 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:30,603 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:30,603 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
2025-10-15 00:46:30,604 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,606 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,610 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,619 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:30,624 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,624 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,628 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,628 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:30,632 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:30,632 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
2025-10-15 00:46:30,634 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,635 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,640 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,660 INFO:app.routes.screens:screen_get_etag_parity rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main computed=W/"f781d20f2ad57fad0111fd08f44db78e81b58f4f" screen_view=W/"f781d20f2ad57fad0111fd08f44db78e81b58f4f" headers_set=W/"f781d20f2ad57fad0111fd08f44db78e81b58f4f"
2025-10-15 00:46:30,663 INFO:app.routes.screens:screen_get response_set_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main etag=W/"f781d20f2ad57fad0111fd08f44db78e81b58f4f" before_count=2 after_count=2
INFO:     127.0.0.1:50370 - "GET /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/screens/s-main HTTP/1.1" 200 OK
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,765 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:30,770 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,770 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,775 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,775 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:30,778 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:30,778 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
2025-10-15 00:46:30,780 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,782 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,787 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:30,787 INFO:app.routes.answers:autosave_start rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b if_match_raw=* if_match_norm=* current_etag=W/"f781d20f2ad57fad0111fd08f44db78e81b58f4f"
2025-10-15 00:46:30,789 INFO:app.routes.answers:autosave_precheck_counts rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main existing_screen_count=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,796 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,796 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,796 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,798 INFO:app.routes.answers:vis_pre_state rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parents=['641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:30,801 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:30,802 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'ACME Trading', None, None)
2025-10-15 00:46:30,802 INFO:app.routes.answers:vis_pre_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main pre_set={'2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} pre_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:30,803 INFO:app.routes.answers:autosave_write_begin rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b value=rotate-b632c76e-577b-4850-89f7-81c9c6d3591d option_id=None
2025-10-15 00:46:30,806 INFO:app.logic.repository_answers:answers_write rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b path=db_ok
2025-10-15 00:46:30,808 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,816 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:30,821 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,821 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,826 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,826 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:30,830 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:30,830 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:30,832 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,834 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,841 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:30,841 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,841 INFO:app.routes.answers:vis_post_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main post_set={'2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} post_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:30,841 INFO:app.routes.answers:visibility_delta_inputs rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'] visible_post=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_value_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} parent_value_post={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,842 INFO:app.routes.answers:vis_suppress_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:30,842 INFO:app.routes.answers:autosave_ok rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b screen_key=s-main new_etag=W/"61b628970fa576447d7bfc22e4ee7cd79bef3c5a" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:50382 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/2b6fdab4-24e3-5a77-8985-e390e19ce02b HTTP/1.1" 200 OK
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,931 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:30,936 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,936 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:30,940 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,941 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:30,943 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:30,944 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:30,945 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:30,947 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:30,952 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:30,952 INFO:app.routes.answers:autosave_start rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 if_match_raw=W/"f781d20f2ad57fad0111fd08f44db78e81b58f4f" if_match_norm=f781d20f2ad57fad0111fd08f44db78e81b58f4f current_etag=W/"61b628970fa576447d7bfc22e4ee7cd79bef3c5a"
2025-10-15 00:46:30,952 INFO:app.routes.answers:autosave_conflict rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 screen_key=s-main if_match_raw=W/"f781d20f2ad57fad0111fd08f44db78e81b58f4f" write_performed=false
INFO:     127.0.0.1:50388 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 409 Conflict
2025-10-15 00:46:31,054 INFO:app.logic.repository_answers:answers_delete rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,059 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:31,063 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,063 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,067 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,067 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:31,070 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:31,070 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:31,072 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,079 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,083 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:     127.0.0.1:50398 - "DELETE /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 204 No Content
2025-10-15 00:46:31,165 INFO:app.routes.screens:screen_get_request rs_id_raw=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key_raw=s-main
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,180 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:31,184 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,184 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,188 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,188 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:31,191 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:31,191 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:31,192 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,193 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,197 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,204 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:31,207 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,207 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,210 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,210 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:31,212 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:31,213 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:31,214 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,215 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,218 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,232 INFO:app.routes.screens:screen_get_etag_parity rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main computed=W/"b7bca0111578d46303ad088514629bfefef20ae3" screen_view=W/"b7bca0111578d46303ad088514629bfefef20ae3" headers_set=W/"b7bca0111578d46303ad088514629bfefef20ae3"
2025-10-15 00:46:31,234 INFO:app.routes.screens:screen_get response_set_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main etag=W/"b7bca0111578d46303ad088514629bfefef20ae3" before_count=2 after_count=2
INFO:     127.0.0.1:50408 - "GET /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/screens/s-main HTTP/1.1" 200 OK
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,334 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:31,339 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,339 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,343 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,343 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:31,346 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:31,346 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:31,348 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,350 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,357 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:31,357 INFO:app.routes.answers:autosave_start rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 if_match_raw=W/"b7bca0111578d46303ad088514629bfefef20ae3" if_match_norm=b7bca0111578d46303ad088514629bfefef20ae3 current_etag=W/"b7bca0111578d46303ad088514629bfefef20ae3"
2025-10-15 00:46:31,359 INFO:app.routes.answers:autosave_precheck_counts rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main existing_screen_count=2
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,368 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,369 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,369 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,372 INFO:app.routes.answers:vis_pre_state rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parents=['641a6188-3175-543b-9363-0fbd4fbf26b2'] parent_pre={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_pre=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
2025-10-15 00:46:31,376 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=59830e92-110f-5c6b-8cae-3388c0141e97 tuple=(None, 'Jane Doe', None, None)
2025-10-15 00:46:31,376 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:31,376 INFO:app.routes.answers:vis_pre_sets rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main pre_set={'2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2'} pre_list=['2b6fdab4-24e3-5a77-8985-e390e19ce02b', '641a6188-3175-543b-9363-0fbd4fbf26b2']
INFO:     127.0.0.1:50412 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 422 Unprocessable Entity
2025-10-15 00:46:31,504 INFO:app.logic.repository_answers:answers_delete rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,508 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:31,512 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,512 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,516 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,517 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:31,520 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:31,520 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:31,522 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,523 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,528 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:     127.0.0.1:50420 - "DELETE /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 204 No Content
2025-10-15 00:46:31,609 INFO:app.routes.screens:screen_get_request rs_id_raw=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key_raw=s-does-not-exist
INFO:     127.0.0.1:50426 - "GET /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/screens/s-does-not-exist HTTP/1.1" 404 Not Found
2025-10-15 00:46:31,713 INFO:app.logic.repository_answers:answers_delete rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,718 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:31,722 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,722 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,726 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,726 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:31,729 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:31,729 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:31,731 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,732 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,737 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:     127.0.0.1:50434 - "DELETE /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 204 No Content
2025-10-15 00:46:31,823 INFO:app.routes.screens:screen_get_request rs_id_raw=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key_raw=s-main
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,839 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:31,844 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,844 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,852 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,852 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:31,855 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:31,855 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:31,857 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,858 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,862 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,872 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:31,876 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,876 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:31,881 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,881 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:31,883 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:31,884 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:31,885 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:31,887 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,892 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:31,907 INFO:app.routes.screens:screen_get_etag_parity rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main computed=W/"77e31a8337e31ad7a18c14aec1b08785475ae61c" screen_view=W/"77e31a8337e31ad7a18c14aec1b08785475ae61c" headers_set=W/"77e31a8337e31ad7a18c14aec1b08785475ae61c"
2025-10-15 00:46:31,909 INFO:app.routes.screens:screen_get response_set_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main etag=W/"77e31a8337e31ad7a18c14aec1b08785475ae61c" before_count=2 after_count=2
INFO:     127.0.0.1:50448 - "GET /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/screens/s-main HTTP/1.1" 200 OK
INFO:     127.0.0.1:50454 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/499937fa-5d67-5cc8-a51c-79d797ffbd54 HTTP/1.1" 404 Not Found
2025-10-15 00:46:32,125 INFO:app.logic.repository_answers:answers_delete rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=641a6188-3175-543b-9363-0fbd4fbf26b2 path=db_ok
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:32,130 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:32,135 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:32,135 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:32,139 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:32,139 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:32,142 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:32,142 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:32,144 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:32,146 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:32,151 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:     127.0.0.1:50466 - "DELETE /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/641a6188-3175-543b-9363-0fbd4fbf26b2 HTTP/1.1" 204 No Content
2025-10-15 00:46:32,246 INFO:app.routes.screens:screen_get_request rs_id_raw=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key_raw=s-main
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:32,262 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:32,267 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:32,267 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:32,271 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:32,271 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:32,274 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:32,274 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:32,276 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:32,277 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:32,282 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:32,291 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:32,296 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:32,296 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:32,301 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:32,301 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:32,304 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:32,304 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:32,306 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:32,308 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:32,312 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:32,326 INFO:app.routes.screens:screen_get_etag_parity rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main computed=W/"6f3cabbcad137e6f75d99b973f1bf4b815677d53" screen_view=W/"6f3cabbcad137e6f75d99b973f1bf4b815677d53" headers_set=W/"6f3cabbcad137e6f75d99b973f1bf4b815677d53"
2025-10-15 00:46:32,328 INFO:app.routes.screens:screen_get response_set_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main etag=W/"6f3cabbcad137e6f75d99b973f1bf4b815677d53" before_count=2 after_count=2
INFO:     127.0.0.1:50472 - "GET /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/screens/s-main HTTP/1.1" 200 OK
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:32,436 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:32,441 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:32,441 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:32,445 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:32,445 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:32,448 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:32,448 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:32,450 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:32,451 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:32,455 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:32,455 INFO:app.routes.answers:autosave_start rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b if_match_raw=W/"6f3cabbcad137e6f75d99b973f1bf4b815677d53" if_match_norm=6f3cabbcad137e6f75d99b973f1bf4b815677d53 current_etag=W/"6f3cabbcad137e6f75d99b973f1bf4b815677d53"
INFO:     127.0.0.1:50488 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/2b6fdab4-24e3-5a77-8985-e390e19ce02b HTTP/1.1" 200 OK
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:32,547 INFO:app.logic.screen_builder:screen_rules rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main rules={'641a6188-3175-543b-9363-0fbd4fbf26b2': {'parent': None, 'visible_if': []}, '59830e92-110f-5c6b-8cae-3388c0141e97': {'parent': '641a6188-3175-543b-9363-0fbd4fbf26b2', 'visible_if': ['true']}, '2b6fdab4-24e3-5a77-8985-e390e19ce02b': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:32,552 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_raw={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:32,552 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None}
2025-10-15 00:46:32,557 INFO:app.logic.screen_builder:screen_visible_calc rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:32,557 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main changed_precompute=False parents_cnt=1
2025-10-15 00:46:32,560 INFO:app.logic.screen_builder:screen_visible_eval rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main child_q=59830e92-110f-5c6b-8cae-3388c0141e97 parent_q=641a6188-3175-543b-9363-0fbd4fbf26b2 included=False
2025-10-15 00:46:32,560 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
2025-10-15 00:46:32,562 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main parent_canon={'641a6188-3175-543b-9363-0fbd4fbf26b2': None} visible_ids_cnt=2
2025-10-15 00:46:32,564 INFO:app.logic.repository_answers:answers_cache_hit rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b tuple=(None, 'rotate-b632c76e-577b-4850-89f7-81c9c6d3591d', None, None)
INFO:app.logic.repository_screens:rules_parse screen_key=s-main qid=59830e92-110f-5c6b-8cae-3388c0141e97 parent=641a6188-3175-543b-9363-0fbd4fbf26b2 raw_visible_if=["true"] parsed=['true']
2025-10-15 00:46:32,569 INFO:app.logic.screen_builder:screen_questions_included rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 screen_key=s-main included=['641a6188-3175-543b-9363-0fbd4fbf26b2', '2b6fdab4-24e3-5a77-8985-e390e19ce02b']
2025-10-15 00:46:32,569 INFO:app.routes.answers:autosave_start rs_id=1d37450a-89ad-517e-a402-257c2f826ae9 q_id=2b6fdab4-24e3-5a77-8985-e390e19ce02b if_match_raw=W/"6f3cabbcad137e6f75d99b973f1bf4b815677d53" if_match_norm=6f3cabbcad137e6f75d99b973f1bf4b815677d53 current_etag=W/"6f3cabbcad137e6f75d99b973f1bf4b815677d53"
INFO:     127.0.0.1:50490 - "PATCH /api/v1/response-sets/1d37450a-89ad-517e-a402-257c2f826ae9/answers/2b6fdab4-24e3-5a77-8985-e390e19ce02b HTTP/1.1" 200 OK
INFO:     127.0.0.1:50494 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50500 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50514 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50522 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50526 - "GET /api/v1/documents/names HTTP/1.1" 200 OK
INFO:     127.0.0.1:50534 - "GET /api/v1/documents/94bdffc8-515c-4dda-8e78-5268d6d07a52 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50546 - "PUT /api/v1/documents/94bdffc8-515c-4dda-8e78-5268d6d07a52/content HTTP/1.1" 200 OK
INFO:     127.0.0.1:50558 - "GET /api/v1/documents/94bdffc8-515c-4dda-8e78-5268d6d07a52 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50562 - "PUT /api/v1/documents/94bdffc8-515c-4dda-8e78-5268d6d07a52/content HTTP/1.1" 200 OK
INFO:     127.0.0.1:50568 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50578 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50584 - "PUT /api/v1/documents/c5794b60-c9bb-46af-858a-8425894d6a35/content HTTP/1.1" 200 OK
INFO:     127.0.0.1:50592 - "PATCH /api/v1/documents/c5794b60-c9bb-46af-858a-8425894d6a35 HTTP/1.1" 200 OK
INFO:     127.0.0.1:50608 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50622 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50638 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50650 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50660 - "PUT /api/v1/documents/5319daf2-da91-46a4-832f-ba9c1689b7f0/content HTTP/1.1" 200 OK
INFO:     127.0.0.1:50676 - "GET /api/v1/documents/names HTTP/1.1" 200 OK
INFO:     127.0.0.1:50678 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50692 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50704 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50710 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50722 - "GET /api/v1/documents/names HTTP/1.1" 200 OK
INFO:     127.0.0.1:50732 - "PUT /api/v1/documents/order HTTP/1.1" 200 OK
INFO:     127.0.0.1:50744 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50748 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50750 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50756 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50764 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50768 - "DELETE /api/v1/documents/66838e38-4f73-4432-81da-f042107fb5c1 HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50782 - "GET /api/v1/documents/names HTTP/1.1" 200 OK
INFO:     127.0.0.1:50796 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50810 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50812 - "PUT /api/v1/documents/501acda7-feff-43a4-bc60-49dbdf4a982c/content HTTP/1.1" 200 OK
INFO:     127.0.0.1:50820 - "GET /api/v1/documents/501acda7-feff-43a4-bc60-49dbdf4a982c/content HTTP/1.1" 200 OK
INFO:     127.0.0.1:50828 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50836 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50846 - "POST /api/v1/documents HTTP/1.1" 409 Conflict
INFO:     127.0.0.1:50850 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50866 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50876 - "PUT /api/v1/documents/8b8ebb76-8ea2-4dbd-80be-8c5657829c54/content HTTP/1.1" 415 Unsupported Media Type
INFO:     127.0.0.1:50882 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50894 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50900 - "PUT /api/v1/documents/67cdc133-d10b-4a8e-9b55-73c7b0d75aa8/content HTTP/1.1" 200 OK
INFO:     127.0.0.1:50910 - "PUT /api/v1/documents/67cdc133-d10b-4a8e-9b55-73c7b0d75aa8/content HTTP/1.1" 428 Precondition Required
INFO:     127.0.0.1:50912 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50916 - "PUT /api/v1/documents/order HTTP/1.1" 412 Precondition Failed
INFO:     127.0.0.1:50922 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50924 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:50940 - "GET /api/v1/documents/15b0a6a7-6d1a-4df9-9364-2a98cf82c13d HTTP/1.1" 200 OK
INFO:     127.0.0.1:50956 - "PUT /api/v1/documents/15b0a6a7-6d1a-4df9-9364-2a98cf82c13d/content HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:50962 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50974 - "PUT /api/v1/documents/4f2a3b9d-9b2a-4d8b-932a-d1e9a1f1d001/content HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:50980 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:50996 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:51012 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=c4d24b45-841d-49d7-9a20-d6177e4dd437 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51022 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51038 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=c4d24b45-841d-49d7-9a20-d6177e4dd437 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51046 - "POST /api/v1/transforms/suggest HTTP/1.1" 200 OK
INFO:     127.0.0.1:51056 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:51062 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:51078 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=1c7fad77-7f09-4199-b7db-95c39136addc HTTP/1.1" 200 OK
INFO:     127.0.0.1:51088 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51102 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=1c7fad77-7f09-4199-b7db-95c39136addc HTTP/1.1" 200 OK
INFO:     127.0.0.1:51118 - "POST /api/v1/transforms/suggest HTTP/1.1" 200 OK
INFO:     127.0.0.1:51124 - "POST /api/v1/placeholders/bind HTTP/1.1" 412 Precondition Failed
INFO:     127.0.0.1:51126 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51128 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:51136 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:51146 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=c28be266-edd9-4d3e-bc6d-c398e3f76086 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51506 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51510 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=c28be266-edd9-4d3e-bc6d-c398e3f76086 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51520 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51532 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51548 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:51564 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:51576 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=1b7ab6a3-8aeb-4477-8b20-a300fa30205a HTTP/1.1" 200 OK
INFO:     127.0.0.1:51588 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51594 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=1b7ab6a3-8aeb-4477-8b20-a300fa30205a HTTP/1.1" 200 OK
INFO:     127.0.0.1:51600 - "POST /api/v1/transforms/suggest HTTP/1.1" 200 OK
INFO:     127.0.0.1:51610 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:51624 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:51632 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=33221a06-57ba-4350-8009-838634b2cdf0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51634 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51640 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=33221a06-57ba-4350-8009-838634b2cdf0 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51654 - "POST /api/v1/placeholders/bind HTTP/1.1" 412 Precondition Failed
INFO:     127.0.0.1:51662 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51678 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:51692 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:51708 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=94d0208a-8f89-4e93-be63-18a44595ecd5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51722 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51736 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=94d0208a-8f89-4e93-be63-18a44595ecd5 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51744 - "POST /api/v1/transforms/suggest HTTP/1.1" 200 OK
INFO:     127.0.0.1:51752 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:51766 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:51780 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=3acb7e24-d914-4cea-8bed-5d55b71d0876 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51794 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51798 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=3acb7e24-d914-4cea-8bed-5d55b71d0876 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51808 - "POST /api/v1/placeholders/bind HTTP/1.1" 412 Precondition Failed
INFO:     127.0.0.1:51822 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51826 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:51838 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:51850 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=f6bad1d4-139f-41a7-af6e-0d4e0ede8fa4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51866 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51876 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=f6bad1d4-139f-41a7-af6e-0d4e0ede8fa4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51892 - "POST /api/v1/transforms/suggest HTTP/1.1" 200 OK
INFO:     127.0.0.1:51904 - "POST /api/v1/placeholders/bind HTTP/1.1" 412 Precondition Failed
INFO:     127.0.0.1:51912 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51918 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=f6bad1d4-139f-41a7-af6e-0d4e0ede8fa4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51930 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:51944 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:51954 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=acd19e56-701e-47f7-bfca-3e774cf5f7d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51970 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:51978 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=acd19e56-701e-47f7-bfca-3e774cf5f7d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51986 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=acd19e56-701e-47f7-bfca-3e774cf5f7d3 HTTP/1.1" 200 OK
INFO:     127.0.0.1:51998 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52000 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:52012 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=e22f48d7-2b75-438a-b53f-8cba4503c9fd HTTP/1.1" 200 OK
INFO:     127.0.0.1:52028 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52042 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=e22f48d7-2b75-438a-b53f-8cba4503c9fd HTTP/1.1" 200 OK
INFO:     127.0.0.1:52052 - "GET /api/v1/questions/33e49f0b-1cd6-5201-9c84-175354e30b55/placeholders?document_id=e22f48d7-2b75-438a-b53f-8cba4503c9fd HTTP/1.1" 200 OK
INFO:     127.0.0.1:52058 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=e22f48d7-2b75-438a-b53f-8cba4503c9fd HTTP/1.1" 200 OK
INFO:     127.0.0.1:52066 - "GET /api/v1/questions/33e49f0b-1cd6-5201-9c84-175354e30b55/placeholders?document_id=e22f48d7-2b75-438a-b53f-8cba4503c9fd HTTP/1.1" 200 OK
INFO:     127.0.0.1:52078 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52086 - "GET /api/v1/questions/33e49f0b-1cd6-5201-9c84-175354e30b55/placeholders?document_id=e22f48d7-2b75-438a-b53f-8cba4503c9fd HTTP/1.1" 200 OK
INFO:     127.0.0.1:52092 - "GET /api/v1/questions/33e49f0b-1cd6-5201-9c84-175354e30b55/placeholders?document_id=e22f48d7-2b75-438a-b53f-8cba4503c9fd HTTP/1.1" 200 OK
INFO:     127.0.0.1:52098 - "POST /api/v1/placeholders/unbind HTTP/1.1" 412 Precondition Failed
INFO:     127.0.0.1:52106 - "POST /api/v1/placeholders/unbind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52114 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=e22f48d7-2b75-438a-b53f-8cba4503c9fd HTTP/1.1" 200 OK
INFO:     127.0.0.1:52128 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52132 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:52144 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=d4a778d4-6678-4616-b394-306f501c87f4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52154 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52158 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=d4a778d4-6678-4616-b394-306f501c87f4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52166 - "GET /api/v1/questions/0db4348f-3b9f-57db-a64b-85ce4944b8fc/placeholders?document_id=d4a778d4-6678-4616-b394-306f501c87f4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52168 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52184 - "GET /api/v1/questions/0db4348f-3b9f-57db-a64b-85ce4944b8fc/placeholders?document_id=d4a778d4-6678-4616-b394-306f501c87f4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52198 - "POST /api/v1/placeholders/unbind HTTP/1.1" 412 Precondition Failed
INFO:     127.0.0.1:52202 - "POST /api/v1/placeholders/unbind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52214 - "GET /api/v1/questions/0db4348f-3b9f-57db-a64b-85ce4944b8fc/placeholders?document_id=d4a778d4-6678-4616-b394-306f501c87f4 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52220 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52230 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:52232 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=540382d2-162f-4fc9-bb2e-2e49d91f50c9 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52242 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52252 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=540382d2-162f-4fc9-bb2e-2e49d91f50c9 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52258 - "POST /api/v1/documents/540382d2-162f-4fc9-bb2e-2e49d91f50c9/bindings%3Apurge HTTP/1.1" 200 OK
INFO:     127.0.0.1:52264 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=540382d2-162f-4fc9-bb2e-2e49d91f50c9 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52274 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52284 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:52298 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=5469927a-f9b2-4c1e-ba68-476370059994 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52300 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52310 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=5469927a-f9b2-4c1e-ba68-476370059994 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52322 - "GET /api/v1/transforms/catalog HTTP/1.1" 200 OK
INFO:     127.0.0.1:52326 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52334 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:52336 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=74562970-36cb-47ea-a527-919a64e10de8 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52340 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52350 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=74562970-36cb-47ea-a527-919a64e10de8 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52364 - "POST /api/v1/transforms/preview HTTP/1.1" 200 OK
INFO:     127.0.0.1:52370 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52376 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:52392 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=b9db4c93-b0a6-405e-ab6f-78e51d612689 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52408 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52416 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=b9db4c93-b0a6-405e-ab6f-78e51d612689 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52426 - "POST /api/v1/transforms/suggest HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:52434 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52442 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:52454 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=dbbd902f-b922-469e-bbf7-711609a40a6f HTTP/1.1" 200 OK
INFO:     127.0.0.1:52470 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52480 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=dbbd902f-b922-469e-bbf7-711609a40a6f HTTP/1.1" 200 OK
INFO:     127.0.0.1:52492 - "POST /api/v1/transforms/suggest HTTP/1.1" 200 OK
INFO:     127.0.0.1:52506 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52516 - "POST /api/v1/placeholders/bind HTTP/1.1" 412 Precondition Failed
INFO:     127.0.0.1:52528 - "POST /api/v1/placeholders/bind HTTP/1.1" 409 Conflict
INFO:     127.0.0.1:52538 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52542 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:52544 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=d6048f87-3413-40f6-a391-9660b2667af9 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52560 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52574 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=d6048f87-3413-40f6-a391-9660b2667af9 HTTP/1.1" 200 OK
INFO:     127.0.0.1:52588 - "POST /api/v1/placeholders/bind HTTP/1.1" 412 Precondition Failed
INFO:     127.0.0.1:52594 - "POST /api/v1/placeholders/bind HTTP/1.1" 412 Precondition Failed
INFO:     127.0.0.1:52598 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52614 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:52626 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=0565d454-df52-4469-970a-a9785e2c1f6b HTTP/1.1" 200 OK
INFO:     127.0.0.1:52628 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:52632 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=0565d454-df52-4469-970a-a9785e2c1f6b HTTP/1.1" 200 OK
INFO:     127.0.0.1:52636 - "POST /api/v1/placeholders/bind HTTP/1.1" 412 Precondition Failed
INFO:     127.0.0.1:52644 - "POST /api/v1/placeholders/bind HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:52648 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:52650 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:39976 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=b469e833-6975-4932-977c-703b10c25522 HTTP/1.1" 200 OK
INFO:     127.0.0.1:39980 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:39992 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=b469e833-6975-4932-977c-703b10c25522 HTTP/1.1" 200 OK
INFO:     127.0.0.1:39994 - "POST /api/v1/placeholders/unbind HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:39998 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:40012 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:40016 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=337bb7fb-b8ea-436a-94e4-d8eadce1f709 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40028 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:40040 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=337bb7fb-b8ea-436a-94e4-d8eadce1f709 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40054 - "POST /api/v1/placeholders/bind HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:40066 - "GET /api/v1/questions/0db4348f-3b9f-57db-a64b-85ce4944b8fc/placeholders?document_id=337bb7fb-b8ea-436a-94e4-d8eadce1f709 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40076 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:40092 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:40094 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=576209d3-4c5a-429b-a1f8-906d3d385470 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40102 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:40118 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=576209d3-4c5a-429b-a1f8-906d3d385470 HTTP/1.1" 200 OK
purge_bindings:not_found document_id=8f17481a-8441-5f7e-9187-560c3c8cfed1
INFO:     127.0.0.1:40128 - "POST /api/v1/documents/8f17481a-8441-5f7e-9187-560c3c8cfed1/bindings%3Apurge HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:40142 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:40158 - "POST /api/v1/documents HTTP/1.1" 201 Created
INFO:     127.0.0.1:40166 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=aff1e1b7-1555-4105-be90-a216ded3657d HTTP/1.1" 200 OK
INFO:     127.0.0.1:40178 - "POST /api/v1/placeholders/bind HTTP/1.1" 200 OK
INFO:     127.0.0.1:40192 - "GET /api/v1/questions/96ae04bf-8c0c-5022-a76c-27c7f4249f1d/placeholders?document_id=aff1e1b7-1555-4105-be90-a216ded3657d HTTP/1.1" 200 OK
INFO:     127.0.0.1:40206 - "POST /api/v1/documents/doc-noop/bindings%3Apurge HTTP/1.1" 200 OK
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (be0bf424-0379-4dbe-aa7d-ff1d55b28ab2, null, 2025-10-14 23:46:50+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (be0bf424-0379-4dbe-aa7d-ff1d55b28ab2, null, 2025-10-14 23:46:50+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': 'be0bf424-0379-4dbe-aa7d-ff1d55b28ab2', 'company_id': None, 'created_at': '2025-10-14T23:46:50Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40220 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (9bb0a977-4ea7-4a4e-8758-ca392b782073, null, 2025-10-14 23:46:50+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (9bb0a977-4ea7-4a4e-8758-ca392b782073, null, 2025-10-14 23:46:50+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': '9bb0a977-4ea7-4a4e-8758-ca392b782073', 'company_id': None, 'created_at': '2025-10-14T23:46:50Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40230 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:50,937 INFO:app.routes.screens:screen_get_request rs_id_raw=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key_raw=profile
2025-10-15 00:46:50,954 INFO:app.logic.screen_builder:screen_rules rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:50,955 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile parent_raw={}
2025-10-15 00:46:50,955 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile parent_canon={}
2025-10-15 00:46:50,955 INFO:app.logic.screen_builder:screen_visible_calc rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:50,955 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:50,960 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:50,969 INFO:app.logic.screen_builder:screen_questions_included rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:50,976 INFO:app.logic.screen_builder:screen_rules rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:50,976 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile parent_raw={}
2025-10-15 00:46:50,976 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile parent_canon={}
2025-10-15 00:46:50,976 INFO:app.logic.screen_builder:screen_visible_calc rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:50,976 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:50,982 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:50,992 INFO:app.logic.screen_builder:screen_questions_included rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,004 INFO:app.routes.screens:screen_get_etag_parity rs_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile computed=W/"af7879a5d118400eb82cf6cb241201b55390f13f" screen_view=W/"af7879a5d118400eb82cf6cb241201b55390f13f" headers_set=W/"af7879a5d118400eb82cf6cb241201b55390f13f"
2025-10-15 00:46:51,006 INFO:app.routes.screens:screen_get response_set_id=9bb0a977-4ea7-4a4e-8758-ca392b782073 screen_key=profile etag=W/"af7879a5d118400eb82cf6cb241201b55390f13f" before_count=0 after_count=0
INFO:     127.0.0.1:40244 - "GET /api/v1/response-sets/9bb0a977-4ea7-4a4e-8758-ca392b782073/screens/profile HTTP/1.1" 200 OK
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (999087ed-f802-4fd4-988a-af8867fe64a1, null, 2025-10-14 23:46:51+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (999087ed-f802-4fd4-988a-af8867fe64a1, null, 2025-10-14 23:46:51+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': '999087ed-f802-4fd4-988a-af8867fe64a1', 'company_id': None, 'created_at': '2025-10-14T23:46:51Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40256 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:51,197 INFO:app.routes.screens:screen_get_request rs_id_raw=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key_raw=profile
2025-10-15 00:46:51,214 INFO:app.logic.screen_builder:screen_rules rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:51,214 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_raw={}
2025-10-15 00:46:51,214 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={}
2025-10-15 00:46:51,214 INFO:app.logic.screen_builder:screen_visible_calc rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,215 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:51,221 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,231 INFO:app.logic.screen_builder:screen_questions_included rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,239 INFO:app.logic.screen_builder:screen_rules rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:51,239 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_raw={}
2025-10-15 00:46:51,239 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={}
2025-10-15 00:46:51,239 INFO:app.logic.screen_builder:screen_visible_calc rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,239 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:51,247 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,257 INFO:app.logic.screen_builder:screen_questions_included rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,271 INFO:app.routes.screens:screen_get_etag_parity rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile computed=W/"cfa4dacc9294682c7087c90855547d36161963cd" screen_view=W/"cfa4dacc9294682c7087c90855547d36161963cd" headers_set=W/"cfa4dacc9294682c7087c90855547d36161963cd"
2025-10-15 00:46:51,273 INFO:app.routes.screens:screen_get response_set_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile etag=W/"cfa4dacc9294682c7087c90855547d36161963cd" before_count=0 after_count=0
INFO:     127.0.0.1:40264 - "GET /api/v1/response-sets/999087ed-f802-4fd4-988a-af8867fe64a1/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:51,373 INFO:app.logic.screen_builder:screen_rules rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:51,373 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_raw={}
2025-10-15 00:46:51,374 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={}
2025-10-15 00:46:51,374 INFO:app.logic.screen_builder:screen_visible_calc rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,374 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:51,380 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,389 INFO:app.logic.screen_builder:screen_questions_included rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,389 INFO:app.routes.answers:autosave_start rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 q_id=11111111-1111-1111-1111-111111111111 if_match_raw=W/"cfa4dacc9294682c7087c90855547d36161963cd" if_match_norm=cfa4dacc9294682c7087c90855547d36161963cd current_etag=W/"cfa4dacc9294682c7087c90855547d36161963cd"
2025-10-15 00:46:51,392 INFO:app.routes.answers:autosave_precheck_counts rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile existing_screen_count=0
2025-10-15 00:46:51,395 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_raw={}
2025-10-15 00:46:51,395 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={}
2025-10-15 00:46:51,395 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={}
2025-10-15 00:46:51,395 INFO:app.routes.answers:vis_pre_state rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,403 INFO:app.routes.answers:vis_pre_sets rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,404 INFO:app.routes.answers:autosave_write_begin rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 q_id=11111111-1111-1111-1111-111111111111 value=42 option_id=None
2025-10-15 00:46:51,407 ERROR:app.logic.repository_answers:upsert_answer DB write failed rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 q_id=11111111-1111-1111-1111-111111111111; falling back to in-memory
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(999087ed-f802-4fd4-988a-af8867fe64a1) is not present in table "response_set".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 362, in upsert_answer
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(999087ed-f802-4fd4-988a-af8867fe64a1) is not present in table "response_set".

[SQL: 
                        INSERT INTO response (response_id, response_set_id, question_id, option_id, value_text, value_number, value_bool, value_json, answered_at)
                        VALUES (%(rid)s, %(rs)s, %(qid)s, %(opt)s, %(vtext)s, %(vnum)s, %(vbool)s, CAST(%(vjson)s AS JSONB), now())
                        ON CONFLICT (response_set_id, question_id)
                        DO UPDATE SET option_id = EXCLUDED.option_id,
                                      value_text = EXCLUDED.value_text,
                                      value_number = EXCLUDED.value_number,
                                      value_bool = EXCLUDED.value_bool,
                                      value_json = EXCLUDED.value_json,
                                      answered_at = now()
                        ]
[parameters: {'rid': '9f5d34ab-eaac-5251-9ce3-20bb32b9ff33', 'rs': '999087ed-f802-4fd4-988a-af8867fe64a1', 'qid': '11111111-1111-1111-1111-111111111111', 'opt': None, 'vtext': None, 'vnum': 42.0, 'vbool': None, 'vjson': '42'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-15 00:46:51,409 INFO:app.logic.repository_answers:answers_cache_hit rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 42.0, None)
2025-10-15 00:46:51,415 INFO:app.logic.screen_builder:screen_rules rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:51,415 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_raw={}
2025-10-15 00:46:51,415 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={}
2025-10-15 00:46:51,415 INFO:app.logic.screen_builder:screen_visible_calc rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,415 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:51,416 INFO:app.logic.repository_answers:answers_cache_hit rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 42.0, None)
2025-10-15 00:46:51,421 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,421 INFO:app.logic.repository_answers:answers_cache_hit rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 42.0, None)
2025-10-15 00:46:51,428 INFO:app.logic.screen_builder:screen_questions_included rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,428 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile parent_canon={}
2025-10-15 00:46:51,428 INFO:app.routes.answers:vis_post_sets rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile post_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} post_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,428 INFO:app.routes.answers:visibility_delta_inputs rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] visible_post=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] parent_value_pre={} parent_value_post={}
2025-10-15 00:46:51,429 INFO:app.routes.answers:vis_suppress_summary rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 screen_key=profile now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:51,429 INFO:app.routes.answers:autosave_ok rs_id=999087ed-f802-4fd4-988a-af8867fe64a1 q_id=11111111-1111-1111-1111-111111111111 screen_key=profile new_etag=W/"93b43beb5c25acaf6fd435de662dd063d7b7bee9" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:40270 - "PATCH /api/v1/response-sets/999087ed-f802-4fd4-988a-af8867fe64a1/answers/11111111-1111-1111-1111-111111111111 HTTP/1.1" 200 OK
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (76462b50-49d7-46e6-8070-29a768e1085a, null, 2025-10-14 23:46:51+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (76462b50-49d7-46e6-8070-29a768e1085a, null, 2025-10-14 23:46:51+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': '76462b50-49d7-46e6-8070-29a768e1085a', 'company_id': None, 'created_at': '2025-10-14T23:46:51Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40286 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:51,612 INFO:app.routes.screens:screen_get_request rs_id_raw=76462b50-49d7-46e6-8070-29a768e1085a screen_key_raw=profile
2025-10-15 00:46:51,627 INFO:app.logic.screen_builder:screen_rules rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:51,627 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_raw={}
2025-10-15 00:46:51,628 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={}
2025-10-15 00:46:51,628 INFO:app.logic.screen_builder:screen_visible_calc rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,628 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:51,634 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,644 INFO:app.logic.screen_builder:screen_questions_included rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,652 INFO:app.logic.screen_builder:screen_rules rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:51,652 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_raw={}
2025-10-15 00:46:51,652 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={}
2025-10-15 00:46:51,652 INFO:app.logic.screen_builder:screen_visible_calc rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,652 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:51,658 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,665 INFO:app.logic.screen_builder:screen_questions_included rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,675 INFO:app.routes.screens:screen_get_etag_parity rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile computed=W/"87f1c091e1fb368422fa2b8b5846279ee6f3f32c" screen_view=W/"87f1c091e1fb368422fa2b8b5846279ee6f3f32c" headers_set=W/"87f1c091e1fb368422fa2b8b5846279ee6f3f32c"
2025-10-15 00:46:51,677 INFO:app.routes.screens:screen_get response_set_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile etag=W/"87f1c091e1fb368422fa2b8b5846279ee6f3f32c" before_count=0 after_count=0
INFO:     127.0.0.1:40288 - "GET /api/v1/response-sets/76462b50-49d7-46e6-8070-29a768e1085a/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:51,769 INFO:app.logic.screen_builder:screen_rules rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:51,769 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_raw={}
2025-10-15 00:46:51,769 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={}
2025-10-15 00:46:51,769 INFO:app.logic.screen_builder:screen_visible_calc rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,769 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:51,774 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,782 INFO:app.logic.screen_builder:screen_questions_included rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,782 INFO:app.routes.answers:autosave_start rs_id=76462b50-49d7-46e6-8070-29a768e1085a q_id=22222222-2222-2222-2222-222222222222 if_match_raw=W/"87f1c091e1fb368422fa2b8b5846279ee6f3f32c" if_match_norm=87f1c091e1fb368422fa2b8b5846279ee6f3f32c current_etag=W/"87f1c091e1fb368422fa2b8b5846279ee6f3f32c"
2025-10-15 00:46:51,784 INFO:app.routes.answers:autosave_precheck_counts rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile existing_screen_count=0
2025-10-15 00:46:51,787 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_raw={}
2025-10-15 00:46:51,788 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={}
2025-10-15 00:46:51,788 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={}
2025-10-15 00:46:51,788 INFO:app.routes.answers:vis_pre_state rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,794 INFO:app.routes.answers:vis_pre_sets rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,795 INFO:app.routes.answers:autosave_write_begin rs_id=76462b50-49d7-46e6-8070-29a768e1085a q_id=22222222-2222-2222-2222-222222222222 value=True option_id=None
2025-10-15 00:46:51,797 ERROR:app.logic.repository_answers:upsert_answer DB write failed rs_id=76462b50-49d7-46e6-8070-29a768e1085a q_id=22222222-2222-2222-2222-222222222222; falling back to in-memory
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(76462b50-49d7-46e6-8070-29a768e1085a) is not present in table "response_set".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 362, in upsert_answer
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(76462b50-49d7-46e6-8070-29a768e1085a) is not present in table "response_set".

[SQL: 
                        INSERT INTO response (response_id, response_set_id, question_id, option_id, value_text, value_number, value_bool, value_json, answered_at)
                        VALUES (%(rid)s, %(rs)s, %(qid)s, %(opt)s, %(vtext)s, %(vnum)s, %(vbool)s, CAST(%(vjson)s AS JSONB), now())
                        ON CONFLICT (response_set_id, question_id)
                        DO UPDATE SET option_id = EXCLUDED.option_id,
                                      value_text = EXCLUDED.value_text,
                                      value_number = EXCLUDED.value_number,
                                      value_bool = EXCLUDED.value_bool,
                                      value_json = EXCLUDED.value_json,
                                      answered_at = now()
                        ]
[parameters: {'rid': '87c82b1b-a275-5a30-b3b3-b011dc655395', 'rs': '76462b50-49d7-46e6-8070-29a768e1085a', 'qid': '22222222-2222-2222-2222-222222222222', 'opt': None, 'vtext': None, 'vnum': None, 'vbool': True, 'vjson': 'true'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-15 00:46:51,799 INFO:app.logic.repository_answers:answers_cache_hit rs_id=76462b50-49d7-46e6-8070-29a768e1085a q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, True)
2025-10-15 00:46:51,804 INFO:app.logic.screen_builder:screen_rules rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:51,804 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_raw={}
2025-10-15 00:46:51,804 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={}
2025-10-15 00:46:51,804 INFO:app.logic.screen_builder:screen_visible_calc rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,804 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:51,806 INFO:app.logic.repository_answers:answers_cache_hit rs_id=76462b50-49d7-46e6-8070-29a768e1085a q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, True)
2025-10-15 00:46:51,808 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:51,809 INFO:app.logic.repository_answers:answers_cache_hit rs_id=76462b50-49d7-46e6-8070-29a768e1085a q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, True)
2025-10-15 00:46:51,814 INFO:app.logic.screen_builder:screen_questions_included rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,814 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile parent_canon={}
2025-10-15 00:46:51,815 INFO:app.routes.answers:vis_post_sets rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile post_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} post_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:51,815 INFO:app.routes.answers:visibility_delta_inputs rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] visible_post=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] parent_value_pre={} parent_value_post={}
2025-10-15 00:46:51,815 INFO:app.routes.answers:vis_suppress_summary rs_id=76462b50-49d7-46e6-8070-29a768e1085a screen_key=profile now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:51,815 INFO:app.routes.answers:autosave_ok rs_id=76462b50-49d7-46e6-8070-29a768e1085a q_id=22222222-2222-2222-2222-222222222222 screen_key=profile new_etag=W/"8e26cb59b56a0a9aaff14848fa7f87781fa08827" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:40290 - "PATCH /api/v1/response-sets/76462b50-49d7-46e6-8070-29a768e1085a/answers/22222222-2222-2222-2222-222222222222 HTTP/1.1" 200 OK
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (b4c1a97a-e34d-464a-ba60-f3e5be990de4, null, 2025-10-14 23:46:51+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (b4c1a97a-e34d-464a-ba60-f3e5be990de4, null, 2025-10-14 23:46:51+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': 'b4c1a97a-e34d-464a-ba60-f3e5be990de4', 'company_id': None, 'created_at': '2025-10-14T23:46:51Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40304 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:51,993 INFO:app.routes.screens:screen_get_request rs_id_raw=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key_raw=profile
2025-10-15 00:46:52,007 INFO:app.logic.screen_builder:screen_rules rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:52,007 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_raw={}
2025-10-15 00:46:52,007 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={}
2025-10-15 00:46:52,007 INFO:app.logic.screen_builder:screen_visible_calc rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,007 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:52,012 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,020 INFO:app.logic.screen_builder:screen_questions_included rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,027 INFO:app.logic.screen_builder:screen_rules rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:52,027 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_raw={}
2025-10-15 00:46:52,027 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={}
2025-10-15 00:46:52,027 INFO:app.logic.screen_builder:screen_visible_calc rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,027 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:52,033 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,041 INFO:app.logic.screen_builder:screen_questions_included rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,051 INFO:app.routes.screens:screen_get_etag_parity rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile computed=W/"0d0b1c2457d8673fec2ba9ab1c7b04af018cf936" screen_view=W/"0d0b1c2457d8673fec2ba9ab1c7b04af018cf936" headers_set=W/"0d0b1c2457d8673fec2ba9ab1c7b04af018cf936"
2025-10-15 00:46:52,053 INFO:app.routes.screens:screen_get response_set_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile etag=W/"0d0b1c2457d8673fec2ba9ab1c7b04af018cf936" before_count=0 after_count=0
INFO:     127.0.0.1:40320 - "GET /api/v1/response-sets/b4c1a97a-e34d-464a-ba60-f3e5be990de4/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:52,158 INFO:app.logic.screen_builder:screen_rules rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:52,159 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_raw={}
2025-10-15 00:46:52,159 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={}
2025-10-15 00:46:52,159 INFO:app.logic.screen_builder:screen_visible_calc rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,159 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:52,165 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,177 INFO:app.logic.screen_builder:screen_questions_included rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,177 INFO:app.routes.answers:autosave_start rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 q_id=33333333-3333-3333-3333-333333333333 if_match_raw=W/"0d0b1c2457d8673fec2ba9ab1c7b04af018cf936" if_match_norm=0d0b1c2457d8673fec2ba9ab1c7b04af018cf936 current_etag=W/"0d0b1c2457d8673fec2ba9ab1c7b04af018cf936"
2025-10-15 00:46:52,180 INFO:app.routes.answers:autosave_precheck_counts rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile existing_screen_count=0
2025-10-15 00:46:52,184 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_raw={}
2025-10-15 00:46:52,184 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={}
2025-10-15 00:46:52,184 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={}
2025-10-15 00:46:52,184 INFO:app.routes.answers:vis_pre_state rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,193 INFO:app.routes.answers:vis_pre_sets rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,196 INFO:app.routes.answers:autosave_write_begin rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 q_id=33333333-3333-3333-3333-333333333333 value=None option_id=aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa
2025-10-15 00:46:52,199 ERROR:app.logic.repository_answers:upsert_answer DB write failed rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 q_id=33333333-3333-3333-3333-333333333333; falling back to in-memory
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(b4c1a97a-e34d-464a-ba60-f3e5be990de4) is not present in table "response_set".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 362, in upsert_answer
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(b4c1a97a-e34d-464a-ba60-f3e5be990de4) is not present in table "response_set".

[SQL: 
                        INSERT INTO response (response_id, response_set_id, question_id, option_id, value_text, value_number, value_bool, value_json, answered_at)
                        VALUES (%(rid)s, %(rs)s, %(qid)s, %(opt)s, %(vtext)s, %(vnum)s, %(vbool)s, CAST(%(vjson)s AS JSONB), now())
                        ON CONFLICT (response_set_id, question_id)
                        DO UPDATE SET option_id = EXCLUDED.option_id,
                                      value_text = EXCLUDED.value_text,
                                      value_number = EXCLUDED.value_number,
                                      value_bool = EXCLUDED.value_bool,
                                      value_json = EXCLUDED.value_json,
                                      answered_at = now()
                        ]
[parameters: {'rid': 'af29fd59-5dfc-5479-837d-11bebfee09d1', 'rs': 'b4c1a97a-e34d-464a-ba60-f3e5be990de4', 'qid': '33333333-3333-3333-3333-333333333333', 'opt': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'vtext': None, 'vnum': None, 'vbool': None, 'vjson': 'null'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-15 00:46:52,202 INFO:app.logic.repository_answers:answers_cache_hit rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 q_id=33333333-3333-3333-3333-333333333333 tuple=('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', None, None, None)
2025-10-15 00:46:52,209 INFO:app.logic.screen_builder:screen_rules rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:52,209 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_raw={}
2025-10-15 00:46:52,209 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={}
2025-10-15 00:46:52,209 INFO:app.logic.screen_builder:screen_visible_calc rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,209 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:52,213 INFO:app.logic.repository_answers:answers_cache_hit rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 q_id=33333333-3333-3333-3333-333333333333 tuple=('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', None, None, None)
2025-10-15 00:46:52,215 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,218 INFO:app.logic.repository_answers:answers_cache_hit rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 q_id=33333333-3333-3333-3333-333333333333 tuple=('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', None, None, None)
2025-10-15 00:46:52,223 INFO:app.logic.screen_builder:screen_questions_included rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,223 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile parent_canon={}
2025-10-15 00:46:52,223 INFO:app.routes.answers:vis_post_sets rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile post_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} post_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,223 INFO:app.routes.answers:visibility_delta_inputs rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] visible_post=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] parent_value_pre={} parent_value_post={}
2025-10-15 00:46:52,224 INFO:app.routes.answers:vis_suppress_summary rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 screen_key=profile now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:52,224 INFO:app.routes.answers:autosave_ok rs_id=b4c1a97a-e34d-464a-ba60-f3e5be990de4 q_id=33333333-3333-3333-3333-333333333333 screen_key=profile new_etag=W/"8724e47c7609f53218b838cccb5b1dd8fdd94aa5" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:40328 - "PATCH /api/v1/response-sets/b4c1a97a-e34d-464a-ba60-f3e5be990de4/answers/33333333-3333-3333-3333-333333333333 HTTP/1.1" 200 OK
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (912bb5e9-c978-4329-b005-9f4c5b06f70d, null, 2025-10-14 23:46:52+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (912bb5e9-c978-4329-b005-9f4c5b06f70d, null, 2025-10-14 23:46:52+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': '912bb5e9-c978-4329-b005-9f4c5b06f70d', 'company_id': None, 'created_at': '2025-10-14T23:46:52Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40342 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:52,417 INFO:app.routes.screens:screen_get_request rs_id_raw=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key_raw=profile
2025-10-15 00:46:52,432 INFO:app.logic.screen_builder:screen_rules rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:52,432 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_raw={}
2025-10-15 00:46:52,432 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={}
2025-10-15 00:46:52,432 INFO:app.logic.screen_builder:screen_visible_calc rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,432 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:52,438 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,446 INFO:app.logic.screen_builder:screen_questions_included rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,453 INFO:app.logic.screen_builder:screen_rules rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:52,454 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_raw={}
2025-10-15 00:46:52,454 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={}
2025-10-15 00:46:52,454 INFO:app.logic.screen_builder:screen_visible_calc rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,454 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:52,460 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,468 INFO:app.logic.screen_builder:screen_questions_included rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,479 INFO:app.routes.screens:screen_get_etag_parity rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile computed=W/"3bade81ab9ebc0ecb712758986faf464ba373935" screen_view=W/"3bade81ab9ebc0ecb712758986faf464ba373935" headers_set=W/"3bade81ab9ebc0ecb712758986faf464ba373935"
2025-10-15 00:46:52,481 INFO:app.routes.screens:screen_get response_set_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile etag=W/"3bade81ab9ebc0ecb712758986faf464ba373935" before_count=0 after_count=0
INFO:     127.0.0.1:40358 - "GET /api/v1/response-sets/912bb5e9-c978-4329-b005-9f4c5b06f70d/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:52,582 INFO:app.logic.screen_builder:screen_rules rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:52,583 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_raw={}
2025-10-15 00:46:52,583 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={}
2025-10-15 00:46:52,583 INFO:app.logic.screen_builder:screen_visible_calc rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,583 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:52,590 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,598 INFO:app.logic.screen_builder:screen_questions_included rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,598 INFO:app.routes.answers:autosave_start rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d q_id=33333333-3333-3333-3333-333333333333 if_match_raw=W/"3bade81ab9ebc0ecb712758986faf464ba373935" if_match_norm=3bade81ab9ebc0ecb712758986faf464ba373935 current_etag=W/"3bade81ab9ebc0ecb712758986faf464ba373935"
2025-10-15 00:46:52,600 INFO:app.routes.answers:autosave_precheck_counts rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile existing_screen_count=0
2025-10-15 00:46:52,603 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_raw={}
2025-10-15 00:46:52,603 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={}
2025-10-15 00:46:52,603 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={}
2025-10-15 00:46:52,603 INFO:app.routes.answers:vis_pre_state rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,611 INFO:app.routes.answers:vis_pre_sets rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,614 INFO:app.routes.answers:autosave_write_begin rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d q_id=33333333-3333-3333-3333-333333333333 value=GB option_id=aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa
2025-10-15 00:46:52,616 ERROR:app.logic.repository_answers:upsert_answer DB write failed rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d q_id=33333333-3333-3333-3333-333333333333; falling back to in-memory
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(912bb5e9-c978-4329-b005-9f4c5b06f70d) is not present in table "response_set".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 362, in upsert_answer
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(912bb5e9-c978-4329-b005-9f4c5b06f70d) is not present in table "response_set".

[SQL: 
                        INSERT INTO response (response_id, response_set_id, question_id, option_id, value_text, value_number, value_bool, value_json, answered_at)
                        VALUES (%(rid)s, %(rs)s, %(qid)s, %(opt)s, %(vtext)s, %(vnum)s, %(vbool)s, CAST(%(vjson)s AS JSONB), now())
                        ON CONFLICT (response_set_id, question_id)
                        DO UPDATE SET option_id = EXCLUDED.option_id,
                                      value_text = EXCLUDED.value_text,
                                      value_number = EXCLUDED.value_number,
                                      value_bool = EXCLUDED.value_bool,
                                      value_json = EXCLUDED.value_json,
                                      answered_at = now()
                        ]
[parameters: {'rid': 'afbe6149-0c68-58ee-8353-5ffe8dc58665', 'rs': '912bb5e9-c978-4329-b005-9f4c5b06f70d', 'qid': '33333333-3333-3333-3333-333333333333', 'opt': 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'vtext': 'GB', 'vnum': None, 'vbool': None, 'vjson': '"GB"'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-15 00:46:52,618 INFO:app.logic.repository_answers:answers_cache_hit rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d q_id=33333333-3333-3333-3333-333333333333 tuple=('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'GB', None, None)
2025-10-15 00:46:52,624 INFO:app.logic.screen_builder:screen_rules rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:52,624 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_raw={}
2025-10-15 00:46:52,625 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={}
2025-10-15 00:46:52,625 INFO:app.logic.screen_builder:screen_visible_calc rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,625 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:52,627 INFO:app.logic.repository_answers:answers_cache_hit rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d q_id=33333333-3333-3333-3333-333333333333 tuple=('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'GB', None, None)
2025-10-15 00:46:52,629 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,632 INFO:app.logic.repository_answers:answers_cache_hit rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d q_id=33333333-3333-3333-3333-333333333333 tuple=('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'GB', None, None)
2025-10-15 00:46:52,636 INFO:app.logic.screen_builder:screen_questions_included rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,637 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile parent_canon={}
2025-10-15 00:46:52,637 INFO:app.routes.answers:vis_post_sets rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile post_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} post_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,637 INFO:app.routes.answers:visibility_delta_inputs rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] visible_post=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] parent_value_pre={} parent_value_post={}
2025-10-15 00:46:52,637 INFO:app.routes.answers:vis_suppress_summary rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d screen_key=profile now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:52,637 INFO:app.routes.answers:autosave_ok rs_id=912bb5e9-c978-4329-b005-9f4c5b06f70d q_id=33333333-3333-3333-3333-333333333333 screen_key=profile new_etag=W/"70edd09e25320cbe9be0d2f27d9fda43f62bbdbd" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:40362 - "PATCH /api/v1/response-sets/912bb5e9-c978-4329-b005-9f4c5b06f70d/answers/33333333-3333-3333-3333-333333333333 HTTP/1.1" 200 OK
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (df76f714-f734-40f4-9831-af2b05f1427f, null, 2025-10-14 23:46:52+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (df76f714-f734-40f4-9831-af2b05f1427f, null, 2025-10-14 23:46:52+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': 'df76f714-f734-40f4-9831-af2b05f1427f', 'company_id': None, 'created_at': '2025-10-14T23:46:52Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40370 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:52,824 INFO:app.routes.screens:screen_get_request rs_id_raw=df76f714-f734-40f4-9831-af2b05f1427f screen_key_raw=profile
2025-10-15 00:46:52,840 INFO:app.logic.screen_builder:screen_rules rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile rules={'44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}, '11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:52,840 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_raw={}
2025-10-15 00:46:52,841 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={}
2025-10-15 00:46:52,841 INFO:app.logic.screen_builder:screen_visible_calc rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,841 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:52,846 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,855 INFO:app.logic.screen_builder:screen_questions_included rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,862 INFO:app.logic.screen_builder:screen_rules rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile rules={'44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}, '11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:52,863 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_raw={}
2025-10-15 00:46:52,863 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={}
2025-10-15 00:46:52,863 INFO:app.logic.screen_builder:screen_visible_calc rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,863 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:52,868 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,877 INFO:app.logic.screen_builder:screen_questions_included rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:52,888 INFO:app.routes.screens:screen_get_etag_parity rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile computed=W/"3126c0b9f8f07cce66efad257da9fab42db3479f" screen_view=W/"3126c0b9f8f07cce66efad257da9fab42db3479f" headers_set=W/"3126c0b9f8f07cce66efad257da9fab42db3479f"
2025-10-15 00:46:52,889 INFO:app.routes.screens:screen_get response_set_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile etag=W/"3126c0b9f8f07cce66efad257da9fab42db3479f" before_count=0 after_count=0
INFO:     127.0.0.1:40380 - "GET /api/v1/response-sets/df76f714-f734-40f4-9831-af2b05f1427f/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:52,988 INFO:app.logic.screen_builder:screen_rules rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile rules={'44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}, '11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:52,988 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_raw={}
2025-10-15 00:46:52,988 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={}
2025-10-15 00:46:52,988 INFO:app.logic.screen_builder:screen_visible_calc rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:52,988 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:52,995 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,003 INFO:app.logic.screen_builder:screen_questions_included rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,003 INFO:app.routes.answers:autosave_start rs_id=df76f714-f734-40f4-9831-af2b05f1427f q_id=44444444-4444-4444-4444-444444444444 if_match_raw=W/"3126c0b9f8f07cce66efad257da9fab42db3479f" if_match_norm=3126c0b9f8f07cce66efad257da9fab42db3479f current_etag=W/"3126c0b9f8f07cce66efad257da9fab42db3479f"
2025-10-15 00:46:53,005 INFO:app.routes.answers:autosave_precheck_counts rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile existing_screen_count=0
2025-10-15 00:46:53,007 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_raw={}
2025-10-15 00:46:53,008 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={}
2025-10-15 00:46:53,008 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={}
2025-10-15 00:46:53,008 INFO:app.routes.answers:vis_pre_state rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,015 INFO:app.routes.answers:vis_pre_sets rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,017 INFO:app.routes.answers:autosave_write_begin rs_id=df76f714-f734-40f4-9831-af2b05f1427f q_id=44444444-4444-4444-4444-444444444444 value=alpha-42 option_id=None
2025-10-15 00:46:53,019 ERROR:app.logic.repository_answers:upsert_answer DB write failed rs_id=df76f714-f734-40f4-9831-af2b05f1427f q_id=44444444-4444-4444-4444-444444444444; falling back to in-memory
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(df76f714-f734-40f4-9831-af2b05f1427f) is not present in table "response_set".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 362, in upsert_answer
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(df76f714-f734-40f4-9831-af2b05f1427f) is not present in table "response_set".

[SQL: 
                        INSERT INTO response (response_id, response_set_id, question_id, option_id, value_text, value_number, value_bool, value_json, answered_at)
                        VALUES (%(rid)s, %(rs)s, %(qid)s, %(opt)s, %(vtext)s, %(vnum)s, %(vbool)s, CAST(%(vjson)s AS JSONB), now())
                        ON CONFLICT (response_set_id, question_id)
                        DO UPDATE SET option_id = EXCLUDED.option_id,
                                      value_text = EXCLUDED.value_text,
                                      value_number = EXCLUDED.value_number,
                                      value_bool = EXCLUDED.value_bool,
                                      value_json = EXCLUDED.value_json,
                                      answered_at = now()
                        ]
[parameters: {'rid': '7e54d419-34a3-56bb-987f-5c46094de693', 'rs': 'df76f714-f734-40f4-9831-af2b05f1427f', 'qid': '44444444-4444-4444-4444-444444444444', 'opt': None, 'vtext': 'alpha-42', 'vnum': None, 'vbool': None, 'vjson': '"alpha-42"'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-15 00:46:53,020 INFO:app.logic.repository_answers:answers_cache_hit rs_id=df76f714-f734-40f4-9831-af2b05f1427f q_id=44444444-4444-4444-4444-444444444444 tuple=(None, 'alpha-42', None, None)
2025-10-15 00:46:53,026 INFO:app.logic.screen_builder:screen_rules rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile rules={'44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}, '11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:53,026 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_raw={}
2025-10-15 00:46:53,026 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={}
2025-10-15 00:46:53,026 INFO:app.logic.screen_builder:screen_visible_calc rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,026 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:53,029 INFO:app.logic.repository_answers:answers_cache_hit rs_id=df76f714-f734-40f4-9831-af2b05f1427f q_id=44444444-4444-4444-4444-444444444444 tuple=(None, 'alpha-42', None, None)
2025-10-15 00:46:53,030 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,034 INFO:app.logic.repository_answers:answers_cache_hit rs_id=df76f714-f734-40f4-9831-af2b05f1427f q_id=44444444-4444-4444-4444-444444444444 tuple=(None, 'alpha-42', None, None)
2025-10-15 00:46:53,036 INFO:app.logic.screen_builder:screen_questions_included rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,036 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile parent_canon={}
2025-10-15 00:46:53,036 INFO:app.routes.answers:vis_post_sets rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile post_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} post_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,037 INFO:app.routes.answers:visibility_delta_inputs rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] visible_post=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] parent_value_pre={} parent_value_post={}
2025-10-15 00:46:53,037 INFO:app.routes.answers:vis_suppress_summary rs_id=df76f714-f734-40f4-9831-af2b05f1427f screen_key=profile now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:53,037 INFO:app.routes.answers:autosave_ok rs_id=df76f714-f734-40f4-9831-af2b05f1427f q_id=44444444-4444-4444-4444-444444444444 screen_key=profile new_etag=W/"6cbde4ab4dc555e410557136cc0682e790c16b43" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:40394 - "PATCH /api/v1/response-sets/df76f714-f734-40f4-9831-af2b05f1427f/answers/44444444-4444-4444-4444-444444444444 HTTP/1.1" 200 OK
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (f33551e8-fcd4-49be-8a68-b7c17997ac70, null, 2025-10-14 23:46:53+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (f33551e8-fcd4-49be-8a68-b7c17997ac70, null, 2025-10-14 23:46:53+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': 'f33551e8-fcd4-49be-8a68-b7c17997ac70', 'company_id': None, 'created_at': '2025-10-14T23:46:53Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40402 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:53,246 INFO:app.logic.screen_builder:screen_rules rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:53,246 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_raw={}
2025-10-15 00:46:53,246 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={}
2025-10-15 00:46:53,246 INFO:app.logic.screen_builder:screen_visible_calc rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,246 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:53,251 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,258 INFO:app.logic.screen_builder:screen_questions_included rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,259 INFO:app.routes.answers:autosave_start rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 if_match_raw=* if_match_norm=* current_etag=W/"e869ecc88b28f10ce956ea15849ec87a73313f71"
2025-10-15 00:46:53,261 INFO:app.routes.answers:autosave_precheck_counts rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile existing_screen_count=0
2025-10-15 00:46:53,263 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_raw={}
2025-10-15 00:46:53,263 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={}
2025-10-15 00:46:53,263 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={}
2025-10-15 00:46:53,264 INFO:app.routes.answers:vis_pre_state rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,270 INFO:app.routes.answers:vis_pre_sets rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,272 INFO:app.routes.answers:autosave_write_begin rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 value=True option_id=None
2025-10-15 00:46:53,275 ERROR:app.logic.repository_answers:upsert_answer DB write failed rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222; falling back to in-memory
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(f33551e8-fcd4-49be-8a68-b7c17997ac70) is not present in table "response_set".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 362, in upsert_answer
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(f33551e8-fcd4-49be-8a68-b7c17997ac70) is not present in table "response_set".

[SQL: 
                        INSERT INTO response (response_id, response_set_id, question_id, option_id, value_text, value_number, value_bool, value_json, answered_at)
                        VALUES (%(rid)s, %(rs)s, %(qid)s, %(opt)s, %(vtext)s, %(vnum)s, %(vbool)s, CAST(%(vjson)s AS JSONB), now())
                        ON CONFLICT (response_set_id, question_id)
                        DO UPDATE SET option_id = EXCLUDED.option_id,
                                      value_text = EXCLUDED.value_text,
                                      value_number = EXCLUDED.value_number,
                                      value_bool = EXCLUDED.value_bool,
                                      value_json = EXCLUDED.value_json,
                                      answered_at = now()
                        ]
[parameters: {'rid': 'd098d89f-4068-5e4f-83c2-1ce0abfb8f97', 'rs': 'f33551e8-fcd4-49be-8a68-b7c17997ac70', 'qid': '22222222-2222-2222-2222-222222222222', 'opt': None, 'vtext': None, 'vnum': None, 'vbool': True, 'vjson': 'true'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-15 00:46:53,277 INFO:app.logic.repository_answers:answers_cache_hit rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, True)
2025-10-15 00:46:53,282 INFO:app.logic.screen_builder:screen_rules rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:53,282 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_raw={}
2025-10-15 00:46:53,282 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={}
2025-10-15 00:46:53,282 INFO:app.logic.screen_builder:screen_visible_calc rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,282 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:53,283 INFO:app.logic.repository_answers:answers_cache_hit rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, True)
2025-10-15 00:46:53,286 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,287 INFO:app.logic.repository_answers:answers_cache_hit rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, True)
2025-10-15 00:46:53,292 INFO:app.logic.screen_builder:screen_questions_included rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,292 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={}
2025-10-15 00:46:53,292 INFO:app.routes.answers:vis_post_sets rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile post_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} post_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,293 INFO:app.routes.answers:visibility_delta_inputs rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] visible_post=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] parent_value_pre={} parent_value_post={}
2025-10-15 00:46:53,293 INFO:app.routes.answers:vis_suppress_summary rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:53,293 INFO:app.routes.answers:autosave_ok rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 screen_key=profile new_etag=W/"5f9b3c62e8a3ed1ff8f56ee7f85bcf9b06a99090" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:40414 - "PATCH /api/v1/response-sets/f33551e8-fcd4-49be-8a68-b7c17997ac70/answers/22222222-2222-2222-2222-222222222222 HTTP/1.1" 200 OK
2025-10-15 00:46:53,372 INFO:app.routes.screens:screen_get_request rs_id_raw=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key_raw=profile
2025-10-15 00:46:53,386 INFO:app.logic.screen_builder:screen_rules rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:53,386 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_raw={}
2025-10-15 00:46:53,386 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={}
2025-10-15 00:46:53,386 INFO:app.logic.screen_builder:screen_visible_calc rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,386 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:53,388 INFO:app.logic.repository_answers:answers_cache_hit rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, True)
2025-10-15 00:46:53,390 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,392 INFO:app.logic.repository_answers:answers_cache_hit rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, True)
2025-10-15 00:46:53,398 INFO:app.logic.screen_builder:screen_questions_included rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,405 INFO:app.logic.screen_builder:screen_rules rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:53,405 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_raw={}
2025-10-15 00:46:53,405 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={}
2025-10-15 00:46:53,405 INFO:app.logic.screen_builder:screen_visible_calc rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,405 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:53,407 INFO:app.logic.repository_answers:answers_cache_hit rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, True)
2025-10-15 00:46:53,411 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,412 INFO:app.logic.repository_answers:answers_cache_hit rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, True)
2025-10-15 00:46:53,419 INFO:app.logic.screen_builder:screen_questions_included rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,431 INFO:app.routes.screens:screen_get_etag_parity rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile computed=W/"5f9b3c62e8a3ed1ff8f56ee7f85bcf9b06a99090" screen_view=W/"5f9b3c62e8a3ed1ff8f56ee7f85bcf9b06a99090" headers_set=W/"5f9b3c62e8a3ed1ff8f56ee7f85bcf9b06a99090"
2025-10-15 00:46:53,433 INFO:app.routes.screens:screen_get response_set_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile etag=W/"5f9b3c62e8a3ed1ff8f56ee7f85bcf9b06a99090" before_count=0 after_count=0
INFO:     127.0.0.1:40418 - "GET /api/v1/response-sets/f33551e8-fcd4-49be-8a68-b7c17997ac70/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:53,530 INFO:app.logic.screen_builder:screen_rules rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:53,531 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_raw={}
2025-10-15 00:46:53,531 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={}
2025-10-15 00:46:53,531 INFO:app.logic.screen_builder:screen_visible_calc rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,531 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:53,532 INFO:app.logic.repository_answers:answers_cache_hit rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, True)
2025-10-15 00:46:53,535 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,536 INFO:app.logic.repository_answers:answers_cache_hit rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, True)
2025-10-15 00:46:53,542 INFO:app.logic.screen_builder:screen_questions_included rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,542 INFO:app.routes.answers:autosave_start rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 if_match_raw=W/"5f9b3c62e8a3ed1ff8f56ee7f85bcf9b06a99090" if_match_norm=5f9b3c62e8a3ed1ff8f56ee7f85bcf9b06a99090 current_etag=W/"5f9b3c62e8a3ed1ff8f56ee7f85bcf9b06a99090"
2025-10-15 00:46:53,544 INFO:app.routes.answers:autosave_precheck_counts rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile existing_screen_count=0
2025-10-15 00:46:53,546 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_raw={}
2025-10-15 00:46:53,546 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={}
2025-10-15 00:46:53,546 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={}
2025-10-15 00:46:53,547 INFO:app.routes.answers:vis_pre_state rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,549 INFO:app.logic.repository_answers:answers_cache_hit rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, True)
2025-10-15 00:46:53,552 INFO:app.routes.answers:vis_pre_sets rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,555 INFO:app.logic.repository_answers:answers_delete rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 q_id=22222222-2222-2222-2222-222222222222 path=db_ok
2025-10-15 00:46:53,561 INFO:app.logic.screen_builder:screen_rules rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:53,561 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_raw={}
2025-10-15 00:46:53,561 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={}
2025-10-15 00:46:53,561 INFO:app.logic.screen_builder:screen_visible_calc rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,561 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:53,566 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,574 INFO:app.logic.screen_builder:screen_questions_included rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,575 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile parent_canon={}
2025-10-15 00:46:53,575 INFO:app.routes.answers:vis_post_sets rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile post_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} post_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,575 INFO:app.routes.answers:vis_suppress_summary rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:53,575 INFO:app.routes.answers:autosave_visibility_delta rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile x_request_id=None parent_value_pre={} parent_value_post={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] visible_post=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] now_hidden=[] suppressed=[]
2025-10-15 00:46:53,575 INFO:app.routes.answers:autosave_visibility_inputs rs_id=f33551e8-fcd4-49be-8a68-b7c17997ac70 screen_key=profile x_request_id=None visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] visible_post=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] parent_pre={} parent_post={} suppressed=[]
INFO:     127.0.0.1:40424 - "PATCH /api/v1/response-sets/f33551e8-fcd4-49be-8a68-b7c17997ac70/answers/22222222-2222-2222-2222-222222222222 HTTP/1.1" 200 OK
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (d335b68d-eec7-425e-9f8d-6e660fb5e3d8, null, 2025-10-14 23:46:53+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (d335b68d-eec7-425e-9f8d-6e660fb5e3d8, null, 2025-10-14 23:46:53+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': 'd335b68d-eec7-425e-9f8d-6e660fb5e3d8', 'company_id': None, 'created_at': '2025-10-14T23:46:53Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40428 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:53,768 INFO:app.logic.screen_builder:screen_rules rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:53,769 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_raw={}
2025-10-15 00:46:53,769 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={}
2025-10-15 00:46:53,769 INFO:app.logic.screen_builder:screen_visible_calc rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,769 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:53,776 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,784 INFO:app.logic.screen_builder:screen_questions_included rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,784 INFO:app.routes.answers:autosave_start rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 q_id=11111111-1111-1111-1111-111111111111 if_match_raw=* if_match_norm=* current_etag=W/"3d223ffc682c3da9e9605cb7cc1e45af528b566c"
2025-10-15 00:46:53,786 INFO:app.routes.answers:autosave_precheck_counts rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile existing_screen_count=0
2025-10-15 00:46:53,789 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_raw={}
2025-10-15 00:46:53,789 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={}
2025-10-15 00:46:53,789 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={}
2025-10-15 00:46:53,789 INFO:app.routes.answers:vis_pre_state rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,797 INFO:app.routes.answers:vis_pre_sets rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,799 INFO:app.routes.answers:autosave_write_begin rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 q_id=11111111-1111-1111-1111-111111111111 value=1 option_id=None
2025-10-15 00:46:53,802 ERROR:app.logic.repository_answers:upsert_answer DB write failed rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 q_id=11111111-1111-1111-1111-111111111111; falling back to in-memory
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(d335b68d-eec7-425e-9f8d-6e660fb5e3d8) is not present in table "response_set".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 362, in upsert_answer
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(d335b68d-eec7-425e-9f8d-6e660fb5e3d8) is not present in table "response_set".

[SQL: 
                        INSERT INTO response (response_id, response_set_id, question_id, option_id, value_text, value_number, value_bool, value_json, answered_at)
                        VALUES (%(rid)s, %(rs)s, %(qid)s, %(opt)s, %(vtext)s, %(vnum)s, %(vbool)s, CAST(%(vjson)s AS JSONB), now())
                        ON CONFLICT (response_set_id, question_id)
                        DO UPDATE SET option_id = EXCLUDED.option_id,
                                      value_text = EXCLUDED.value_text,
                                      value_number = EXCLUDED.value_number,
                                      value_bool = EXCLUDED.value_bool,
                                      value_json = EXCLUDED.value_json,
                                      answered_at = now()
                        ]
[parameters: {'rid': '0117cd51-f6c8-52f3-8181-54bdbf89858d', 'rs': 'd335b68d-eec7-425e-9f8d-6e660fb5e3d8', 'qid': '11111111-1111-1111-1111-111111111111', 'opt': None, 'vtext': None, 'vnum': 1.0, 'vbool': None, 'vjson': '1'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-15 00:46:53,804 INFO:app.logic.repository_answers:answers_cache_hit rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 1.0, None)
2025-10-15 00:46:53,811 INFO:app.logic.screen_builder:screen_rules rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:53,811 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_raw={}
2025-10-15 00:46:53,812 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={}
2025-10-15 00:46:53,812 INFO:app.logic.screen_builder:screen_visible_calc rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,812 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:53,812 INFO:app.logic.repository_answers:answers_cache_hit rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 1.0, None)
2025-10-15 00:46:53,817 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,817 INFO:app.logic.repository_answers:answers_cache_hit rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 1.0, None)
2025-10-15 00:46:53,825 INFO:app.logic.screen_builder:screen_questions_included rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,826 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={}
2025-10-15 00:46:53,826 INFO:app.routes.answers:vis_post_sets rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile post_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} post_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,826 INFO:app.routes.answers:visibility_delta_inputs rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] visible_post=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] parent_value_pre={} parent_value_post={}
2025-10-15 00:46:53,826 INFO:app.routes.answers:vis_suppress_summary rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:53,826 INFO:app.routes.answers:autosave_ok rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 q_id=11111111-1111-1111-1111-111111111111 screen_key=profile new_etag=W/"3ee92e75f83285f85d798ce307cb0d79c61e807f" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:40442 - "PATCH /api/v1/response-sets/d335b68d-eec7-425e-9f8d-6e660fb5e3d8/answers/11111111-1111-1111-1111-111111111111 HTTP/1.1" 200 OK
2025-10-15 00:46:53,908 INFO:app.routes.screens:screen_get_request rs_id_raw=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key_raw=profile
2025-10-15 00:46:53,922 INFO:app.logic.screen_builder:screen_rules rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:53,922 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_raw={}
2025-10-15 00:46:53,922 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={}
2025-10-15 00:46:53,922 INFO:app.logic.screen_builder:screen_visible_calc rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,922 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:53,923 INFO:app.logic.repository_answers:answers_cache_hit rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 1.0, None)
2025-10-15 00:46:53,926 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,927 INFO:app.logic.repository_answers:answers_cache_hit rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 1.0, None)
2025-10-15 00:46:53,934 INFO:app.logic.screen_builder:screen_questions_included rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,941 INFO:app.logic.screen_builder:screen_rules rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:53,942 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_raw={}
2025-10-15 00:46:53,942 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={}
2025-10-15 00:46:53,942 INFO:app.logic.screen_builder:screen_visible_calc rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,942 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:53,942 INFO:app.logic.repository_answers:answers_cache_hit rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 1.0, None)
2025-10-15 00:46:53,947 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:53,947 INFO:app.logic.repository_answers:answers_cache_hit rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 1.0, None)
2025-10-15 00:46:53,954 INFO:app.logic.screen_builder:screen_questions_included rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:53,965 INFO:app.routes.screens:screen_get_etag_parity rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile computed=W/"3ee92e75f83285f85d798ce307cb0d79c61e807f" screen_view=W/"3ee92e75f83285f85d798ce307cb0d79c61e807f" headers_set=W/"3ee92e75f83285f85d798ce307cb0d79c61e807f"
2025-10-15 00:46:53,967 INFO:app.routes.screens:screen_get response_set_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile etag=W/"3ee92e75f83285f85d798ce307cb0d79c61e807f" before_count=0 after_count=0
INFO:     127.0.0.1:40448 - "GET /api/v1/response-sets/d335b68d-eec7-425e-9f8d-6e660fb5e3d8/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:54,059 INFO:app.logic.repository_answers:answers_delete rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 q_id=11111111-1111-1111-1111-111111111111 path=db_ok
2025-10-15 00:46:54,063 INFO:app.logic.screen_builder:screen_rules rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:54,063 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_raw={}
2025-10-15 00:46:54,063 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={}
2025-10-15 00:46:54,063 INFO:app.logic.screen_builder:screen_visible_calc rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,064 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:54,069 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,078 INFO:app.logic.screen_builder:screen_questions_included rs_id=d335b68d-eec7-425e-9f8d-6e660fb5e3d8 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
INFO:     127.0.0.1:40462 - "DELETE /api/v1/response-sets/d335b68d-eec7-425e-9f8d-6e660fb5e3d8/answers/11111111-1111-1111-1111-111111111111 HTTP/1.1" 204 No Content
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (59a5e070-f11b-474d-aa68-0b56dde4a28e, null, 2025-10-14 23:46:54+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (59a5e070-f11b-474d-aa68-0b56dde4a28e, null, 2025-10-14 23:46:54+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': '59a5e070-f11b-474d-aa68-0b56dde4a28e', 'company_id': None, 'created_at': '2025-10-14T23:46:54Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40468 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:54,255 INFO:app.routes.screens:screen_get_request rs_id_raw=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key_raw=profile
2025-10-15 00:46:54,276 INFO:app.logic.screen_builder:screen_rules rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:54,276 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_raw={}
2025-10-15 00:46:54,276 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={}
2025-10-15 00:46:54,276 INFO:app.logic.screen_builder:screen_visible_calc rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,277 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:54,283 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,293 INFO:app.logic.screen_builder:screen_questions_included rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:54,301 INFO:app.logic.screen_builder:screen_rules rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:54,301 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_raw={}
2025-10-15 00:46:54,301 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={}
2025-10-15 00:46:54,301 INFO:app.logic.screen_builder:screen_visible_calc rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,301 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:54,308 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,318 INFO:app.logic.screen_builder:screen_questions_included rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:54,330 INFO:app.routes.screens:screen_get_etag_parity rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile computed=W/"faffa8d859a9f863ef276ddd54174046728580e3" screen_view=W/"faffa8d859a9f863ef276ddd54174046728580e3" headers_set=W/"faffa8d859a9f863ef276ddd54174046728580e3"
2025-10-15 00:46:54,332 INFO:app.routes.screens:screen_get response_set_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile etag=W/"faffa8d859a9f863ef276ddd54174046728580e3" before_count=0 after_count=0
INFO:     127.0.0.1:40484 - "GET /api/v1/response-sets/59a5e070-f11b-474d-aa68-0b56dde4a28e/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:54,430 INFO:app.logic.screen_builder:screen_rules rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:54,430 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_raw={}
2025-10-15 00:46:54,430 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={}
2025-10-15 00:46:54,431 INFO:app.logic.screen_builder:screen_visible_calc rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,431 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:54,436 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,444 INFO:app.logic.screen_builder:screen_questions_included rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:54,444 INFO:app.routes.answers:autosave_start rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e q_id=44444444-4444-4444-4444-444444444444 if_match_raw=W/"faffa8d859a9f863ef276ddd54174046728580e3" if_match_norm=faffa8d859a9f863ef276ddd54174046728580e3 current_etag=W/"faffa8d859a9f863ef276ddd54174046728580e3"
2025-10-15 00:46:54,446 INFO:app.routes.answers:autosave_precheck_counts rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile existing_screen_count=0
2025-10-15 00:46:54,449 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_raw={}
2025-10-15 00:46:54,449 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={}
2025-10-15 00:46:54,449 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={}
2025-10-15 00:46:54,449 INFO:app.routes.answers:vis_pre_state rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:54,457 INFO:app.routes.answers:vis_pre_sets rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:54,459 INFO:app.routes.answers:autosave_write_begin rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e q_id=44444444-4444-4444-4444-444444444444 value=gamma option_id=None
2025-10-15 00:46:54,461 ERROR:app.logic.repository_answers:upsert_answer DB write failed rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e q_id=44444444-4444-4444-4444-444444444444; falling back to in-memory
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(59a5e070-f11b-474d-aa68-0b56dde4a28e) is not present in table "response_set".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 362, in upsert_answer
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(59a5e070-f11b-474d-aa68-0b56dde4a28e) is not present in table "response_set".

[SQL: 
                        INSERT INTO response (response_id, response_set_id, question_id, option_id, value_text, value_number, value_bool, value_json, answered_at)
                        VALUES (%(rid)s, %(rs)s, %(qid)s, %(opt)s, %(vtext)s, %(vnum)s, %(vbool)s, CAST(%(vjson)s AS JSONB), now())
                        ON CONFLICT (response_set_id, question_id)
                        DO UPDATE SET option_id = EXCLUDED.option_id,
                                      value_text = EXCLUDED.value_text,
                                      value_number = EXCLUDED.value_number,
                                      value_bool = EXCLUDED.value_bool,
                                      value_json = EXCLUDED.value_json,
                                      answered_at = now()
                        ]
[parameters: {'rid': 'a123c5e6-625d-5c57-a7a2-806dae773a5a', 'rs': '59a5e070-f11b-474d-aa68-0b56dde4a28e', 'qid': '44444444-4444-4444-4444-444444444444', 'opt': None, 'vtext': 'gamma', 'vnum': None, 'vbool': None, 'vjson': '"gamma"'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-15 00:46:54,464 INFO:app.logic.repository_answers:answers_cache_hit rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e q_id=44444444-4444-4444-4444-444444444444 tuple=(None, 'gamma', None, None)
2025-10-15 00:46:54,470 INFO:app.logic.screen_builder:screen_rules rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:54,471 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_raw={}
2025-10-15 00:46:54,471 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={}
2025-10-15 00:46:54,471 INFO:app.logic.screen_builder:screen_visible_calc rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,471 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:54,475 INFO:app.logic.repository_answers:answers_cache_hit rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e q_id=44444444-4444-4444-4444-444444444444 tuple=(None, 'gamma', None, None)
2025-10-15 00:46:54,475 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,479 INFO:app.logic.repository_answers:answers_cache_hit rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e q_id=44444444-4444-4444-4444-444444444444 tuple=(None, 'gamma', None, None)
2025-10-15 00:46:54,482 INFO:app.logic.screen_builder:screen_questions_included rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:54,482 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile parent_canon={}
2025-10-15 00:46:54,483 INFO:app.routes.answers:vis_post_sets rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile post_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} post_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:54,483 INFO:app.routes.answers:visibility_delta_inputs rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] visible_post=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444'] parent_value_pre={} parent_value_post={}
2025-10-15 00:46:54,483 INFO:app.routes.answers:vis_suppress_summary rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e screen_key=profile now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:46:54,483 INFO:app.routes.answers:autosave_ok rs_id=59a5e070-f11b-474d-aa68-0b56dde4a28e q_id=44444444-4444-4444-4444-444444444444 screen_key=profile new_etag=W/"14d3c137882fb5cdc545f2ccd6743e1db9afd68a" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:40490 - "PATCH /api/v1/response-sets/59a5e070-f11b-474d-aa68-0b56dde4a28e/answers/44444444-4444-4444-4444-444444444444 HTTP/1.1" 200 OK
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (929e4e8b-d932-4210-8ffc-7468499b3f81, null, 2025-10-14 23:46:54+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (929e4e8b-d932-4210-8ffc-7468499b3f81, null, 2025-10-14 23:46:54+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': '929e4e8b-d932-4210-8ffc-7468499b3f81', 'company_id': None, 'created_at': '2025-10-14T23:46:54Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40502 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:54,667 INFO:app.routes.screens:screen_get_request rs_id_raw=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key_raw=profile
2025-10-15 00:46:54,683 INFO:app.logic.screen_builder:screen_rules rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:54,683 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_raw={}
2025-10-15 00:46:54,683 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={}
2025-10-15 00:46:54,683 INFO:app.logic.screen_builder:screen_visible_calc rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,683 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:54,690 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,697 INFO:app.logic.screen_builder:screen_questions_included rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:54,704 INFO:app.logic.screen_builder:screen_rules rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:54,704 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_raw={}
2025-10-15 00:46:54,704 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={}
2025-10-15 00:46:54,704 INFO:app.logic.screen_builder:screen_visible_calc rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,704 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:54,710 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,718 INFO:app.logic.screen_builder:screen_questions_included rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:54,728 INFO:app.routes.screens:screen_get_etag_parity rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile computed=W/"ee8a09a359c28df0b66be6218ecbdfbdf776dc44" screen_view=W/"ee8a09a359c28df0b66be6218ecbdfbdf776dc44" headers_set=W/"ee8a09a359c28df0b66be6218ecbdfbdf776dc44"
2025-10-15 00:46:54,730 INFO:app.routes.screens:screen_get response_set_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile etag=W/"ee8a09a359c28df0b66be6218ecbdfbdf776dc44" before_count=0 after_count=0
INFO:     127.0.0.1:40516 - "GET /api/v1/response-sets/929e4e8b-d932-4210-8ffc-7468499b3f81/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:54,828 INFO:app.logic.screen_builder:screen_rules rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:54,828 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_raw={}
2025-10-15 00:46:54,828 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={}
2025-10-15 00:46:54,829 INFO:app.logic.screen_builder:screen_visible_calc rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,829 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:54,834 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,842 INFO:app.logic.screen_builder:screen_questions_included rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:54,848 ERROR:app.logic.repository_answers:upsert_answer DB write failed rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 q_id=11111111-1111-1111-1111-111111111111; falling back to in-memory
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(929e4e8b-d932-4210-8ffc-7468499b3f81) is not present in table "response_set".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 362, in upsert_answer
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(929e4e8b-d932-4210-8ffc-7468499b3f81) is not present in table "response_set".

[SQL: 
                        INSERT INTO response (response_id, response_set_id, question_id, option_id, value_text, value_number, value_bool, value_json, answered_at)
                        VALUES (%(rid)s, %(rs)s, %(qid)s, %(opt)s, %(vtext)s, %(vnum)s, %(vbool)s, CAST(%(vjson)s AS JSONB), now())
                        ON CONFLICT (response_set_id, question_id)
                        DO UPDATE SET option_id = EXCLUDED.option_id,
                                      value_text = EXCLUDED.value_text,
                                      value_number = EXCLUDED.value_number,
                                      value_bool = EXCLUDED.value_bool,
                                      value_json = EXCLUDED.value_json,
                                      answered_at = now()
                        ]
[parameters: {'rid': 'de31458e-2860-57e7-8c10-662d1c843226', 'rs': '929e4e8b-d932-4210-8ffc-7468499b3f81', 'qid': '11111111-1111-1111-1111-111111111111', 'opt': None, 'vtext': None, 'vnum': 7.0, 'vbool': None, 'vjson': '7'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-15 00:46:54,854 INFO:app.logic.screen_builder:screen_rules rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:54,854 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_raw={}
2025-10-15 00:46:54,854 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={}
2025-10-15 00:46:54,854 INFO:app.logic.screen_builder:screen_visible_calc rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,854 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:54,854 INFO:app.logic.repository_answers:answers_cache_hit rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 7.0, None)
2025-10-15 00:46:54,858 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,858 INFO:app.logic.repository_answers:answers_cache_hit rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 7.0, None)
2025-10-15 00:46:54,865 INFO:app.logic.screen_builder:screen_questions_included rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:54,869 ERROR:app.logic.repository_answers:upsert_answer DB write failed rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 q_id=22222222-2222-2222-2222-222222222222; falling back to in-memory
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.ForeignKeyViolation: insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(929e4e8b-d932-4210-8ffc-7468499b3f81) is not present in table "response_set".


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 362, in upsert_answer
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table "response" violates foreign key constraint "fk_response_set"
DETAIL:  Key (response_set_id)=(929e4e8b-d932-4210-8ffc-7468499b3f81) is not present in table "response_set".

[SQL: 
                        INSERT INTO response (response_id, response_set_id, question_id, option_id, value_text, value_number, value_bool, value_json, answered_at)
                        VALUES (%(rid)s, %(rs)s, %(qid)s, %(opt)s, %(vtext)s, %(vnum)s, %(vbool)s, CAST(%(vjson)s AS JSONB), now())
                        ON CONFLICT (response_set_id, question_id)
                        DO UPDATE SET option_id = EXCLUDED.option_id,
                                      value_text = EXCLUDED.value_text,
                                      value_number = EXCLUDED.value_number,
                                      value_bool = EXCLUDED.value_bool,
                                      value_json = EXCLUDED.value_json,
                                      answered_at = now()
                        ]
[parameters: {'rid': 'f7ef5e53-1b71-5b1a-901f-ef2a65b98352', 'rs': '929e4e8b-d932-4210-8ffc-7468499b3f81', 'qid': '22222222-2222-2222-2222-222222222222', 'opt': None, 'vtext': None, 'vnum': None, 'vbool': False, 'vjson': 'false'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-10-15 00:46:54,875 INFO:app.logic.screen_builder:screen_rules rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:54,875 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_raw={}
2025-10-15 00:46:54,875 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={}
2025-10-15 00:46:54,875 INFO:app.logic.screen_builder:screen_visible_calc rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,875 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:54,875 INFO:app.logic.repository_answers:answers_cache_hit rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 7.0, None)
2025-10-15 00:46:54,875 INFO:app.logic.repository_answers:answers_cache_hit rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, False)
2025-10-15 00:46:54,878 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:54,878 INFO:app.logic.repository_answers:answers_cache_hit rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 q_id=11111111-1111-1111-1111-111111111111 tuple=(None, None, 7.0, None)
2025-10-15 00:46:54,878 INFO:app.logic.repository_answers:answers_cache_hit rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 q_id=22222222-2222-2222-2222-222222222222 tuple=(None, None, None, False)
2025-10-15 00:46:54,883 INFO:app.logic.screen_builder:screen_questions_included rs_id=929e4e8b-d932-4210-8ffc-7468499b3f81 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
INFO:     127.0.0.1:40520 - "POST /api/v1/response-sets/929e4e8b-d932-4210-8ffc-7468499b3f81/answers%3Abatch HTTP/1.1" 200 OK
INFO:     127.0.0.1:40530 - "DELETE /api/v1/response-sets/%7Bresponse_set_id%7D HTTP/1.1" 204 No Content
INFO:     127.0.0.1:40536 - "GET /__test__/events HTTP/1.1" 200 OK
2025-10-15 00:46:55,164 INFO:app.logic.screen_builder:screen_rules rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:55,164 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile parent_raw={}
2025-10-15 00:46:55,164 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile parent_canon={}
2025-10-15 00:46:55,164 INFO:app.logic.screen_builder:screen_visible_calc rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,165 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:55,171 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,180 INFO:app.logic.screen_builder:screen_questions_included rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
INFO:     127.0.0.1:40542 - "PATCH /api/v1/response-sets/f91ed199-146d-545f-9760-0c24359b6683/answers/11111111-1111-1111-1111-111111111111 HTTP/1.1" 428 Precondition Required
2025-10-15 00:46:55,294 INFO:app.logic.screen_builder:screen_rules rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:55,294 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile parent_raw={}
2025-10-15 00:46:55,294 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile parent_canon={}
2025-10-15 00:46:55,294 INFO:app.logic.screen_builder:screen_visible_calc rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,294 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:55,300 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,307 INFO:app.logic.screen_builder:screen_questions_included rs_id=f91ed199-146d-545f-9760-0c24359b6683 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:55,308 INFO:app.routes.answers:autosave_start rs_id=f91ed199-146d-545f-9760-0c24359b6683 q_id=11111111-1111-1111-1111-111111111111 if_match_raw=W/"stale" if_match_norm=stale current_etag=W/"854d3d685b08ac69b56d5e91dddfcf58c68c4187"
2025-10-15 00:46:55,308 INFO:app.routes.answers:autosave_conflict rs_id=f91ed199-146d-545f-9760-0c24359b6683 q_id=11111111-1111-1111-1111-111111111111 screen_key=profile if_match_raw=W/"stale" write_performed=false
INFO:     127.0.0.1:40548 - "PATCH /api/v1/response-sets/f91ed199-146d-545f-9760-0c24359b6683/answers/11111111-1111-1111-1111-111111111111 HTTP/1.1" 409 Conflict
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (926f74c4-cee7-40e7-a1cd-33518d16f427, null, 2025-10-14 23:46:55+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (926f74c4-cee7-40e7-a1cd-33518d16f427, null, 2025-10-14 23:46:55+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': '926f74c4-cee7-40e7-a1cd-33518d16f427', 'company_id': None, 'created_at': '2025-10-14T23:46:55Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40560 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:55,509 INFO:app.routes.screens:screen_get_request rs_id_raw=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key_raw=profile
2025-10-15 00:46:55,525 INFO:app.logic.screen_builder:screen_rules rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:55,526 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_raw={}
2025-10-15 00:46:55,526 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_canon={}
2025-10-15 00:46:55,526 INFO:app.logic.screen_builder:screen_visible_calc rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,526 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:55,533 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,542 INFO:app.logic.screen_builder:screen_questions_included rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:55,549 INFO:app.logic.screen_builder:screen_rules rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:55,550 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_raw={}
2025-10-15 00:46:55,550 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_canon={}
2025-10-15 00:46:55,550 INFO:app.logic.screen_builder:screen_visible_calc rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,550 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:55,556 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,565 INFO:app.logic.screen_builder:screen_questions_included rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:55,577 INFO:app.routes.screens:screen_get_etag_parity rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile computed=W/"0f12204e4bcf9adafc8448ec1b41e0aeede247f2" screen_view=W/"0f12204e4bcf9adafc8448ec1b41e0aeede247f2" headers_set=W/"0f12204e4bcf9adafc8448ec1b41e0aeede247f2"
2025-10-15 00:46:55,579 INFO:app.routes.screens:screen_get response_set_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile etag=W/"0f12204e4bcf9adafc8448ec1b41e0aeede247f2" before_count=0 after_count=0
INFO:     127.0.0.1:40562 - "GET /api/v1/response-sets/926f74c4-cee7-40e7-a1cd-33518d16f427/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:55,682 INFO:app.logic.screen_builder:screen_rules rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:55,682 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_raw={}
2025-10-15 00:46:55,683 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_canon={}
2025-10-15 00:46:55,683 INFO:app.logic.screen_builder:screen_visible_calc rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,683 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:55,690 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,699 INFO:app.logic.screen_builder:screen_questions_included rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:55,699 INFO:app.routes.answers:autosave_start rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 q_id=11111111-1111-1111-1111-111111111111 if_match_raw=W/"0f12204e4bcf9adafc8448ec1b41e0aeede247f2" if_match_norm=0f12204e4bcf9adafc8448ec1b41e0aeede247f2 current_etag=W/"0f12204e4bcf9adafc8448ec1b41e0aeede247f2"
2025-10-15 00:46:55,701 INFO:app.routes.answers:autosave_precheck_counts rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile existing_screen_count=0
2025-10-15 00:46:55,704 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_raw={}
2025-10-15 00:46:55,704 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_canon={}
2025-10-15 00:46:55,704 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parent_canon={}
2025-10-15 00:46:55,704 INFO:app.routes.answers:vis_pre_state rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:55,711 INFO:app.routes.answers:vis_pre_sets rs_id=926f74c4-cee7-40e7-a1cd-33518d16f427 screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
INFO:     127.0.0.1:40564 - "PATCH /api/v1/response-sets/926f74c4-cee7-40e7-a1cd-33518d16f427/answers/11111111-1111-1111-1111-111111111111 HTTP/1.1" 422 Unprocessable Entity
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (3771b19b-e4d2-4777-92d5-01293eb1d89a, null, 2025-10-14 23:46:55+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (3771b19b-e4d2-4777-92d5-01293eb1d89a, null, 2025-10-14 23:46:55+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': '3771b19b-e4d2-4777-92d5-01293eb1d89a', 'company_id': None, 'created_at': '2025-10-14T23:46:55Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40580 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:55,904 INFO:app.routes.screens:screen_get_request rs_id_raw=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key_raw=profile
2025-10-15 00:46:55,923 INFO:app.logic.screen_builder:screen_rules rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:55,923 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_raw={}
2025-10-15 00:46:55,923 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_canon={}
2025-10-15 00:46:55,923 INFO:app.logic.screen_builder:screen_visible_calc rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,923 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:55,931 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,941 INFO:app.logic.screen_builder:screen_questions_included rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:55,948 INFO:app.logic.screen_builder:screen_rules rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:55,948 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_raw={}
2025-10-15 00:46:55,948 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_canon={}
2025-10-15 00:46:55,948 INFO:app.logic.screen_builder:screen_visible_calc rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,948 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:55,955 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:55,963 INFO:app.logic.screen_builder:screen_questions_included rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:55,972 INFO:app.routes.screens:screen_get_etag_parity rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile computed=W/"1f160f6630d7e79dc439de499a8cfbfd3330bd2d" screen_view=W/"1f160f6630d7e79dc439de499a8cfbfd3330bd2d" headers_set=W/"1f160f6630d7e79dc439de499a8cfbfd3330bd2d"
2025-10-15 00:46:55,974 INFO:app.routes.screens:screen_get response_set_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile etag=W/"1f160f6630d7e79dc439de499a8cfbfd3330bd2d" before_count=0 after_count=0
INFO:     127.0.0.1:40584 - "GET /api/v1/response-sets/3771b19b-e4d2-4777-92d5-01293eb1d89a/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:56,068 INFO:app.logic.screen_builder:screen_rules rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:56,069 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_raw={}
2025-10-15 00:46:56,069 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_canon={}
2025-10-15 00:46:56,069 INFO:app.logic.screen_builder:screen_visible_calc rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,069 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:56,075 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,083 INFO:app.logic.screen_builder:screen_questions_included rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:56,084 INFO:app.routes.answers:autosave_start rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a q_id=22222222-2222-2222-2222-222222222222 if_match_raw=W/"1f160f6630d7e79dc439de499a8cfbfd3330bd2d" if_match_norm=1f160f6630d7e79dc439de499a8cfbfd3330bd2d current_etag=W/"1f160f6630d7e79dc439de499a8cfbfd3330bd2d"
2025-10-15 00:46:56,085 INFO:app.routes.answers:autosave_precheck_counts rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile existing_screen_count=0
2025-10-15 00:46:56,088 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_raw={}
2025-10-15 00:46:56,088 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_canon={}
2025-10-15 00:46:56,088 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parent_canon={}
2025-10-15 00:46:56,088 INFO:app.routes.answers:vis_pre_state rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:56,096 INFO:app.routes.answers:vis_pre_sets rs_id=3771b19b-e4d2-4777-92d5-01293eb1d89a screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
INFO:     127.0.0.1:40600 - "PATCH /api/v1/response-sets/3771b19b-e4d2-4777-92d5-01293eb1d89a/answers/22222222-2222-2222-2222-222222222222 HTTP/1.1" 422 Unprocessable Entity
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (608862db-fc32-41a2-91e8-ef1985675014, null, 2025-10-14 23:46:56+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (608862db-fc32-41a2-91e8-ef1985675014, null, 2025-10-14 23:46:56+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': '608862db-fc32-41a2-91e8-ef1985675014', 'company_id': None, 'created_at': '2025-10-14T23:46:56Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40606 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:56,292 INFO:app.routes.screens:screen_get_request rs_id_raw=608862db-fc32-41a2-91e8-ef1985675014 screen_key_raw=profile
2025-10-15 00:46:56,306 INFO:app.logic.screen_builder:screen_rules rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:56,306 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_raw={}
2025-10-15 00:46:56,306 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_canon={}
2025-10-15 00:46:56,306 INFO:app.logic.screen_builder:screen_visible_calc rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,306 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:56,311 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,319 INFO:app.logic.screen_builder:screen_questions_included rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:56,326 INFO:app.logic.screen_builder:screen_rules rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:56,326 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_raw={}
2025-10-15 00:46:56,326 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_canon={}
2025-10-15 00:46:56,326 INFO:app.logic.screen_builder:screen_visible_calc rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,326 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:56,331 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,339 INFO:app.logic.screen_builder:screen_questions_included rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:56,349 INFO:app.routes.screens:screen_get_etag_parity rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile computed=W/"ad93daf96726bcfa0bbcbb76fd3a5c3a9ed9dfb3" screen_view=W/"ad93daf96726bcfa0bbcbb76fd3a5c3a9ed9dfb3" headers_set=W/"ad93daf96726bcfa0bbcbb76fd3a5c3a9ed9dfb3"
2025-10-15 00:46:56,350 INFO:app.routes.screens:screen_get response_set_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile etag=W/"ad93daf96726bcfa0bbcbb76fd3a5c3a9ed9dfb3" before_count=0 after_count=0
INFO:     127.0.0.1:40610 - "GET /api/v1/response-sets/608862db-fc32-41a2-91e8-ef1985675014/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:56,456 INFO:app.logic.screen_builder:screen_rules rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:56,456 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_raw={}
2025-10-15 00:46:56,456 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_canon={}
2025-10-15 00:46:56,456 INFO:app.logic.screen_builder:screen_visible_calc rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,456 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:56,463 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,472 INFO:app.logic.screen_builder:screen_questions_included rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:56,472 INFO:app.routes.answers:autosave_start rs_id=608862db-fc32-41a2-91e8-ef1985675014 q_id=33333333-3333-3333-3333-333333333333 if_match_raw=W/"ad93daf96726bcfa0bbcbb76fd3a5c3a9ed9dfb3" if_match_norm=ad93daf96726bcfa0bbcbb76fd3a5c3a9ed9dfb3 current_etag=W/"ad93daf96726bcfa0bbcbb76fd3a5c3a9ed9dfb3"
2025-10-15 00:46:56,474 INFO:app.routes.answers:autosave_precheck_counts rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile existing_screen_count=0
2025-10-15 00:46:56,477 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_raw={}
2025-10-15 00:46:56,477 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_canon={}
2025-10-15 00:46:56,477 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parent_canon={}
2025-10-15 00:46:56,477 INFO:app.routes.answers:vis_pre_state rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:56,484 INFO:app.routes.answers:vis_pre_sets rs_id=608862db-fc32-41a2-91e8-ef1985675014 screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
INFO:     127.0.0.1:40614 - "PATCH /api/v1/response-sets/608862db-fc32-41a2-91e8-ef1985675014/answers/33333333-3333-3333-3333-333333333333 HTTP/1.1" 422 Unprocessable Entity
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (06c8aca8-40ce-4024-bbd4-40263d87df78, null, 2025-10-14 23:46:56+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (06c8aca8-40ce-4024-bbd4-40263d87df78, null, 2025-10-14 23:46:56+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': '06c8aca8-40ce-4024-bbd4-40263d87df78', 'company_id': None, 'created_at': '2025-10-14T23:46:56Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40616 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:56,674 INFO:app.routes.screens:screen_get_request rs_id_raw=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key_raw=profile
2025-10-15 00:46:56,690 INFO:app.logic.screen_builder:screen_rules rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:56,690 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_raw={}
2025-10-15 00:46:56,691 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_canon={}
2025-10-15 00:46:56,691 INFO:app.logic.screen_builder:screen_visible_calc rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,691 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:56,698 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,707 INFO:app.logic.screen_builder:screen_questions_included rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:56,714 INFO:app.logic.screen_builder:screen_rules rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:56,714 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_raw={}
2025-10-15 00:46:56,714 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_canon={}
2025-10-15 00:46:56,714 INFO:app.logic.screen_builder:screen_visible_calc rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,714 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:56,720 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,729 INFO:app.logic.screen_builder:screen_questions_included rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:56,740 INFO:app.routes.screens:screen_get_etag_parity rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile computed=W/"1393c5960ed5dea2d00a0f26baf45a759fdbab01" screen_view=W/"1393c5960ed5dea2d00a0f26baf45a759fdbab01" headers_set=W/"1393c5960ed5dea2d00a0f26baf45a759fdbab01"
2025-10-15 00:46:56,742 INFO:app.routes.screens:screen_get response_set_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile etag=W/"1393c5960ed5dea2d00a0f26baf45a759fdbab01" before_count=0 after_count=0
INFO:     127.0.0.1:40618 - "GET /api/v1/response-sets/06c8aca8-40ce-4024-bbd4-40263d87df78/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:56,841 INFO:app.logic.screen_builder:screen_rules rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:56,841 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_raw={}
2025-10-15 00:46:56,841 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_canon={}
2025-10-15 00:46:56,842 INFO:app.logic.screen_builder:screen_visible_calc rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,842 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:56,848 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:56,856 INFO:app.logic.screen_builder:screen_questions_included rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:56,856 INFO:app.routes.answers:autosave_start rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 q_id=33333333-3333-3333-3333-333333333333 if_match_raw=W/"1393c5960ed5dea2d00a0f26baf45a759fdbab01" if_match_norm=1393c5960ed5dea2d00a0f26baf45a759fdbab01 current_etag=W/"1393c5960ed5dea2d00a0f26baf45a759fdbab01"
2025-10-15 00:46:56,858 INFO:app.routes.answers:autosave_precheck_counts rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile existing_screen_count=0
2025-10-15 00:46:56,861 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_raw={}
2025-10-15 00:46:56,861 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_canon={}
2025-10-15 00:46:56,861 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parent_canon={}
2025-10-15 00:46:56,861 INFO:app.routes.answers:vis_pre_state rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:56,868 INFO:app.routes.answers:vis_pre_sets rs_id=06c8aca8-40ce-4024-bbd4-40263d87df78 screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
INFO:     127.0.0.1:40632 - "PATCH /api/v1/response-sets/06c8aca8-40ce-4024-bbd4-40263d87df78/answers/33333333-3333-3333-3333-333333333333 HTTP/1.1" 422 Unprocessable Entity
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (00a806dd-3c31-4889-b749-07110fc17d31, null, 2025-10-14 23:46:56+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (00a806dd-3c31-4889-b749-07110fc17d31, null, 2025-10-14 23:46:56+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': '00a806dd-3c31-4889-b749-07110fc17d31', 'company_id': None, 'created_at': '2025-10-14T23:46:56Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40648 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:57,062 INFO:app.routes.screens:screen_get_request rs_id_raw=00a806dd-3c31-4889-b749-07110fc17d31 screen_key_raw=profile
2025-10-15 00:46:57,078 INFO:app.logic.screen_builder:screen_rules rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:57,079 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile parent_raw={}
2025-10-15 00:46:57,079 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile parent_canon={}
2025-10-15 00:46:57,079 INFO:app.logic.screen_builder:screen_visible_calc rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:57,079 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:57,084 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:57,093 INFO:app.logic.screen_builder:screen_questions_included rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:57,100 INFO:app.logic.screen_builder:screen_rules rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:57,100 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile parent_raw={}
2025-10-15 00:46:57,100 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile parent_canon={}
2025-10-15 00:46:57,100 INFO:app.logic.screen_builder:screen_visible_calc rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:57,100 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:57,106 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:57,115 INFO:app.logic.screen_builder:screen_questions_included rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:57,127 INFO:app.routes.screens:screen_get_etag_parity rs_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile computed=W/"b4717ad72a52ba4f41f7e99f10e422033c8619ab" screen_view=W/"b4717ad72a52ba4f41f7e99f10e422033c8619ab" headers_set=W/"b4717ad72a52ba4f41f7e99f10e422033c8619ab"
2025-10-15 00:46:57,129 INFO:app.routes.screens:screen_get response_set_id=00a806dd-3c31-4889-b749-07110fc17d31 screen_key=profile etag=W/"b4717ad72a52ba4f41f7e99f10e422033c8619ab" before_count=0 after_count=0
INFO:     127.0.0.1:40654 - "GET /api/v1/response-sets/00a806dd-3c31-4889-b749-07110fc17d31/screens/profile HTTP/1.1" 200 OK
INFO:     127.0.0.1:40656 - "PATCH /api/v1/response-sets/00a806dd-3c31-4889-b749-07110fc17d31/answers/99999999-9999-9999-9999-999999999999 HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:40666 - "GET /api/v1/response-sets/88888888-8888-8888-8888-888888888888/screens/profile HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:40674 - "POST /api/v1/response-sets/%7Bresponse_set_id%7D/answers%3Abatch HTTP/1.1" 200 OK
2025-10-15 00:46:57,532 INFO:app.logic.screen_builder:screen_rules rs_id={response_set_id} screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:57,532 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id={response_set_id} screen_key=profile parent_raw={}
2025-10-15 00:46:57,532 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id={response_set_id} screen_key=profile parent_canon={}
2025-10-15 00:46:57,532 INFO:app.logic.screen_builder:screen_visible_calc rs_id={response_set_id} screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:57,532 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id={response_set_id} screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:57,534 ERROR:app.logic.repository_answers:get_existing_answer DB probe failed rs_id={response_set_id} q_id=11111111-1111-1111-1111-111111111111; using in-memory fallback
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 192, in get_existing_answer
    row = conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^

[SQL: 
                    SELECT option_id, value_text, value_number, value_bool, value_json
                    FROM response
                    WHERE response_set_id = %(rs)s AND question_id = %(qid)s
                    ]
[parameters: {'rs': '{response_set_id}', 'qid': '11111111-1111-1111-1111-111111111111'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-10-15 00:46:57,534 INFO:app.logic.repository_answers:answers_cache_exception_fallback rs_id={response_set_id} q_id=11111111-1111-1111-1111-111111111111 tuple=None
2025-10-15 00:46:57,536 ERROR:app.logic.repository_answers:get_existing_answer DB probe failed rs_id={response_set_id} q_id=22222222-2222-2222-2222-222222222222; using in-memory fallback
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 192, in get_existing_answer
    row = conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^

[SQL: 
                    SELECT option_id, value_text, value_number, value_bool, value_json
                    FROM response
                    WHERE response_set_id = %(rs)s AND question_id = %(qid)s
                    ]
[parameters: {'rs': '{response_set_id}', 'qid': '22222222-2222-2222-2222-222222222222'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-10-15 00:46:57,536 INFO:app.logic.repository_answers:answers_cache_exception_fallback rs_id={response_set_id} q_id=22222222-2222-2222-2222-222222222222 tuple=None
2025-10-15 00:46:57,539 ERROR:app.logic.repository_answers:get_existing_answer DB probe failed rs_id={response_set_id} q_id=33333333-3333-3333-3333-333333333333; using in-memory fallback
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 192, in get_existing_answer
    row = conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^

[SQL: 
                    SELECT option_id, value_text, value_number, value_bool, value_json
                    FROM response
                    WHERE response_set_id = %(rs)s AND question_id = %(qid)s
                    ]
[parameters: {'rs': '{response_set_id}', 'qid': '33333333-3333-3333-3333-333333333333'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-10-15 00:46:57,539 INFO:app.logic.repository_answers:answers_cache_exception_fallback rs_id={response_set_id} q_id=33333333-3333-3333-3333-333333333333 tuple=None
2025-10-15 00:46:57,541 ERROR:app.logic.repository_answers:get_existing_answer DB probe failed rs_id={response_set_id} q_id=44444444-4444-4444-4444-444444444444; using in-memory fallback
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 192, in get_existing_answer
    row = conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^

[SQL: 
                    SELECT option_id, value_text, value_number, value_bool, value_json
                    FROM response
                    WHERE response_set_id = %(rs)s AND question_id = %(qid)s
                    ]
[parameters: {'rs': '{response_set_id}', 'qid': '44444444-4444-4444-4444-444444444444'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-10-15 00:46:57,541 INFO:app.logic.repository_answers:answers_cache_exception_fallback rs_id={response_set_id} q_id=44444444-4444-4444-4444-444444444444 tuple=None
2025-10-15 00:46:57,541 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id={response_set_id} screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:57,543 ERROR:app.logic.repository_answers:get_existing_answer DB probe failed rs_id={response_set_id} q_id=11111111-1111-1111-1111-111111111111; using in-memory fallback
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 192, in get_existing_answer
    row = conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^

[SQL: 
                    SELECT option_id, value_text, value_number, value_bool, value_json
                    FROM response
                    WHERE response_set_id = %(rs)s AND question_id = %(qid)s
                    ]
[parameters: {'rs': '{response_set_id}', 'qid': '11111111-1111-1111-1111-111111111111'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-10-15 00:46:57,543 INFO:app.logic.repository_answers:answers_cache_exception_fallback rs_id={response_set_id} q_id=11111111-1111-1111-1111-111111111111 tuple=None
2025-10-15 00:46:57,545 ERROR:app.logic.repository_answers:get_existing_answer DB probe failed rs_id={response_set_id} q_id=22222222-2222-2222-2222-222222222222; using in-memory fallback
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 192, in get_existing_answer
    row = conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^

[SQL: 
                    SELECT option_id, value_text, value_number, value_bool, value_json
                    FROM response
                    WHERE response_set_id = %(rs)s AND question_id = %(qid)s
                    ]
[parameters: {'rs': '{response_set_id}', 'qid': '22222222-2222-2222-2222-222222222222'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-10-15 00:46:57,545 INFO:app.logic.repository_answers:answers_cache_exception_fallback rs_id={response_set_id} q_id=22222222-2222-2222-2222-222222222222 tuple=None
2025-10-15 00:46:57,547 ERROR:app.logic.repository_answers:get_existing_answer DB probe failed rs_id={response_set_id} q_id=33333333-3333-3333-3333-333333333333; using in-memory fallback
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 192, in get_existing_answer
    row = conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^

[SQL: 
                    SELECT option_id, value_text, value_number, value_bool, value_json
                    FROM response
                    WHERE response_set_id = %(rs)s AND question_id = %(qid)s
                    ]
[parameters: {'rs': '{response_set_id}', 'qid': '33333333-3333-3333-3333-333333333333'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-10-15 00:46:57,548 INFO:app.logic.repository_answers:answers_cache_exception_fallback rs_id={response_set_id} q_id=33333333-3333-3333-3333-333333333333 tuple=None
2025-10-15 00:46:57,549 ERROR:app.logic.repository_answers:get_existing_answer DB probe failed rs_id={response_set_id} q_id=44444444-4444-4444-4444-444444444444; using in-memory fallback
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.InvalidTextRepresentation: invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/logic/repository_answers.py", line 192, in get_existing_answer
    row = conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.DataError: (psycopg2.errors.InvalidTextRepresentation) invalid input syntax for type uuid: "{response_set_id}"
LINE 4:                     WHERE response_set_id = '{response_set_i...
                                                    ^

[SQL: 
                    SELECT option_id, value_text, value_number, value_bool, value_json
                    FROM response
                    WHERE response_set_id = %(rs)s AND question_id = %(qid)s
                    ]
[parameters: {'rs': '{response_set_id}', 'qid': '44444444-4444-4444-4444-444444444444'}]
(Background on this error at: https://sqlalche.me/e/20/9h9h)
2025-10-15 00:46:57,550 INFO:app.logic.repository_answers:answers_cache_exception_fallback rs_id={response_set_id} q_id=44444444-4444-4444-4444-444444444444 tuple=None
2025-10-15 00:46:57,553 INFO:app.logic.screen_builder:screen_questions_included rs_id={response_set_id} screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
INFO:     127.0.0.1:40686 - "POST /api/v1/response-sets/%7Bresponse_set_id%7D/answers%3Abatch HTTP/1.1" 200 OK
create_response_set persistence failed; continuing without DB write
Traceback (most recent call last):
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (5f958766-0111-4d8c-9cbe-05ad17ee663c, null, 2025-10-14 23:46:57+00, null).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/codex/schofield/app/routes/response_sets.py", line 54, in create_response_set
    conn.execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/codex/schofield/.venv/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "company_id" of relation "response_set" violates not-null constraint
DETAIL:  Failing row contains (5f958766-0111-4d8c-9cbe-05ad17ee663c, null, 2025-10-14 23:46:57+00, null).

[SQL: 
                    INSERT INTO response_set (response_set_id, company_id, created_at)
                    VALUES (%(rsid)s, %(company_id)s, %(created_at)s)
                    ]
[parameters: {'rsid': '5f958766-0111-4d8c-9cbe-05ad17ee663c', 'company_id': None, 'created_at': '2025-10-14T23:46:57Z'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
INFO:     127.0.0.1:40692 - "POST /api/v1/response-sets HTTP/1.1" 201 Created
2025-10-15 00:46:57,747 INFO:app.routes.screens:screen_get_request rs_id_raw=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key_raw=profile
2025-10-15 00:46:57,764 INFO:app.logic.screen_builder:screen_rules rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:57,764 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_raw={}
2025-10-15 00:46:57,764 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_canon={}
2025-10-15 00:46:57,764 INFO:app.logic.screen_builder:screen_visible_calc rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:57,764 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:57,770 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:57,781 INFO:app.logic.screen_builder:screen_questions_included rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:57,789 INFO:app.logic.screen_builder:screen_rules rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:57,789 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_raw={}
2025-10-15 00:46:57,789 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_canon={}
2025-10-15 00:46:57,790 INFO:app.logic.screen_builder:screen_visible_calc rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:57,790 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:57,798 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:57,807 INFO:app.logic.screen_builder:screen_questions_included rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:57,819 INFO:app.routes.screens:screen_get_etag_parity rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile computed=W/"2d22fcf8861193b2592253dd3cf891a3323fc88b" screen_view=W/"2d22fcf8861193b2592253dd3cf891a3323fc88b" headers_set=W/"2d22fcf8861193b2592253dd3cf891a3323fc88b"
2025-10-15 00:46:57,821 INFO:app.routes.screens:screen_get response_set_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile etag=W/"2d22fcf8861193b2592253dd3cf891a3323fc88b" before_count=0 after_count=0
INFO:     127.0.0.1:40694 - "GET /api/v1/response-sets/5f958766-0111-4d8c-9cbe-05ad17ee663c/screens/profile HTTP/1.1" 200 OK
2025-10-15 00:46:57,917 INFO:app.logic.screen_builder:screen_rules rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile rules={'11111111-1111-1111-1111-111111111111': {'parent': None, 'visible_if': []}, '22222222-2222-2222-2222-222222222222': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}, '44444444-4444-4444-4444-444444444444': {'parent': None, 'visible_if': []}}
2025-10-15 00:46:57,918 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_raw={}
2025-10-15 00:46:57,918 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_canon={}
2025-10-15 00:46:57,918 INFO:app.logic.screen_builder:screen_visible_calc rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:57,918 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile changed_precompute=False parents_cnt=0
2025-10-15 00:46:57,924 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_canon={} visible_ids_cnt=4
2025-10-15 00:46:57,933 INFO:app.logic.screen_builder:screen_questions_included rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile included=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:57,933 INFO:app.routes.answers:autosave_start rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c q_id=44444444-4444-4444-4444-444444444444 if_match_raw=W/"2d22fcf8861193b2592253dd3cf891a3323fc88b" if_match_norm=2d22fcf8861193b2592253dd3cf891a3323fc88b current_etag=W/"2d22fcf8861193b2592253dd3cf891a3323fc88b"
2025-10-15 00:46:57,935 INFO:app.routes.answers:autosave_precheck_counts rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile existing_screen_count=0
2025-10-15 00:46:57,938 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_raw={}
2025-10-15 00:46:57,939 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_canon={}
2025-10-15 00:46:57,939 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parent_canon={}
2025-10-15 00:46:57,939 INFO:app.routes.answers:vis_pre_state rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile parents=[] parent_pre={} visible_pre=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
2025-10-15 00:46:57,946 INFO:app.routes.answers:vis_pre_sets rs_id=5f958766-0111-4d8c-9cbe-05ad17ee663c screen_key=profile pre_set={'44444444-4444-4444-4444-444444444444', '33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222'} pre_list=['11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', '44444444-4444-4444-4444-444444444444']
INFO:     127.0.0.1:40700 - "PATCH /api/v1/response-sets/5f958766-0111-4d8c-9cbe-05ad17ee663c/answers/44444444-4444-4444-4444-444444444444 HTTP/1.1" 500 Internal Server Error
INFO:     127.0.0.1:40714 - "GET /api/v1/response-sets/f91ed199-146d-545f-9760-0c24359b6683/screens/profile HTTP/1.1" 500 Internal Server Error
INFO:     127.0.0.1:40728 - "POST /api/v1/authoring/questionnaires/Q-100/screens HTTP/1.1" 201 Created
INFO:     127.0.0.1:40736 - "POST /api/v1/authoring/questionnaires/Q-100/screens HTTP/1.1" 201 Created
INFO:     127.0.0.1:40738 - "GET /api/v1/authoring/questionnaires/Q-100/screens/S-2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:40746 - "PATCH /api/v1/authoring/questionnaires/Q-100/screens/S-2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:32938 - "POST /api/v1/authoring/questionnaires/Q-100/questions HTTP/1.1" 201 Created
INFO:     127.0.0.1:32952 - "GET /api/v1/authoring/questions/Q-1 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:32968 - "PATCH /api/v1/authoring/questions/Q-1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:32984 - "GET /api/v1/authoring/questions/Q-3 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:33000 - "PATCH /api/v1/authoring/questions/Q-3/position HTTP/1.1" 200 OK
INFO:     127.0.0.1:33006 - "GET /api/v1/authoring/questions/Q-1 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:33016 - "GET /api/v1/authoring/questions/Q-2 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:33020 - "GET /api/v1/authoring/questionnaires/Q-100/screens/S-1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33030 - "PATCH /api/v1/authoring/questionnaires/Q-100/screens/S-1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33044 - "GET /api/v1/authoring/questionnaires/Q-100/screens/S-1 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33054 - "GET /api/v1/authoring/questionnaires/Q-100/screens/S-2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33058 - "GET /api/v1/authoring/questions/Q-10 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:33068 - "PATCH /api/v1/authoring/questions/Q-10/position HTTP/1.1" 200 OK
INFO:     127.0.0.1:33070 - "GET /api/v1/authoring/questions/Q-21 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:33072 - "PATCH /api/v1/authoring/questions/Q-21/visibility HTTP/1.1" 200 OK
INFO:     127.0.0.1:33076 - "GET /api/v1/authoring/questions/Q-21 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:33084 - "PATCH /api/v1/authoring/questions/Q-21/visibility HTTP/1.1" 200 OK
INFO:     127.0.0.1:33092 - "GET /api/v1/authoring/questions/Q-21 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:33096 - "GET /api/v1/authoring/questions/Q-21 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:33112 - "POST /api/v1/authoring/questionnaires/Q-100/screens HTTP/1.1" 201 Created
INFO:     127.0.0.1:33124 - "POST /api/v1/authoring/questionnaires/Q-100/screens HTTP/1.1" 201 Created
INFO:     127.0.0.1:33136 - "POST /api/v1/authoring/questions/f7938e94-64e1-57ce-816f-eae798acbd4b/placeholders HTTP/1.1" 200 OK
INFO:     127.0.0.1:33146 - "PATCH /api/v1/authoring/questionnaires/Q-100/screens/S-2 HTTP/1.1" 412 Precondition Failed
INFO:     127.0.0.1:33152 - "GET /api/v1/authoring/questionnaires/Q-100/screens/S-2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33164 - "PATCH /api/v1/authoring/questionnaires/Q-100/screens/S-2 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33168 - "GET /api/v1/authoring/questions/Q-41 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:33174 - "PATCH /api/v1/authoring/questions/Q-41/visibility HTTP/1.1" 200 OK
INFO:     127.0.0.1:33182 - "GET /api/v1/authoring/questions/Q-51 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:33194 - "PATCH /api/v1/authoring/questions/Q-51/visibility HTTP/1.1" 200 OK
INFO:     127.0.0.1:33210 - "POST /api/v1/authoring/questionnaires/Q-100/screens HTTP/1.1" 409 Conflict
INFO:     127.0.0.1:33224 - "GET /api/v1/authoring/questions/Q-11 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:33226 - "PATCH /api/v1/authoring/questions/Q-11/position HTTP/1.1" 200 OK
INFO:     127.0.0.1:33238 - "GET /api/v1/authoring/questions/Q-60 HTTP/1.1" 405 Method Not Allowed
INFO:     127.0.0.1:33250 - "PATCH /api/v1/authoring/questions/Q-60/position HTTP/1.1" 200 OK
INFO:     127.0.0.1:33256 - "POST /api/v1/authoring/questionnaires/Q-100/questions HTTP/1.1" 400 Bad Request
INFO:     127.0.0.1:33266 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
2025-10-15 00:47:02,600 INFO:app.routes.screens:screen_get_request rs_id_raw=44444444-4444-4444-4444-444444444444 screen_key_raw=22222222-2222-2222-2222-222222222222
2025-10-15 00:47:02,617 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:02,618 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:02,618 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:02,618 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:02,619 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:02,623 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:02,630 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:02,638 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:02,639 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:02,639 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:02,639 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:02,639 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:02,643 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:02,650 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:02,661 INFO:app.routes.screens:screen_get_etag_parity rs_id=44444444-4444-4444-4444-444444444444 screen_key=company computed=W/"949bfffc47732dee19802d399f4c2a7071cb1295" screen_view=W/"949bfffc47732dee19802d399f4c2a7071cb1295" headers_set=W/"949bfffc47732dee19802d399f4c2a7071cb1295"
2025-10-15 00:47:02,663 INFO:app.routes.screens:screen_get response_set_id=44444444-4444-4444-4444-444444444444 screen_key=company etag=W/"949bfffc47732dee19802d399f4c2a7071cb1295" before_count=0 after_count=0
INFO:     127.0.0.1:33280 - "GET /api/v1/response-sets/44444444-4444-4444-4444-444444444444/screens/22222222-2222-2222-2222-222222222222 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33290 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
2025-10-15 00:47:02,890 INFO:app.routes.screens:screen_get_request rs_id_raw=44444444-4444-4444-4444-444444444444 screen_key_raw=22222222-2222-2222-2222-222222222222
2025-10-15 00:47:02,907 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:02,907 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:02,907 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:02,907 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:02,907 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:02,912 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:02,919 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:02,926 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:02,926 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:02,926 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:02,926 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:02,927 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:02,931 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:02,938 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:02,951 INFO:app.routes.screens:screen_get_etag_parity rs_id=44444444-4444-4444-4444-444444444444 screen_key=company computed=W/"949bfffc47732dee19802d399f4c2a7071cb1295" screen_view=W/"949bfffc47732dee19802d399f4c2a7071cb1295" headers_set=W/"949bfffc47732dee19802d399f4c2a7071cb1295"
2025-10-15 00:47:02,953 INFO:app.routes.screens:screen_get response_set_id=44444444-4444-4444-4444-444444444444 screen_key=company etag=W/"949bfffc47732dee19802d399f4c2a7071cb1295" before_count=0 after_count=0
INFO:     127.0.0.1:33296 - "GET /api/v1/response-sets/44444444-4444-4444-4444-444444444444/screens/22222222-2222-2222-2222-222222222222 HTTP/1.1" 200 OK
2025-10-15 00:47:03,062 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:03,063 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:03,063 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,063 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,063 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:03,066 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,072 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,072 INFO:app.routes.answers:autosave_start rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 if_match_raw=W/"949bfffc47732dee19802d399f4c2a7071cb1295" if_match_norm=949bfffc47732dee19802d399f4c2a7071cb1295 current_etag=W/"949bfffc47732dee19802d399f4c2a7071cb1295"
2025-10-15 00:47:03,074 INFO:app.routes.answers:autosave_precheck_counts rs_id=44444444-4444-4444-4444-444444444444 screen_key=company existing_screen_count=0
2025-10-15 00:47:03,076 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:03,076 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,076 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,076 INFO:app.routes.answers:vis_pre_state rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parents=[] parent_pre={} visible_pre=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,081 INFO:app.routes.answers:vis_pre_sets rs_id=44444444-4444-4444-4444-444444444444 screen_key=company pre_set={'33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333332'} pre_list=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,082 INFO:app.routes.answers:autosave_write_begin rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 value=Acme Ltd option_id=None
2025-10-15 00:47:03,084 INFO:app.logic.repository_answers:answers_write rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 path=db_ok
2025-10-15 00:47:03,085 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:03,091 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:03,091 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:03,091 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,091 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,091 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:03,091 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:03,094 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,094 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:03,099 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,099 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,099 INFO:app.routes.answers:vis_post_sets rs_id=44444444-4444-4444-4444-444444444444 screen_key=company post_set={'33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333332'} post_list=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,099 INFO:app.routes.answers:visibility_delta_inputs rs_id=44444444-4444-4444-4444-444444444444 screen_key=company visible_pre=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333'] visible_post=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333'] parent_value_pre={} parent_value_post={}
2025-10-15 00:47:03,100 INFO:app.routes.answers:vis_suppress_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:47:03,100 INFO:app.routes.answers:autosave_ok rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 screen_key=company new_etag=W/"c8b86fb7e495114e661fe9acc614648a4e9f3e9e" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:33306 - "PATCH /api/v1/response-sets/44444444-4444-4444-4444-444444444444/answers/33333333-3333-3333-3333-333333333331 HTTP/1.1" 200 OK
2025-10-15 00:47:03,220 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:03,220 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:03,221 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,221 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,221 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:03,221 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:03,224 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,224 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:03,231 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,232 INFO:app.routes.answers:autosave_start rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 if_match_raw=W/"c8b86fb7e495114e661fe9acc614648a4e9f3e9e" if_match_norm=c8b86fb7e495114e661fe9acc614648a4e9f3e9e current_etag=W/"c8b86fb7e495114e661fe9acc614648a4e9f3e9e"
INFO:     127.0.0.1:33312 - "PATCH /api/v1/response-sets/44444444-4444-4444-4444-444444444444/answers/33333333-3333-3333-3333-333333333331 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33316 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
2025-10-15 00:47:03,466 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:03,467 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:03,467 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,467 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,467 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:03,472 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,481 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,481 INFO:app.routes.answers:autosave_start rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 if_match_raw=* if_match_norm=* current_etag=W/"949bfffc47732dee19802d399f4c2a7071cb1295"
2025-10-15 00:47:03,483 INFO:app.routes.answers:autosave_precheck_counts rs_id=44444444-4444-4444-4444-444444444444 screen_key=company existing_screen_count=0
2025-10-15 00:47:03,486 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:03,486 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,486 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,486 INFO:app.routes.answers:vis_pre_state rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parents=[] parent_pre={} visible_pre=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,492 INFO:app.routes.answers:vis_pre_sets rs_id=44444444-4444-4444-4444-444444444444 screen_key=company pre_set={'33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333332'} pre_list=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,494 INFO:app.routes.answers:autosave_write_begin rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 value=42 option_id=None
2025-10-15 00:47:03,497 INFO:app.logic.repository_answers:answers_write rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 path=db_ok
2025-10-15 00:47:03,498 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 tuple=(None, None, 42.0, None)
2025-10-15 00:47:03,504 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:03,505 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:03,505 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,505 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,505 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:03,506 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 tuple=(None, None, 42.0, None)
2025-10-15 00:47:03,508 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,509 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 tuple=(None, None, 42.0, None)
2025-10-15 00:47:03,514 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,514 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,515 INFO:app.routes.answers:vis_post_sets rs_id=44444444-4444-4444-4444-444444444444 screen_key=company post_set={'33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333332'} post_list=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,515 INFO:app.routes.answers:visibility_delta_inputs rs_id=44444444-4444-4444-4444-444444444444 screen_key=company visible_pre=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333'] visible_post=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333'] parent_value_pre={} parent_value_post={}
2025-10-15 00:47:03,515 INFO:app.routes.answers:vis_suppress_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:47:03,515 INFO:app.routes.answers:autosave_ok rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 screen_key=company new_etag=W/"c8b86fb7e495114e661fe9acc614648a4e9f3e9e" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:33332 - "PATCH /api/v1/response-sets/44444444-4444-4444-4444-444444444444/answers/33333333-3333-3333-3333-333333333332 HTTP/1.1" 200 OK
2025-10-15 00:47:03,611 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:03,611 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:03,611 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,611 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,611 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:03,613 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 tuple=(None, None, 42.0, None)
2025-10-15 00:47:03,615 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,617 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 tuple=(None, None, 42.0, None)
2025-10-15 00:47:03,622 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,622 INFO:app.routes.answers:autosave_start rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 if_match_raw=* if_match_norm=* current_etag=W/"c8b86fb7e495114e661fe9acc614648a4e9f3e9e"
2025-10-15 00:47:03,625 INFO:app.routes.answers:autosave_precheck_counts rs_id=44444444-4444-4444-4444-444444444444 screen_key=company existing_screen_count=1
2025-10-15 00:47:03,628 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:03,628 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,628 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,628 INFO:app.routes.answers:vis_pre_state rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parents=[] parent_pre={} visible_pre=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,631 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 tuple=(None, None, 42.0, None)
2025-10-15 00:47:03,633 INFO:app.routes.answers:vis_pre_sets rs_id=44444444-4444-4444-4444-444444444444 screen_key=company pre_set={'33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333332'} pre_list=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,635 INFO:app.routes.answers:autosave_write_begin rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 value=Acme Ltd option_id=None
2025-10-15 00:47:03,638 INFO:app.logic.repository_answers:answers_write rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 path=db_ok
2025-10-15 00:47:03,639 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:03,646 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:03,646 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:03,646 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,646 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,646 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:03,646 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:03,646 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 tuple=(None, None, 42.0, None)
2025-10-15 00:47:03,648 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:03,648 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:03,648 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 tuple=(None, None, 42.0, None)
2025-10-15 00:47:03,653 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,653 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:03,653 INFO:app.routes.answers:vis_post_sets rs_id=44444444-4444-4444-4444-444444444444 screen_key=company post_set={'33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333332'} post_list=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:03,653 INFO:app.routes.answers:visibility_delta_inputs rs_id=44444444-4444-4444-4444-444444444444 screen_key=company visible_pre=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333'] visible_post=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333'] parent_value_pre={} parent_value_post={}
2025-10-15 00:47:03,653 INFO:app.routes.answers:vis_suppress_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:47:03,653 INFO:app.routes.answers:autosave_ok rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 screen_key=company new_etag=W/"11b0cec054119afc750e9ade39fa78c99c3b95f8" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:33346 - "PATCH /api/v1/response-sets/44444444-4444-4444-4444-444444444444/answers/33333333-3333-3333-3333-333333333331 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33360 - "POST /api/v1/response-sets/44444444-4444-4444-4444-444444444444/regenerate-check HTTP/1.1" 200 OK
INFO:     127.0.0.1:33376 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:33378 - "POST /api/v1/questionnaires/import HTTP/1.1" 200 OK
INFO:     127.0.0.1:33386 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:33396 - "GET /api/v1/questionnaires/11111111-1111-1111-1111-111111111111/export HTTP/1.1" 200 OK
INFO:     127.0.0.1:33404 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
2025-10-15 00:47:04,395 INFO:app.routes.screens:screen_get_request rs_id_raw=44444444-4444-4444-4444-444444444444 screen_key_raw=22222222-2222-2222-2222-222222222222
2025-10-15 00:47:04,409 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:04,409 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:04,409 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:04,410 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,410 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:04,413 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,419 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:04,425 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:04,425 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:04,425 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:04,425 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,425 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:04,429 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,435 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:04,444 INFO:app.routes.screens:screen_get_etag_parity rs_id=44444444-4444-4444-4444-444444444444 screen_key=company computed=W/"949bfffc47732dee19802d399f4c2a7071cb1295" screen_view=W/"949bfffc47732dee19802d399f4c2a7071cb1295" headers_set=W/"949bfffc47732dee19802d399f4c2a7071cb1295"
2025-10-15 00:47:04,446 INFO:app.routes.screens:screen_get response_set_id=44444444-4444-4444-4444-444444444444 screen_key=company etag=W/"949bfffc47732dee19802d399f4c2a7071cb1295" before_count=0 after_count=0
INFO:     127.0.0.1:33416 - "GET /api/v1/response-sets/44444444-4444-4444-4444-444444444444/screens/22222222-2222-2222-2222-222222222222 HTTP/1.1" 200 OK
2025-10-15 00:47:04,554 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:04,554 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:04,554 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:04,554 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,554 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:04,559 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,565 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:04,565 INFO:app.routes.answers:autosave_start rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 if_match_raw=W/"949bfffc47732dee19802d399f4c2a7071cb1295" if_match_norm=949bfffc47732dee19802d399f4c2a7071cb1295 current_etag=W/"949bfffc47732dee19802d399f4c2a7071cb1295"
2025-10-15 00:47:04,567 INFO:app.routes.answers:autosave_precheck_counts rs_id=44444444-4444-4444-4444-444444444444 screen_key=company existing_screen_count=0
2025-10-15 00:47:04,569 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:04,569 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:04,569 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:04,569 INFO:app.routes.answers:vis_pre_state rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parents=[] parent_pre={} visible_pre=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:04,574 INFO:app.routes.answers:vis_pre_sets rs_id=44444444-4444-4444-4444-444444444444 screen_key=company pre_set={'33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333332'} pre_list=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:04,576 INFO:app.routes.answers:autosave_write_begin rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 value=TempCo option_id=None
2025-10-15 00:47:04,579 INFO:app.logic.repository_answers:answers_write rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 path=db_ok
2025-10-15 00:47:04,581 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'TempCo', None, None)
2025-10-15 00:47:04,588 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:04,588 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:04,588 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:04,588 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,588 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:04,588 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'TempCo', None, None)
2025-10-15 00:47:04,591 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,591 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'TempCo', None, None)
2025-10-15 00:47:04,596 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:04,597 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:04,597 INFO:app.routes.answers:vis_post_sets rs_id=44444444-4444-4444-4444-444444444444 screen_key=company post_set={'33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333332'} post_list=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:04,597 INFO:app.routes.answers:visibility_delta_inputs rs_id=44444444-4444-4444-4444-444444444444 screen_key=company visible_pre=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333'] visible_post=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333'] parent_value_pre={} parent_value_post={}
2025-10-15 00:47:04,597 INFO:app.routes.answers:vis_suppress_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:47:04,597 INFO:app.routes.answers:autosave_ok rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 screen_key=company new_etag=W/"c8b86fb7e495114e661fe9acc614648a4e9f3e9e" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:33426 - "PATCH /api/v1/response-sets/44444444-4444-4444-4444-444444444444/answers/33333333-3333-3333-3333-333333333331 HTTP/1.1" 200 OK
2025-10-15 00:47:04,688 INFO:app.routes.screens:screen_get_request rs_id_raw=44444444-4444-4444-4444-444444444444 screen_key_raw=22222222-2222-2222-2222-222222222222
2025-10-15 00:47:04,702 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:04,702 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:04,702 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:04,702 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,702 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:04,702 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'TempCo', None, None)
2025-10-15 00:47:04,705 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,705 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'TempCo', None, None)
2025-10-15 00:47:04,711 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:04,718 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:04,718 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:04,719 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:04,719 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,719 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:04,719 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'TempCo', None, None)
2025-10-15 00:47:04,721 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,722 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'TempCo', None, None)
2025-10-15 00:47:04,726 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:04,736 INFO:app.routes.screens:screen_get_etag_parity rs_id=44444444-4444-4444-4444-444444444444 screen_key=company computed=W/"c8b86fb7e495114e661fe9acc614648a4e9f3e9e" screen_view=W/"c8b86fb7e495114e661fe9acc614648a4e9f3e9e" headers_set=W/"c8b86fb7e495114e661fe9acc614648a4e9f3e9e"
2025-10-15 00:47:04,738 INFO:app.routes.screens:screen_get response_set_id=44444444-4444-4444-4444-444444444444 screen_key=company etag=W/"c8b86fb7e495114e661fe9acc614648a4e9f3e9e" before_count=1 after_count=1
INFO:     127.0.0.1:33436 - "GET /api/v1/response-sets/44444444-4444-4444-4444-444444444444/screens/22222222-2222-2222-2222-222222222222 HTTP/1.1" 200 OK
2025-10-15 00:47:04,862 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:04,863 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:04,863 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:04,863 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,863 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:04,863 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'TempCo', None, None)
2025-10-15 00:47:04,866 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:04,866 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'TempCo', None, None)
2025-10-15 00:47:04,872 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:04,872 INFO:app.routes.answers:autosave_start rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 if_match_raw=W/"949bfffc47732dee19802d399f4c2a7071cb1295" if_match_norm=949bfffc47732dee19802d399f4c2a7071cb1295 current_etag=W/"c8b86fb7e495114e661fe9acc614648a4e9f3e9e"
2025-10-15 00:47:04,872 INFO:app.routes.answers:autosave_conflict rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 screen_key=company if_match_raw=W/"949bfffc47732dee19802d399f4c2a7071cb1295" write_performed=false
INFO:     127.0.0.1:33446 - "PATCH /api/v1/response-sets/44444444-4444-4444-4444-444444444444/answers/33333333-3333-3333-3333-333333333331 HTTP/1.1" 409 Conflict
INFO:     127.0.0.1:33460 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
2025-10-15 00:47:05,093 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:05,094 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:05,094 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:05,094 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:05,094 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:05,098 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:05,105 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:05,105 INFO:app.routes.answers:autosave_start rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 if_match_raw=* if_match_norm=* current_etag=W/"949bfffc47732dee19802d399f4c2a7071cb1295"
2025-10-15 00:47:05,107 INFO:app.routes.answers:autosave_precheck_counts rs_id=44444444-4444-4444-4444-444444444444 screen_key=company existing_screen_count=0
2025-10-15 00:47:05,111 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:05,111 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:05,111 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:05,111 INFO:app.routes.answers:vis_pre_state rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parents=[] parent_pre={} visible_pre=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:05,117 INFO:app.routes.answers:vis_pre_sets rs_id=44444444-4444-4444-4444-444444444444 screen_key=company pre_set={'33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333332'} pre_list=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
INFO:     127.0.0.1:33468 - "PATCH /api/v1/response-sets/44444444-4444-4444-4444-444444444444/answers/33333333-3333-3333-3333-333333333332 HTTP/1.1" 422 Unprocessable Entity
INFO:     127.0.0.1:33482 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:33486 - "GET /api/v1/questionnaires/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:33494 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:33502 - "POST /api/v1/questionnaires/import HTTP/1.1" 200 OK
INFO:     127.0.0.1:33518 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
INFO:     127.0.0.1:33528 - "GET /api/v1/questionnaires/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb/export HTTP/1.1" 404 Not Found
INFO:     127.0.0.1:33536 - "POST /__test__/reset-state HTTP/1.1" 204 No Content
2025-10-15 00:47:05,995 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:05,995 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:05,995 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:05,996 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:05,996 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:06,001 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:06,009 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:06,009 INFO:app.routes.answers:autosave_start rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 if_match_raw=* if_match_norm=* current_etag=W/"949bfffc47732dee19802d399f4c2a7071cb1295"
2025-10-15 00:47:06,011 INFO:app.routes.answers:autosave_precheck_counts rs_id=44444444-4444-4444-4444-444444444444 screen_key=company existing_screen_count=0
2025-10-15 00:47:06,014 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:06,014 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:06,014 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:06,014 INFO:app.routes.answers:vis_pre_state rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parents=[] parent_pre={} visible_pre=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:06,022 INFO:app.routes.answers:vis_pre_sets rs_id=44444444-4444-4444-4444-444444444444 screen_key=company pre_set={'33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333332'} pre_list=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:06,024 INFO:app.routes.answers:autosave_write_begin rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 value=Acme Ltd option_id=None
2025-10-15 00:47:06,027 INFO:app.logic.repository_answers:answers_write rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 path=db_ok
2025-10-15 00:47:06,029 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:06,035 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:06,035 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:06,035 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:06,035 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:06,035 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:06,035 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:06,039 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:06,039 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:06,045 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:06,045 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:06,045 INFO:app.routes.answers:vis_post_sets rs_id=44444444-4444-4444-4444-444444444444 screen_key=company post_set={'33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333332'} post_list=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:06,045 INFO:app.routes.answers:visibility_delta_inputs rs_id=44444444-4444-4444-4444-444444444444 screen_key=company visible_pre=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333'] visible_post=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333'] parent_value_pre={} parent_value_post={}
2025-10-15 00:47:06,045 INFO:app.routes.answers:vis_suppress_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:47:06,045 INFO:app.routes.answers:autosave_ok rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 screen_key=company new_etag=W/"c8b86fb7e495114e661fe9acc614648a4e9f3e9e" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:33544 - "PATCH /api/v1/response-sets/44444444-4444-4444-4444-444444444444/answers/33333333-3333-3333-3333-333333333331 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33548 - "POST /api/v1/response-sets/44444444-4444-4444-4444-444444444444/regenerate-check HTTP/1.1" 200 OK
2025-10-15 00:47:06,238 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:06,239 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:06,239 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:06,239 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:06,240 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:06,240 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:06,243 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:06,243 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:06,248 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:06,249 INFO:app.routes.answers:autosave_start rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 if_match_raw=* if_match_norm=* current_etag=W/"c8b86fb7e495114e661fe9acc614648a4e9f3e9e"
2025-10-15 00:47:06,251 INFO:app.routes.answers:autosave_precheck_counts rs_id=44444444-4444-4444-4444-444444444444 screen_key=company existing_screen_count=1
2025-10-15 00:47:06,253 INFO:app.routes.answers:vis_pre_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:06,253 INFO:app.routes.answers:vis_pre_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:06,253 INFO:app.routes.answers:vis_pre_hydrated_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:06,253 INFO:app.routes.answers:vis_pre_state rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parents=[] parent_pre={} visible_pre=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:06,255 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:06,259 INFO:app.routes.answers:vis_pre_sets rs_id=44444444-4444-4444-4444-444444444444 screen_key=company pre_set={'33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333332'} pre_list=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:06,260 INFO:app.routes.answers:autosave_write_begin rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 value=7 option_id=None
2025-10-15 00:47:06,263 INFO:app.logic.repository_answers:answers_write rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 path=db_ok
2025-10-15 00:47:06,265 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 tuple=(None, None, 7.0, None)
2025-10-15 00:47:06,271 INFO:app.logic.screen_builder:screen_rules rs_id=44444444-4444-4444-4444-444444444444 screen_key=company rules={'33333333-3333-3333-3333-333333333331': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333332': {'parent': None, 'visible_if': []}, '33333333-3333-3333-3333-333333333333': {'parent': None, 'visible_if': []}}
2025-10-15 00:47:06,271 INFO:app.logic.screen_builder:screen_parent_values_raw rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_raw={}
2025-10-15 00:47:06,271 INFO:app.logic.screen_builder:screen_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:06,271 INFO:app.logic.screen_builder:screen_visible_calc rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:06,271 INFO:app.logic.screen_builder:screen_hydrate_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company changed_precompute=False parents_cnt=0
2025-10-15 00:47:06,272 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:06,272 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 tuple=(None, None, 7.0, None)
2025-10-15 00:47:06,273 INFO:app.logic.screen_builder:screen_visible_calc_final rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={} visible_ids_cnt=3
2025-10-15 00:47:06,273 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333331 tuple=(None, 'Acme Ltd', None, None)
2025-10-15 00:47:06,273 INFO:app.logic.repository_answers:answers_cache_hit rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 tuple=(None, None, 7.0, None)
2025-10-15 00:47:06,278 INFO:app.logic.screen_builder:screen_questions_included rs_id=44444444-4444-4444-4444-444444444444 screen_key=company included=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:06,278 INFO:app.routes.answers:vis_post_parent_values_canon rs_id=44444444-4444-4444-4444-444444444444 screen_key=company parent_canon={}
2025-10-15 00:47:06,278 INFO:app.routes.answers:vis_post_sets rs_id=44444444-4444-4444-4444-444444444444 screen_key=company post_set={'33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333333', '33333333-3333-3333-3333-333333333332'} post_list=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333']
2025-10-15 00:47:06,279 INFO:app.routes.answers:visibility_delta_inputs rs_id=44444444-4444-4444-4444-444444444444 screen_key=company visible_pre=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333'] visible_post=['33333333-3333-3333-3333-333333333331', '33333333-3333-3333-3333-333333333332', '33333333-3333-3333-3333-333333333333'] parent_value_pre={} parent_value_post={}
2025-10-15 00:47:06,279 INFO:app.routes.answers:vis_suppress_summary rs_id=44444444-4444-4444-4444-444444444444 screen_key=company now_hidden_cnt=0 suppressed_cnt=0 not_suppressed=[]
2025-10-15 00:47:06,279 INFO:app.routes.answers:autosave_ok rs_id=44444444-4444-4444-4444-444444444444 q_id=33333333-3333-3333-3333-333333333332 screen_key=company new_etag=W/"11b0cec054119afc750e9ade39fa78c99c3b95f8" write_performed=True now_visible=[] now_hidden=[]
INFO:     127.0.0.1:33554 - "PATCH /api/v1/response-sets/44444444-4444-4444-4444-444444444444/answers/33333333-3333-3333-3333-333333333332 HTTP/1.1" 200 OK
INFO:     127.0.0.1:33570 - "POST /api/v1/response-sets/44444444-4444-4444-4444-444444444444/regenerate-check HTTP/1.1" 200 OK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [3202970]
INFO:     Stopping reloader process [3202959]
