============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.4.1, pluggy-1.6.0
rootdir: /home/codex/schofield
plugins: mock-3.14.1, anyio-4.9.0, cov-6.2.1, langsmith-0.4.1
collected 190 items

tests/architectural/test_epic_a_data_model_architecture.py ............. [  6%]
..............                                                           [ 14%]
tests/functional/test_epic_a_data_model_functional.py FFFFFFFFFFF.FFFF.. [ 23%]
.F......FFFFFFFFFxFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF [ 61%]
FFFFF.F.F.F..F..F.F.....FFFFFFFFFFFFFFFFFFFFFF........F..F..F..F..F...F. [ 99%]
.                                                                        [100%]

=================================== FAILURES ===================================
_____________ test_7_2_1_1_entities_persisted_with_canonical_names _____________

    def test_7_2_1_1_entities_persisted_with_canonical_names():
        """Verifies 7.2.1.1 — Entities are persisted with canonical names."""
        # Invoke migration then request outputs snapshot (shim returns error envelope)
        result = run_migrate_cli(["--section", "7.2.1.1"])
        outputs = result.get("outputs") or {}
    
        # Assert: names set equals expected canonical names (set-equality)
        expected_names = {
            "Company",
            "QuestionnaireQuestion",
            "AnswerOption",
            "ResponseSet",
            "Response",
            "GeneratedDocument",
            "FieldGroup",
            "QuestionToFieldGroup",
            "GroupValue",
        }
        actual_names = {e.get("name") for e in (outputs.get("entities") or [])}
>       assert actual_names == expected_names
E       AssertionError: assert set() == {'AnswerOptio...ldGroup', ...}
E         
E         Extra items in the right set:
E         'GroupValue'
E         'Response'
E         'GeneratedDocument'
E         'AnswerOption'
E         'QuestionnaireQuestion'
E         'FieldGroup'
E         'QuestionToFieldGroup'
E         'Company'
E         'ResponseSet'
E         
E         Full diff:
E         + set()
E         - {
E         -     'AnswerOption',
E         -     'Company',
E         -     'FieldGroup',
E         -     'GeneratedDocument',
E         -     'GroupValue',
E         -     'QuestionToFieldGroup',
E         -     'QuestionnaireQuestion',
E         -     'Response',
E         -     'ResponseSet',
E         - }

tests/functional/test_epic_a_data_model_functional.py:315: AssertionError
____________ test_7_2_1_2_entity_fields_exposed_with_declared_types ____________

    def test_7_2_1_2_entity_fields_exposed_with_declared_types():
        """Verifies 7.2.1.2 — Entity fields are exposed with declared types for Response."""
        result = run_migrate_cli(["--section", "7.2.1.2"])
        outputs = result.get("outputs") or {}
        entities = outputs.get("entities") or []
        response = next((e for e in entities if e.get("name") == "Response"), {})
        fields = {f.get("name"): f.get("type") for f in (response.get("fields") or [])}
        # Assert: required field types present exactly
>       assert fields.get("response_id") == "uuid"
E       AssertionError: assert None == 'uuid'
E        +  where None = <built-in method get of dict object at 0x7f7246082580>('response_id')
E        +    where <built-in method get of dict object at 0x7f7246082580> = {}.get

tests/functional/test_epic_a_data_model_functional.py:330: AssertionError
_________________ test_7_2_1_3_primary_key_externally_declared _________________

    def test_7_2_1_3_primary_key_externally_declared():
        """Verifies 7.2.1.3 — Primary key is externally declared for Response."""
        result = run_migrate_cli(["--section", "7.2.1.3"])
        outputs = result.get("outputs") or {}
        response = next((e for e in (outputs.get("entities") or []) if e.get("name") == "Response"), {})
        pk_cols = (response.get("primary_key") or {}).get("columns") or []
        # Assert: exact PK columns
>       assert pk_cols == ["response_id"]
E       AssertionError: assert [] == ['response_id']
E         
E         Right contains one more item: 'response_id'
E         
E         Full diff:
E         + []
E         - [
E         -     'response_id',
E         - ]

tests/functional/test_epic_a_data_model_functional.py:348: AssertionError
_________________ test_7_2_1_4_foreign_key_constraints_present _________________

    def test_7_2_1_4_foreign_key_constraints_present():
        """Verifies 7.2.1.4 — Foreign key constraints are present for Response → ResponseSet."""
        result = run_migrate_cli(["--section", "7.2.1.4"])
        outputs = result.get("outputs") or {}
        response = next((e for e in (outputs.get("entities") or []) if e.get("name") == "Response"), {})
        fks = response.get("foreign_keys") or []
        expected = {
            "name": "fk_response_set",
            "columns": ["response_set_id"],
            "references": {"entity": "ResponseSet", "columns": ["response_set_id"]},
        }
        # Assert: exact FK entry exists
>       assert expected in fks
E       AssertionError: assert {'columns': ['response_set_id'], 'name': 'fk_response_set', 'references': {'columns': ['response_set_id'], 'entity': 'ResponseSet'}} in []

tests/functional/test_epic_a_data_model_functional.py:365: AssertionError
___________________ test_7_2_1_5_unique_constraints_present ____________________

    def test_7_2_1_5_unique_constraints_present():
        """Verifies 7.2.1.5 — Unique constraints are present (Response one-per-question-per-submission)."""
        result = run_migrate_cli(["--section", "7.2.1.5"])
        outputs = result.get("outputs") or {}
        response = next((e for e in (outputs.get("entities") or []) if e.get("name") == "Response"), {})
        uniques = response.get("unique_constraints") or []
        expected = {"name": "uq_response_set_question", "columns": ["response_set_id", "question_id"]}
>       assert expected in uniques
E       AssertionError: assert {'columns': ['response_set_id', 'question_id'], 'name': 'uq_response_set_question'} in []

tests/functional/test_epic_a_data_model_functional.py:378: AssertionError
_________________________ test_7_2_1_6_indexes_present _________________________

    def test_7_2_1_6_indexes_present():
        """Verifies 7.2.1.6 — Indexes are present (QuestionnaireQuestion.placeholder_code lookup)."""
        result = run_migrate_cli(["--section", "7.2.1.6"])
        outputs = result.get("outputs") or {}
        qq = next((e for e in (outputs.get("entities") or []) if e.get("name") == "QuestionnaireQuestion"), {})
        idxs = qq.get("indexes") or []
        expected = {"name": "uq_question_placeholder_code", "columns": ["placeholder_code"]}
>       assert expected in idxs
E       AssertionError: assert {'columns': ['placeholder_code'], 'name': 'uq_question_placeholder_code'} in []

tests/functional/test_epic_a_data_model_functional.py:390: AssertionError
____________________ test_7_2_1_7_enums_externally_declared ____________________

    def test_7_2_1_7_enums_externally_declared():
        """Verifies 7.2.1.7 — Enums are externally declared (answer_kind values)."""
        result = run_migrate_cli(["--section", "7.2.1.7"])
        outputs = result.get("outputs") or {}
        enums = outputs.get("enums") or []
        answer_kind = next((e for e in enums if e.get("name") == "answer_kind"), {})
        expected_values = ["boolean", "enum_single", "long_text", "number", "short_string"]
>       assert answer_kind.get("values") == expected_values
E       AssertionError: assert None == ['boolean', 'enum_single', 'long_text', 'number', 'short_string']
E        +  where None = <built-in method get of dict object at 0x7f7245d41440>('values')
E        +    where <built-in method get of dict object at 0x7f7245d41440> = {}.get

tests/functional/test_epic_a_data_model_functional.py:403: AssertionError
____________________ test_7_2_1_8_encrypted_fields_flagged _____________________

    def test_7_2_1_8_encrypted_fields_flagged():
        """Verifies 7.2.1.8 — Encrypted fields are explicitly flagged."""
        result = run_migrate_cli(["--section", "7.2.1.8"])
        outputs = result.get("outputs") or {}
    
        def _encrypted(entity: str, field: str) -> Any:
            ent = next((e for e in (outputs.get("entities") or []) if e.get("name") == entity), {})
            fld = next((f for f in (ent.get("fields") or []) if f.get("name") == field), {})
            return fld.get("encrypted", False)
    
        # Assert: sensitive fields are flagged true
>       assert _encrypted("Company", "legal_name") is True
E       AssertionError: assert False is True
E        +  where False = <function test_7_2_1_8_encrypted_fields_flagged.<locals>._encrypted at 0x7f7246c0e0e0>('Company', 'legal_name')

tests/functional/test_epic_a_data_model_functional.py:417: AssertionError
_____________ test_7_2_1_9_global_encrypted_fields_manifest_exists _____________

    def test_7_2_1_9_global_encrypted_fields_manifest_exists():
        """Verifies 7.2.1.9 — Global encrypted fields manifest exists."""
        result = run_migrate_cli(["--section", "7.2.1.9"])
        outputs = result.get("outputs") or {}
        manifest = outputs.get("encrypted_fields") or []
        expected = {
            "Company.legal_name",
            "Company.registered_office_address",
            "Response.value_json",
            "GeneratedDocument.output_uri",
        }
>       assert set(manifest) == expected
E       AssertionError: assert set() == {'Company.leg...e.value_json'}
E         
E         Extra items in the right set:
E         'Company.registered_office_address'
E         'Response.value_json'
E         'Company.legal_name'
E         'GeneratedDocument.output_uri'
E         
E         Full diff:
E         + set()
E         - {
E         -     'Company.legal_name',
E         -     'Company.registered_office_address',
E         -     'GeneratedDocument.output_uri',
E         -     'Response.value_json',
E         - }

tests/functional/test_epic_a_data_model_functional.py:436: AssertionError
__________________ test_7_2_1_10_constraints_listed_globally ___________________

    def test_7_2_1_10_constraints_listed_globally():
        """Verifies 7.2.1.10 — Constraints are listed globally in outputs.constraints_applied[]."""
        result = run_migrate_cli(["--section", "7.2.1.10"])
        outputs = result.get("outputs") or {}
        constraints = outputs.get("constraints_applied") or []
        required = {"pk_response", "fk_response_set", "uq_response_set_question"}
>       assert required.issubset(set(constraints))
E       AssertionError: assert False
E        +  where False = <built-in method issubset of set object at 0x7f7246c3aea0>(set())
E        +    where <built-in method issubset of set object at 0x7f7246c3aea0> = {'fk_response_set', 'pk_response', 'uq_response_set_question'}.issubset
E        +    and   set() = set([])

tests/functional/test_epic_a_data_model_functional.py:447: AssertionError
______________ test_7_2_1_11_migration_journal_includes_filenames ______________

    def test_7_2_1_11_migration_journal_includes_filenames():
        """Verifies 7.2.1.11 — Migration journal entries include filenames under migrations/."""
        result = run_migrate_cli(["--section", "7.2.1.11"])
        outputs = result.get("outputs") or {}
        journal = outputs.get("migration_journal") or []
        filenames = [j.get("filename") for j in journal]
        # Assert: includes all expected filenames
>       assert "migrations/001_init.sql" in filenames
E       AssertionError: assert 'migrations/001_init.sql' in []

tests/functional/test_epic_a_data_model_functional.py:460: AssertionError
________ test_7_2_1_13_one_response_per_question_per_submission_visible ________

    def test_7_2_1_13_one_response_per_question_per_submission_visible():
        """Verifies 7.2.1.13 — Uniqueness rule externally visible in outputs for Response."""
        result = run_migrate_cli(["--section", "7.2.1.13"])
        outputs = result.get("outputs") or {}
        response = next((e for e in (outputs.get("entities") or []) if e.get("name") == "Response"), {})
        uniques = response.get("unique_constraints") or []
>       assert {"name": "uq_response_set_question", "columns": ["response_set_id", "question_id"]} in uniques
E       AssertionError: assert {'columns': ['response_set_id', 'question_id'], 'name': 'uq_response_set_question'} in []

tests/functional/test_epic_a_data_model_functional.py:486: AssertionError
_________ test_7_2_1_14_duplicate_placeholders_rejected_via_uniqueness _________

    def test_7_2_1_14_duplicate_placeholders_rejected_via_uniqueness():
        """Verifies 7.2.1.14 — Duplicate placeholders are rejected via uniqueness on placeholder_code."""
        result = run_migrate_cli(["--section", "7.2.1.14"])
        outputs = result.get("outputs") or {}
        qq = next((e for e in (outputs.get("entities") or []) if e.get("name") == "QuestionnaireQuestion"), {})
        # Assert: unique/index exists with exact name and columns
>       assert {"name": "uq_question_placeholder_code", "columns": ["placeholder_code"]} in (qq.get("unique_constraints") or []) or (
            {"name": "uq_question_placeholder_code", "columns": ["placeholder_code"]} in (qq.get("indexes") or [])
        )
E       AssertionError: assert ({'columns': ['placeholder_code'], 'name': 'uq_question_placeholder_code'} in ((None or [])) or {'columns': ['placeholder_code'], 'name': 'uq_question_placeholder_code'} in ((None or [])))
E        +  where None = <built-in method get of dict object at 0x7f7245c14080>('unique_constraints')
E        +    where <built-in method get of dict object at 0x7f7245c14080> = {}.get
E        +  and   None = <built-in method get of dict object at 0x7f7245c14080>('indexes')
E        +    where <built-in method get of dict object at 0x7f7245c14080> = {}.get

tests/functional/test_epic_a_data_model_functional.py:495: AssertionError
________ test_7_2_1_15_direct_lookup_resolves_placeholders_structurally ________

    def test_7_2_1_15_direct_lookup_resolves_placeholders_structurally():
        """Verifies 7.2.1.15 — Direct lookup artefacts present; no template mapping entities exist."""
        result = run_migrate_cli(["--section", "7.2.1.15"])
        outputs = result.get("outputs") or {}
        entities = [e.get("name") for e in (outputs.get("entities") or [])]
        # Assert: QuestionnaireQuestion has placeholder_code field
        qq = next((e for e in (outputs.get("entities") or []) if e.get("name") == "QuestionnaireQuestion"), {})
>       assert any(f.get("name") == "placeholder_code" for f in (qq.get("fields") or []))
E       assert False
E        +  where False = any(<generator object test_7_2_1_15_direct_lookup_resolves_placeholders_structurally.<locals>.<genexpr> at 0x7f7245b96030>)

tests/functional/test_epic_a_data_model_functional.py:507: AssertionError
_______________ test_7_2_1_16_tls_enforcement_externally_visible _______________

    def test_7_2_1_16_tls_enforcement_externally_visible():
        """Verifies 7.2.1.16 — TLS enforcement is externally visible if outputs surface configuration."""
        result = run_migrate_cli(["--section", "7.2.1.16"])
        outputs = result.get("outputs") or {}
        config = outputs.get("config") or {}
        # Assert: if TLS projection exists, it reflects true
        tls_required = (config.get("database") or {}).get("ssl", {}).get("required")
>       assert tls_required is True
E       assert None is True

tests/functional/test_epic_a_data_model_functional.py:520: AssertionError
____________________ test_7_2_2_3_erd_spec_schema_mismatch _____________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'validation', import_path = 'app.validation'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'validation'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a13c40>

    def test_7_2_2_3_erd_spec_schema_mismatch(mocker):
        """Verifies 7.2.2.3 — ERD spec schema mismatch."""
        # Mock: valid JSON wrong shape, then pretend validator flags missing properties.
        payload = json.dumps({"entities": [{"table_name": "Response"}]})
    
        class _FH:
            def read(self):
                return payload
    
            def __enter__(self):
                return self
    
            def __exit__(self, *args: Any) -> None:  # pragma: no cover
                return None
    
        mocker.patch("builtins.open", return_value=_FH())
        # Mock: schema validator boundary exists (not invoked by shim yet) and must be called
>       validator = mocker.patch(
            "app.validation.schema.SchemaValidator.validate",
            create=True,
            return_value=None,
        )

tests/functional/test_epic_a_data_model_functional.py:625: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'validation', import_path = 'app.validation'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.validation'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_______________ test_7_3_1_1_table_creation_after_runner_starts ________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72468597b0>

    def test_7_3_1_1_table_creation_after_runner_starts(mocker):
        """Verifies 7.3.1.1 — Table creation occurs after MigrationRunner.start."""
        order: List[str] = []
        # Patch boundary: MigrationRunner.start appends to order when called
>       start = mocker.patch(
            "app.db.migrations_runner.MigrationRunner.start",
            create=True,
            side_effect=lambda *a, **k: order.append("runner.start"),
        )

tests/functional/test_epic_a_data_model_functional.py:893: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
________________ test_7_3_1_2_constraints_follow_table_creation ________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72469d1510>

    def test_7_3_1_2_constraints_follow_table_creation(mocker):
        """Verifies 7.3.1.2 — Constraint creation follows table creation."""
        order: List[str] = []
        # Patch boundary: create_tables then create_constraints must be called in order
>       create_tables = mocker.patch(
            "app.db.migrations_runner.MigrationRunner.create_tables",
            create=True,
            side_effect=lambda *a, **k: order.append("create_tables"),
        )

tests/functional/test_epic_a_data_model_functional.py:916: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
__________________ test_7_3_1_3_encryption_after_constraints ___________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72469b8910>

    def test_7_3_1_3_encryption_after_constraints(mocker):
        """Verifies 7.3.1.3 — Encryption application follows constraint creation."""
        order: List[str] = []
        # Patch boundary: create_constraints then apply_column_encryption
>       create_constraints = mocker.patch(
            "app.db.migrations_runner.MigrationRunner.create_constraints",
            create=True,
            side_effect=lambda *a, **k: order.append("create_constraints"),
        )

tests/functional/test_epic_a_data_model_functional.py:937: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_3_1_4_tls_before_db_operations _____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246c2cc40>

    def test_7_3_1_4_tls_before_db_operations(mocker):
        """Verifies 7.3.1.4 — TLS session established before any DB operation."""
        order: List[str] = []
        # Patch boundary: DB.connect_tls must occur before any DB operation
>       connect_tls = mocker.patch(
            "app.db.base.DB.connect_tls",
            create=True,
            side_effect=lambda *a, **k: order.append("connect_tls"),
        )

tests/functional/test_epic_a_data_model_functional.py:958: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_____________ test_7_3_1_5_row_validation_after_secure_connection ______________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a1d8d0>

    def test_7_3_1_5_row_validation_after_secure_connection(mocker):
        """Verifies 7.3.1.5 — Row validation is performed after secure connection."""
        order: List[str] = []
        # Patch boundary: TLS connect then DBSession.validate_row
>       connect_tls = mocker.patch(
            "app.db.base.DB.connect_tls",
            create=True,
            side_effect=lambda *a, **k: order.append("connect_tls"),
        )

tests/functional/test_epic_a_data_model_functional.py:979: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
______________ test_7_3_1_6_direct_lookup_follows_row_validation _______________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246bd0ca0>

    def test_7_3_1_6_direct_lookup_follows_row_validation(mocker):
        """Verifies 7.3.1.6 — Direct lookup follows row validation."""
        order: List[str] = []
        # Patch boundary: validate_row then PlaceholderResolver.lookup_by_code
>       validate_row = mocker.patch(
            "app.db.base.DBSession.validate_row",
            create=True,
            side_effect=lambda *a, **k: order.append("validate_row"),
        )

tests/functional/test_epic_a_data_model_functional.py:1000: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DBSession', import_path = 'app.db.base.DBSession'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DBSession'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
__________ test_7_3_1_7_placeholder_resolution_follows_direct_lookup ___________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'resolution', import_path = 'app.resolution'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'resolution'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72460a6f80>

    def test_7_3_1_7_placeholder_resolution_follows_direct_lookup(mocker):
        """Verifies 7.3.1.7 — Placeholder resolution follows direct lookup."""
        order: List[str] = []
        # Patch boundary: PlaceholderResolver.lookup_by_code then Resolver.resolve_placeholders
>       lookup = mocker.patch(
            "app.resolution.placeholder.PlaceholderResolver.lookup_by_code",
            create=True,
            side_effect=lambda *a, **k: order.append("lookup_by_code"),
        )

tests/functional/test_epic_a_data_model_functional.py:1021: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'resolution', import_path = 'app.resolution'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.resolution'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
__________ test_7_3_1_8_rollback_immediately_after_migration_failure ___________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72468c6170>

    def test_7_3_1_8_rollback_immediately_after_migration_failure(mocker):
        """Verifies 7.3.1.8 — Rollback is initiated immediately after a migration failure."""
        order: List[str] = []
        # Patch boundary: create_tables raises, rollback is invoked immediately after
        def _raise_failure(*_a, **_k):
            order.append("create_tables")
            raise RuntimeError("controlled migration failure")
    
>       create_tables = mocker.patch(
            "app.db.migrations_runner.MigrationRunner.create_tables",
            create=True,
            side_effect=_raise_failure,
        )

tests/functional/test_epic_a_data_model_functional.py:1046: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
______________ test_7_3_1_9_determinism_check_precedes_next_step _______________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'determinism', import_path = 'app.determinism'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'determinism'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72460a5ea0>

    def test_7_3_1_9_determinism_check_precedes_next_step(mocker):
        """Verifies 7.3.1.9 — Determinism check precedes transition to the next step."""
        order: List[str] = []
        # Patch boundary: DeterminismChecker.verify precedes NextStep.start
>       determinism_check = mocker.patch(
            "app.determinism.checker.DeterminismChecker.verify",
            create=True,
            side_effect=lambda *a, **k: order.append("determinism_check"),
        )

tests/functional/test_epic_a_data_model_functional.py:1067: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'determinism', import_path = 'app.determinism'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.determinism'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
______________ test_7_3_1_11_template_registration_reuses_schema _______________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'registry', import_path = 'app.registry'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'registry'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a21f30>

    def test_7_3_1_11_template_registration_reuses_schema(mocker):
        """Verifies 7.3.1.11 — Template registration proceeds without schema migrations."""
        # Patch boundary: TemplateRegistry.register should be invoked once
>       register = mocker.patch(
            "app.registry.templates.TemplateRegistry.register",
            create=True,
            return_value=None,
        )

tests/functional/test_epic_a_data_model_functional.py:1092: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'registry', import_path = 'app.registry'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.registry'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_______________ test_7_3_1_12_policy_registration_reuses_schema ________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'registry', import_path = 'app.registry'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'registry'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a13a30>

    def test_7_3_1_12_policy_registration_reuses_schema(mocker):
        """Verifies 7.3.1.12 — Policy registration proceeds without schema migrations."""
        # Patch boundary: PolicyRegistry.register should be invoked once
>       policy_register = mocker.patch(
            "app.registry.policies.PolicyRegistry.register",
            create=True,
            return_value=None,
        )

tests/functional/test_epic_a_data_model_functional.py:1113: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'registry', import_path = 'app.registry'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.registry'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
________________ test_7_3_2_1_halt_on_migration_execution_error ________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a2abf0>

    def test_7_3_2_1_halt_on_migration_execution_error(mocker):
        """Verifies 7.3.2.1 — Halt on migration execution error (E1 → E2)."""
        # Mock: create_tables raises; downstream steps must not run
>       create_tables = mocker.patch(
            "app.db.migrations_runner.MigrationRunner.create_tables",
            create=True,
            side_effect=RuntimeError("migration execution error"),
        )

tests/functional/test_epic_a_data_model_functional.py:1138: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
________________ test_7_3_2_2_halt_on_constraint_creation_error ________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a7d720>

    def test_7_3_2_2_halt_on_constraint_creation_error(mocker):
        """Verifies 7.3.2.2 — Halt on constraint creation error (E2 → indexes)."""
>       create_constraints = mocker.patch(
            "app.db.migrations_runner.MigrationRunner.create_constraints",
            create=True,
            side_effect=RuntimeError("constraint creation error"),
        )

tests/functional/test_epic_a_data_model_functional.py:1168: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_________________ test_7_3_2_3_halt_on_encryption_apply_error __________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245ad8490>

    def test_7_3_2_3_halt_on_encryption_apply_error(mocker):
        """Verifies 7.3.2.3 — Halt on encryption application error (E3 → remainder)."""
>       apply_enc = mocker.patch(
            "app.db.migrations_runner.MigrationRunner.apply_column_encryption",
            create=True,
            side_effect=RuntimeError("encryption apply error"),
        )

tests/functional/test_epic_a_data_model_functional.py:1188: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_3_2_4_halt_on_rollback_failure _____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72469d5a20>

    def test_7_3_2_4_halt_on_rollback_failure(mocker):
        """Verifies 7.3.2.4 — Halt on rollback failure (E8)."""
>       rollback = mocker.patch(
            "app.db.migrations_runner.MigrationRunner.rollback",
            create=True,
            side_effect=RuntimeError("rollback failed"),
        )

tests/functional/test_epic_a_data_model_functional.py:1207: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
__________________ test_7_3_2_5_halt_on_tls_connection_error ___________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72460a5030>

    def test_7_3_2_5_halt_on_tls_connection_error(mocker):
        """Verifies 7.3.2.5 — Halt on TLS connection error (E4 → E5)."""
>       connect_tls = mocker.patch("app.db.base.DB.connect_tls", create=True, side_effect=RuntimeError("tls connect"))

tests/functional/test_epic_a_data_model_functional.py:1222: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_____________ test_7_3_2_6_halt_on_row_insertion_validation_error ______________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f724685ab90>

    def test_7_3_2_6_halt_on_row_insertion_validation_error(mocker):
        """Verifies 7.3.2.6 — Halt on row insertion validation error (E5 → E6)."""
>       validate_row = mocker.patch(
            "app.db.base.DBSession.validate_row",
            create=True,
            side_effect=RuntimeError("invalid row"),
        )

tests/functional/test_epic_a_data_model_functional.py:1235: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DBSession', import_path = 'app.db.base.DBSession'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DBSession'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
__________________ test_7_3_2_7_halt_on_join_resolution_error __________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72468c4370>

    def test_7_3_2_7_halt_on_join_resolution_error(mocker):
        """Verifies 7.3.2.7 — Halt on join resolution error (E6 → E7)."""
>       join = mocker.patch("app.db.base.DBSession.join", create=True, side_effect=RuntimeError("join failed"))

tests/functional/test_epic_a_data_model_functional.py:1252: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DBSession', import_path = 'app.db.base.DBSession'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DBSession'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_________________ test_7_3_2_8_halt_on_invalid_encryption_key __________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'encryption'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72469bbe50>

    def test_7_3_2_8_halt_on_invalid_encryption_key(mocker):
        """Verifies 7.3.2.8 — Halt on invalid encryption key during field access (S3)."""
>       decrypt = mocker.patch("app.encryption.kms.decrypt_value", create=True, side_effect=RuntimeError("invalid key"))

tests/functional/test_epic_a_data_model_functional.py:1265: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.encryption'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_______________ test_7_3_2_9_halt_when_tls_materials_unavailable _______________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'security', import_path = 'app.security'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'security'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a1eb90>

    def test_7_3_2_9_halt_when_tls_materials_unavailable(mocker):
        """Verifies 7.3.2.9 — Halt when TLS materials unavailable (E4)."""
>       load_tls = mocker.patch("app.security.tls.load_materials", create=True, side_effect=RuntimeError("no tls materials"))

tests/functional/test_epic_a_data_model_functional.py:1278: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'security', import_path = 'app.security'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.security'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_________________ test_7_3_2_10_halt_on_unsupported_data_type __________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'validation', import_path = 'app.validation'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'validation'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a13dc0>

    def test_7_3_2_10_halt_on_unsupported_data_type(mocker):
        """Verifies 7.3.2.10 — Halt on unsupported data type at validation (E5)."""
>       validate = mocker.patch("app.validation.rows.Validator.validate", create=True, side_effect=RuntimeError("unsupported type"))

tests/functional/test_epic_a_data_model_functional.py:1291: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'validation', import_path = 'app.validation'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.validation'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_________________ test_7_3_2_11_halt_on_out_of_order_migration _________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72468c6020>

    def test_7_3_2_11_halt_on_out_of_order_migration(mocker):
        """Verifies 7.3.2.11 — Halt on out-of-order migration execution (E1/E2/E8)."""
>       enforce = mocker.patch("app.db.migrations_runner.MigrationRunner.enforce_order", create=True, side_effect=RuntimeError("out of order"))

tests/functional/test_epic_a_data_model_functional.py:1304: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_______________ test_7_3_2_12_halt_on_unidentified_runtime_error _______________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'telemetry', import_path = 'app.telemetry'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'telemetry'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72469d2ce0>

    def test_7_3_2_12_halt_on_unidentified_runtime_error(mocker):
        """Verifies 7.3.2.12 — Halt on unidentified runtime error (catch-all)."""
        # Simulate telemetry emission on catch-all
>       emit = mocker.patch("app.telemetry.emit_error", create=True)

tests/functional/test_epic_a_data_model_functional.py:1318: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'telemetry', import_path = 'app.telemetry'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.telemetry'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
______________ test_7_3_2_13_db_connectivity_failure_halting_step ______________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246c4eb90>

    def test_7_3_2_13_db_connectivity_failure_halting_step(mocker):
        """Verifies 7.3.2.13 — Database connectivity failure halts STEP-3 and prevents downstream operations."""
>       connect = mocker.patch("app.db.base.DB.connect", create=True, side_effect=RuntimeError("network unreachable"))

tests/functional/test_epic_a_data_model_functional.py:1334: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_________ test_7_3_2_14_db_permission_failure_prevents_schema_creation _________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72464ba3b0>

    def test_7_3_2_14_db_permission_failure_prevents_schema_creation(mocker):
        """Verifies 7.3.2.14 — Database permission failure halts STEP-3 and prevents schema creation."""
>       ddl = mocker.patch("app.db.base.DB.execute_ddl", create=True, side_effect=RuntimeError("permission denied"))

tests/functional/test_epic_a_data_model_functional.py:1346: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_____________ test_7_3_2_15_tls_handshake_failure_prevents_inserts _____________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a2a050>

    def test_7_3_2_15_tls_handshake_failure_prevents_inserts(mocker):
        """Verifies 7.3.2.15 — TLS certificate/handshake failure prevents inserts."""
>       handshake = mocker.patch("app.db.base.DB.connect_tls", create=True, side_effect=RuntimeError("handshake failed"))

tests/functional/test_epic_a_data_model_functional.py:1358: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_________ test_7_3_2_16_db_storage_exhaustion_prevents_journal_updates _________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a7dbd0>

    def test_7_3_2_16_db_storage_exhaustion_prevents_journal_updates(mocker):
        """Verifies 7.3.2.16 — Database storage exhaustion halts STEP-3 and prevents journal updates."""
>       create_table = mocker.patch("app.db.base.DB.execute_ddl", create=True, side_effect=RuntimeError("no space left on device"))

tests/functional/test_epic_a_data_model_functional.py:1370: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
_________ test_7_3_2_17_temp_fs_unavailable_prevents_step_continuation _________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>, comp = 'fs'
import_path = 'app.fs'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'fs'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246c4dd50>

    def test_7_3_2_17_temp_fs_unavailable_prevents_step_continuation(mocker):
        """Verifies 7.3.2.17 — Filesystem/temp unavailability prevents STEP-3 continuation (degraded stop)."""
>       temp = mocker.patch("app.fs.tmp.allocate", create=True, side_effect=RuntimeError("temp unavailable"))

tests/functional/test_epic_a_data_model_functional.py:1382: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>, comp = 'fs'
import_path = 'app.fs'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.fs'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
______________ test_7_3_2_18_kms_unavailability_halts_encryption _______________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'encryption'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a22230>

    def test_7_3_2_18_kms_unavailability_halts_encryption(mocker):
        """Verifies 7.3.2.18 — KMS unavailability halts STEP-3 encryption operations and prevents access."""
>       get_key = mocker.patch("app.encryption.kms.get_key", create=True, side_effect=RuntimeError("kms down"))

tests/functional/test_epic_a_data_model_functional.py:1394: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.encryption'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
__________________ test_7_3_2_19_time_sync_failure_halts_step __________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'time', import_path = 'app.time'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'time'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72469bb130>

    def test_7_3_2_19_time_sync_failure_halts_step(mocker):
        """Verifies 7.3.2.19 — Time synchronisation failure halts STEP-3 where timestamps are required."""
>       time_sync = mocker.patch("app.time.sync.ensure_synchronised", create=True, side_effect=RuntimeError("time skew"))

tests/functional/test_epic_a_data_model_functional.py:1406: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'time', import_path = 'app.time'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.time'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
__________ test_7_3_2_20_config_dependency_unavailable_prevents_start __________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246c2ce50>

    def test_7_3_2_20_config_dependency_unavailable_prevents_start(mocker):
        """Verifies 7.3.2.20 — Configuration dependency unavailability prevents STEP-3 initiation."""
>       cfg = mocker.patch("app.config.loader.load", create=True, side_effect=RuntimeError("config unavailable"))

tests/functional/test_epic_a_data_model_functional.py:1418: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.config' from '/home/codex/schofield/app/config.py'>
comp = 'loader', import_path = 'app.config.loader'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.config.loader'; 'app.config' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_22_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72464bb6d0>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_23_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a7d030>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_24_enhanced_error_semantics ____________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'net', import_path = 'app.net'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'net'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a130d0>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'net', import_path = 'app.net'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.net'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_25_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246c4e380>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_26_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72469d16f0>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_27_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72460a79a0>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_28_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a21570>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_29_enhanced_error_semantics ____________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'encryption'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72460a7eb0>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.encryption'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_30_enhanced_error_semantics ____________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'encryption'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72469b8a00>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.encryption'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_31_enhanced_error_semantics ____________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'encryption'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a12b00>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.encryption'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_32_enhanced_error_semantics ____________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'encryption'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245ad8bb0>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.encryption'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_33_enhanced_error_semantics ____________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'encryption'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72469d3520>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.encryption'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_34_enhanced_error_semantics ____________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'cache', import_path = 'app.cache'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'cache'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72469b9690>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'cache', import_path = 'app.cache'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.cache'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_35_enhanced_error_semantics ____________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'secrets', import_path = 'app.secrets'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'secrets'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72469d4550>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'secrets', import_path = 'app.secrets'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.secrets'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_36_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a136a0>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_37_enhanced_error_semantics ____________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'logging', import_path = 'app.logging'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'logging'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72468c42b0>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'logging', import_path = 'app.logging'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.logging'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_38_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a13310>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_39_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a30820>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_40_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a0d090>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_41_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245ca1060>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_42_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245adb610>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_43_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a0e500>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_44_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245b7bd00>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_45_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a28cd0>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_46_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f724685b0a0>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_47_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a179d0>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_48_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a11a80>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DBSession', import_path = 'app.db.base.DBSession'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DBSession'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_49_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72464bb190>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_50_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246c4e080>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_51_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245ad1270>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DBSession', import_path = 'app.db.base.DBSession'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DBSession'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_52_enhanced_error_semantics ____________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'resolution', import_path = 'app.resolution'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'resolution'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a4e140>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'resolution', import_path = 'app.resolution'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.resolution'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_53_enhanced_error_semantics ____________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'encryption'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a33a30>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'encryption', import_path = 'app.encryption'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.encryption'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_54_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a0de40>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DB', import_path = 'app.db.base.DB'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_55_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f72469d2b00>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.base' from '/home/codex/schofield/app/db/base.py'>
comp = 'DBSession', import_path = 'app.db.base.DBSession'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.base.DBSession'; 'app.db.base' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_56_enhanced_error_semantics ____________________

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7245a1c190>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app.db.migrations_runner' from '/home/codex/schofield/app/db/migrations_runner.py'>
comp = 'MigrationRunner'
import_path = 'app.db.migrations_runner.MigrationRunner'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
____________________ test_7_2_2_57_enhanced_error_semantics ____________________

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'telemetry', import_path = 'app.telemetry'

    def _dot_lookup(thing, comp, import_path):
        try:
>           return getattr(thing, comp)
E           AttributeError: module 'app' has no attribute 'telemetry'

/usr/lib/python3.10/unittest/mock.py:1248: AttributeError

During handling of the above exception, another exception occurred:

mocker = <pytest_mock.plugin.MockerFixture object at 0x7f7246a4f580>

    def _t(mocker) -> None:
        # Apply boundary patch
>       mocked = mocker.patch(_cfg["patch"], create=True)

tests/functional/test_epic_a_data_model_functional.py:1484: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:439: in __call__
    return self._start_patch(
../.local/lib/python3.10/site-packages/pytest_mock/plugin.py:257: in _start_patch
    mocked: MockType = p.start()
/usr/lib/python3.10/unittest/mock.py:1595: in start
    result = self.__enter__()
/usr/lib/python3.10/unittest/mock.py:1431: in __enter__
    self.target = self.getter()
/usr/lib/python3.10/unittest/mock.py:1618: in <lambda>
    getter = lambda: _importer(target)
/usr/lib/python3.10/unittest/mock.py:1261: in _importer
    thing = _dot_lookup(thing, comp, import_path)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

thing = <module 'app' from '/home/codex/schofield/app/__init__.py'>
comp = 'telemetry', import_path = 'app.telemetry'

    def _dot_lookup(thing, comp, import_path):
        try:
            return getattr(thing, comp)
        except AttributeError:
>           __import__(import_path)
E           ModuleNotFoundError: No module named 'app.telemetry'

/usr/lib/python3.10/unittest/mock.py:1250: ModuleNotFoundError
__________________ test_7_2_2_58_outputs_entities_incomplete ___________________

    def test_7_2_2_58_outputs_entities_incomplete():
        """Verifies 7.2.2.58 — Outputs: entities incomplete."""
        outputs = _get_outputs_for_contract()
        entities = outputs.get("entities")
>       assert entities is not None  # ensure presence
E       assert None is not None

tests/functional/test_epic_a_data_model_functional.py:1531: AssertionError
______________ test_7_2_2_60_outputs_entities_mutable_within_step ______________

    def test_7_2_2_60_outputs_entities_mutable_within_step():
        """Verifies 7.2.2.60 — Outputs: entities mutable within step."""
        outputs1 = _get_outputs_for_contract()
        outputs2 = _get_outputs_for_contract()
        # Both snapshots must be present and equal within the same step
>       assert outputs1 and outputs2 and outputs1 == outputs2
E       assert ({})

tests/functional/test_epic_a_data_model_functional.py:1548: AssertionError
_____________ test_7_2_2_62_outputs_entity_name_mismatch_with_erd ______________

    def test_7_2_2_62_outputs_entity_name_mismatch_with_erd():
        """Verifies 7.2.2.62 — Outputs: entity name mismatch with ERD."""
        outputs = _get_outputs_for_contract()
        names = {e.get("name") for e in (outputs.get("entities") or [])}
>       assert names == _EXPECTED_ENTITY_NAMES
E       AssertionError: assert set() == {'AnswerOptio...ldGroup', ...}
E         
E         Extra items in the right set:
E         'GroupValue'
E         'Response'
E         'GeneratedDocument'
E         'AnswerOption'
E         'QuestionnaireQuestion'
E         'FieldGroup'
E         'QuestionToFieldGroup'
E         'Company'
E         'ResponseSet'
E         
E         Full diff:
E         + set()
E         - {
E         -     'AnswerOption',
E         -     'Company',
E         -     'FieldGroup',
E         -     'GeneratedDocument',
E         -     'GroupValue',
E         -     'QuestionToFieldGroup',
E         -     'QuestionnaireQuestion',
E         -     'Response',
E         -     'ResponseSet',
E         - }

tests/functional/test_epic_a_data_model_functional.py:1562: AssertionError
___________________ test_7_2_2_64_outputs_fields_set_invalid ___________________

    def test_7_2_2_64_outputs_fields_set_invalid():
        """Verifies 7.2.2.64 — Outputs: fields set invalid."""
        outputs = _get_outputs_for_contract()
        resp = next((e for e in (outputs.get("entities") or []) if e.get("name") == "Response"), {})
        fields = {f.get("name"): f.get("type") for f in (resp.get("fields") or [])}
>       assert fields == {"response_id": "uuid", "response_set_id": "uuid", "question_id": "uuid", "value_json": "jsonb"}
E       AssertionError: assert {} == {'question_id...son': 'jsonb'}
E         
E         Right contains 4 more items:
E         {'question_id': 'uuid',
E          'response_id': 'uuid',
E          'response_set_id': 'uuid',
E          'value_json': 'jsonb'}
E         
E         Full diff:
E         + {}
E         - {
E         -     'question_id': 'uuid',
E         -     'response_id': 'uuid',
E         -     'response_set_id': 'uuid',
E         -     'value_json': 'jsonb',
E         - }

tests/functional/test_epic_a_data_model_functional.py:1577: AssertionError
______________ test_7_2_2_67_outputs_field_name_mismatch_with_erd ______________

    def test_7_2_2_67_outputs_field_name_mismatch_with_erd():
        """Verifies 7.2.2.67 — Outputs: field name mismatch with ERD."""
        outputs = _get_outputs_for_contract()
        resp = next((e for e in (outputs.get("entities") or []) if e.get("name") == "Response"), {})
        names = {f.get("name") for f in (resp.get("fields") or [])}
>       assert names == {"response_id", "response_set_id", "question_id", "value_json"}
E       AssertionError: assert set() == {'question_id... 'value_json'}
E         
E         Extra items in the right set:
E         'question_id'
E         'response_id'
E         'value_json'
E         'response_set_id'
E         
E         Full diff:
E         + set()
E         - {
E         -     'question_id',
E         -     'response_id',
E         -     'response_set_id',
E         -     'value_json',
E         - }

tests/functional/test_epic_a_data_model_functional.py:1600: AssertionError
______________ test_7_2_2_70_outputs_field_type_mismatch_with_erd ______________

    def test_7_2_2_70_outputs_field_type_mismatch_with_erd():
        """Verifies 7.2.2.70 — Outputs: field type mismatch with ERD."""
        outputs = _get_outputs_for_contract()
        resp = next((e for e in (outputs.get("entities") or []) if e.get("name") == "Response"), {})
        types = {f.get("name"): f.get("type") for f in (resp.get("fields") or [])}
>       assert types == {"response_id": "uuid", "response_set_id": "uuid", "question_id": "uuid", "value_json": "jsonb"}
E       AssertionError: assert {} == {'question_id...son': 'jsonb'}
E         
E         Right contains 4 more items:
E         {'question_id': 'uuid',
E          'response_id': 'uuid',
E          'response_set_id': 'uuid',
E          'value_json': 'jsonb'}
E         
E         Full diff:
E         + {}
E         - {
E         -     'question_id': 'uuid',
E         -     'response_id': 'uuid',
E         -     'response_set_id': 'uuid',
E         -     'value_json': 'jsonb',
E         - }

tests/functional/test_epic_a_data_model_functional.py:1624: AssertionError
___________ test_7_2_2_72_outputs_encrypted_flag_false_when_required ___________

    def test_7_2_2_72_outputs_encrypted_flag_false_when_required():
        """Verifies 7.2.2.72 — Outputs: encrypted flag false when required."""
        outputs = _get_outputs_for_contract()
        resp = next((e for e in (outputs.get("entities") or []) if e.get("name") == "Response"), {})
        fld = next((f for f in (resp.get("fields") or []) if f.get("name") == "value_json"), {})
>       assert fld.get("encrypted") is True
E       AssertionError: assert None is True
E        +  where None = <built-in method get of dict object at 0x7f7245ce4240>('encrypted')
E        +    where <built-in method get of dict object at 0x7f7245ce4240> = {}.get

tests/functional/test_epic_a_data_model_functional.py:1640: AssertionError
__________ test_7_2_2_78_primary_key_columns_missing_when_pk_defined ___________

    def test_7_2_2_78_primary_key_columns_missing_when_pk_defined():
        """Verifies 7.2.2.78 — Primary Key Columns Missing When PK Defined."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure at least one entity declares a primary_key
>       assert any(ent.get("primary_key") is not None for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_78_primary_key_columns_missing_when_pk_defined.<locals>.<genexpr> at 0x7f7245b02880>)

tests/functional/test_epic_a_data_model_functional.py:1690: AssertionError
____________________ test_7_2_2_79_foreign_keys_set_invalid ____________________

    def test_7_2_2_79_foreign_keys_set_invalid():
        """Verifies 7.2.2.79 — Foreign Keys Set Invalid."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: assert presence of at least one foreign key overall
>       assert any((ent.get("foreign_keys") or []) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_79_foreign_keys_set_invalid.<locals>.<genexpr> at 0x7f7245b02260>)

tests/functional/test_epic_a_data_model_functional.py:1702: AssertionError
______________ test_7_2_2_80_foreign_keys_order_not_deterministic ______________

    def test_7_2_2_80_foreign_keys_order_not_deterministic():
        """Verifies 7.2.2.80 — Foreign Keys Order Not Deterministic."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure foreign keys exist before order/uniqueness checks
>       assert any((ent.get("foreign_keys") or []) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_80_foreign_keys_order_not_deterministic.<locals>.<genexpr> at 0x7f7245b015b0>)

tests/functional/test_epic_a_data_model_functional.py:1717: AssertionError
_____________________ test_7_2_2_81_foreign_key_name_empty _____________________

    def test_7_2_2_81_foreign_key_name_empty():
        """Verifies 7.2.2.81 — Foreign Key Name Empty."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure at least one FK exists
>       assert any((ent.get("foreign_keys") or []) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_81_foreign_key_name_empty.<locals>.<genexpr> at 0x7f7245b902e0>)

tests/functional/test_epic_a_data_model_functional.py:1729: AssertionError
__________________ test_7_2_2_82_foreign_key_name_not_unique ___________________

    def test_7_2_2_82_foreign_key_name_not_unique():
        """Verifies 7.2.2.82 — Foreign Key Name Not Unique."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure foreign keys exist before uniqueness check
>       assert any((ent.get("foreign_keys") or []) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_82_foreign_key_name_not_unique.<locals>.<genexpr> at 0x7f7245b93370>)

tests/functional/test_epic_a_data_model_functional.py:1740: AssertionError
____________ test_7_2_2_83_foreign_key_name_missing_when_fks_exist _____________

    def test_7_2_2_83_foreign_key_name_missing_when_fks_exist():
        """Verifies 7.2.2.83 — Foreign Key Name Missing When FKs Exist."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure at least one non-empty FK list exists
>       assert any(ent.get("foreign_keys") for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_83_foreign_key_name_missing_when_fks_exist.<locals>.<genexpr> at 0x7f7245b90040>)

tests/functional/test_epic_a_data_model_functional.py:1751: AssertionError
__________________ test_7_2_2_84_foreign_key_columns_unknown ___________________

    def test_7_2_2_84_foreign_key_columns_unknown():
        """Verifies 7.2.2.84 — Foreign Key Columns Unknown."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: assert fields and fks are present prior to subset checks
>       assert any((ent.get("fields") and ent.get("foreign_keys")) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_84_foreign_key_columns_unknown.<locals>.<genexpr> at 0x7f7245b1d460>)

tests/functional/test_epic_a_data_model_functional.py:1764: AssertionError
__________ test_7_2_2_85_foreign_key_columns_order_not_deterministic ___________

    def test_7_2_2_85_foreign_key_columns_order_not_deterministic():
        """Verifies 7.2.2.85 — Foreign Key Columns Order Not Deterministic."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure at least one FK has columns before ordering assertion
>       assert any((fk.get("columns") or []) for ent in entities for fk in (ent.get("foreign_keys") or []))
E       assert False
E        +  where False = any(<generator object test_7_2_2_85_foreign_key_columns_order_not_deterministic.<locals>.<genexpr> at 0x7f7245b1f3e0>)

tests/functional/test_epic_a_data_model_functional.py:1776: AssertionError
___________ test_7_2_2_86_foreign_key_columns_missing_when_fks_exist ___________

    def test_7_2_2_86_foreign_key_columns_missing_when_fks_exist():
        """Verifies 7.2.2.86 — Foreign Key Columns Missing When FKs Exist."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure FKs exist before asserting columns presence
>       assert any((ent.get("foreign_keys") or []) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_86_foreign_key_columns_missing_when_fks_exist.<locals>.<genexpr> at 0x7f7245b1e110>)

tests/functional/test_epic_a_data_model_functional.py:1788: AssertionError
_____________ test_7_2_2_87_foreign_key_references_entity_missing ______________

    def test_7_2_2_87_foreign_key_references_entity_missing():
        """Verifies 7.2.2.87 — Foreign Key References Entity Missing."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: assert entities and fks exist prior to reference checks
>       assert entities
E       assert []

tests/functional/test_epic_a_data_model_functional.py:1799: AssertionError
_____________ test_7_2_2_88_foreign_key_references_columns_missing _____________

    def test_7_2_2_88_foreign_key_references_columns_missing():
        """Verifies 7.2.2.88 — Foreign Key References Columns Missing."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure at least one FK exists and references populated
>       assert any((ent.get("foreign_keys") or []) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_88_foreign_key_references_columns_missing.<locals>.<genexpr> at 0x7f7245bb5e70>)

tests/functional/test_epic_a_data_model_functional.py:1812: AssertionError
_____________ test_7_2_2_89_foreign_key_references_entity_unknown ______________

    def test_7_2_2_89_foreign_key_references_entity_unknown():
        """Verifies 7.2.2.89 — Foreign Key References Entity Unknown."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: assert entities and fks exist prior to membership checks
>       assert entities
E       assert []

tests/functional/test_epic_a_data_model_functional.py:1824: AssertionError
_____________ test_7_2_2_90_foreign_key_references_columns_unknown _____________

    def test_7_2_2_90_foreign_key_references_columns_unknown():
        """Verifies 7.2.2.90 — Foreign Key References Columns Unknown."""
        outputs = _get_outputs_for_contract()
        # This requires cross-entity column validation; ensure presence first
        entities = (outputs.get("entities") or [])
>       assert any((ent.get("foreign_keys") or []) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_90_foreign_key_references_columns_unknown.<locals>.<genexpr> at 0x7f7245bb6110>)

tests/functional/test_epic_a_data_model_functional.py:1837: AssertionError
_________ test_7_2_2_91_foreign_key_references_columns_count_mismatch __________

    def test_7_2_2_91_foreign_key_references_columns_count_mismatch():
        """Verifies 7.2.2.91 — Foreign Key References Columns Count Mismatch."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: assert both fk and referenced columns exist before length compare
>       assert any((fk.get("columns") and (fk.get("references") or {}).get("columns"))
                   for ent in entities for fk in (ent.get("foreign_keys") or []))
E       assert False
E        +  where False = any(<generator object test_7_2_2_91_foreign_key_references_columns_count_mismatch.<locals>.<genexpr> at 0x7f7245bb5d20>)

tests/functional/test_epic_a_data_model_functional.py:1849: AssertionError
_________________ test_7_2_2_92_unique_constraints_set_invalid _________________

    def test_7_2_2_92_unique_constraints_set_invalid():
        """Verifies 7.2.2.92 — Unique Constraints Set Invalid."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: assert unique_constraints exist before inner structure checks
>       assert any((ent.get("unique_constraints") or []) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_92_unique_constraints_set_invalid.<locals>.<genexpr> at 0x7f7245b02b20>)

tests/functional/test_epic_a_data_model_functional.py:1863: AssertionError
___________ test_7_2_2_93_unique_constraints_order_not_deterministic ___________

    def test_7_2_2_93_unique_constraints_order_not_deterministic():
        """Verifies 7.2.2.93 — Unique Constraints Order Not Deterministic."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure unique constraints exist before order check
>       assert any((ent.get("unique_constraints") or []) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_93_unique_constraints_order_not_deterministic.<locals>.<genexpr> at 0x7f7245b00660>)

tests/functional/test_epic_a_data_model_functional.py:1875: AssertionError
__________________ test_7_2_2_94_unique_constraint_name_empty __________________

    def test_7_2_2_94_unique_constraint_name_empty():
        """Verifies 7.2.2.94 — Unique Constraint Name Empty."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure unique constraints exist before name checks
>       assert any((ent.get("unique_constraints") or []) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_94_unique_constraint_name_empty.<locals>.<genexpr> at 0x7f7245b010e0>)

tests/functional/test_epic_a_data_model_functional.py:1886: AssertionError
_______________ test_7_2_2_95_unique_constraint_name_not_unique ________________

    def test_7_2_2_95_unique_constraint_name_not_unique():
        """Verifies 7.2.2.95 — Unique Constraint Name Not Unique."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure unique constraints exist before uniqueness check
>       assert any((ent.get("unique_constraints") or []) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_95_unique_constraint_name_not_unique.<locals>.<genexpr> at 0x7f7245b02260>)

tests/functional/test_epic_a_data_model_functional.py:1897: AssertionError
_______ test_7_2_2_96_unique_constraint_name_missing_when_uniques_exist ________

    def test_7_2_2_96_unique_constraint_name_missing_when_uniques_exist():
        """Verifies 7.2.2.96 — Unique Constraint Name Missing When Uniques Exist."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure at least one entity exposes unique_constraints
>       assert any((ent.get("unique_constraints") or []) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_96_unique_constraint_name_missing_when_uniques_exist.<locals>.<genexpr> at 0x7f7245b91700>)

tests/functional/test_epic_a_data_model_functional.py:1908: AssertionError
_______________ test_7_2_2_97_unique_constraint_columns_unknown ________________

    def test_7_2_2_97_unique_constraint_columns_unknown():
        """Verifies 7.2.2.97 — Unique Constraint Columns Unknown."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: assert fields and unique_constraints exist before subset checks
>       assert any((ent.get("fields") and ent.get("unique_constraints")) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_97_unique_constraint_columns_unknown.<locals>.<genexpr> at 0x7f7245b90970>)

tests/functional/test_epic_a_data_model_functional.py:1921: AssertionError
_______ test_7_2_2_98_unique_constraint_columns_order_not_deterministic ________

    def test_7_2_2_98_unique_constraint_columns_order_not_deterministic():
        """Verifies 7.2.2.98 — Unique Constraint Columns Order Not Deterministic."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure columns exist before ordering assert
>       assert any((uq.get("columns") or []) for ent in entities for uq in (ent.get("unique_constraints") or []))
E       assert False
E        +  where False = any(<generator object test_7_2_2_98_unique_constraint_columns_order_not_deterministic.<locals>.<genexpr> at 0x7f7245b1ceb0>)

tests/functional/test_epic_a_data_model_functional.py:1933: AssertionError
______ test_7_2_2_99_unique_constraint_columns_missing_when_uniques_exist ______

    def test_7_2_2_99_unique_constraint_columns_missing_when_uniques_exist():
        """Verifies 7.2.2.99 — Unique Constraint Columns Missing When Uniques Exist."""
        outputs = _get_outputs_for_contract()
        entities = (outputs.get("entities") or [])
        # Clarke: ensure unique constraints exist before asserting columns presence
>       assert any((ent.get("unique_constraints") or []) for ent in entities)
E       assert False
E        +  where False = any(<generator object test_7_2_2_99_unique_constraint_columns_missing_when_uniques_exist.<locals>.<genexpr> at 0x7f7245b1d070>)

tests/functional/test_epic_a_data_model_functional.py:1945: AssertionError
_______________________ test_7_2_2_108_enums_incomplete ________________________

    def test_7_2_2_108_enums_incomplete():
        """Verifies 7.2.2.108 — Enums Incomplete."""
        outputs = _get_outputs_for_contract()
        enums = outputs.get("enums") or []
        ak = next((e for e in enums if e.get("name") == "answer_kind"), None)
>       assert ak is not None and ak.get("values") == ["boolean", "enum_single", "long_text", "number", "short_string"]
E       assert (None is not None)

tests/functional/test_epic_a_data_model_functional.py:2025: AssertionError
__________________ test_7_2_2_111_enum_name_mismatch_with_erd __________________

    def test_7_2_2_111_enum_name_mismatch_with_erd():
        """Verifies 7.2.2.111 — Enum Name Mismatch With ERD."""
        outputs = _get_outputs_for_contract()
        names = {e.get("name") for e in (outputs.get("enums") or [])}
>       assert {"answer_kind"}.issubset(names)
E       AssertionError: assert False
E        +  where False = <built-in method issubset of set object at 0x7f7245a35ee0>(set())
E        +    where <built-in method issubset of set object at 0x7f7245a35ee0> = {'answer_kind'}.issubset

tests/functional/test_epic_a_data_model_functional.py:2047: AssertionError
_________________ test_7_2_2_114_enum_values_mismatch_with_erd _________________

    def test_7_2_2_114_enum_values_mismatch_with_erd():
        """Verifies 7.2.2.114 — Enum Values Mismatch With ERD."""
        outputs = _get_outputs_for_contract()
        ak = next((e for e in (outputs.get("enums") or []) if e.get("name") == "answer_kind"), {})
>       assert set(ak.get("values") or []) == {"boolean", "enum_single", "long_text", "number", "short_string"}
E       AssertionError: assert set() == {'boolean', '...short_string'}
E         
E         Extra items in the right set:
E         'enum_single'
E         'number'
E         'boolean'
E         'long_text'
E         'short_string'
E         
E         Full diff:
E         + set()
E         - {
E         -     'boolean',
E         -     'enum_single',
E         -     'long_text',
E         -     'number',
E         -     'short_string',
E         - }

tests/functional/test_epic_a_data_model_functional.py:2070: AssertionError
__________________ test_7_2_2_117_encrypted_fields_incomplete __________________

    def test_7_2_2_117_encrypted_fields_incomplete():
        """Verifies 7.2.2.117 — Encrypted Fields Incomplete."""
        outputs = _get_outputs_for_contract()
        manifest = set(outputs.get("encrypted_fields") or [])
        expected = {"Company.legal_name", "Company.registered_office_address", "Response.value_json", "GeneratedDocument.output_uri"}
>       assert manifest == expected
E       AssertionError: assert set() == {'Company.leg...e.value_json'}
E         
E         Extra items in the right set:
E         'Company.registered_office_address'
E         'Response.value_json'
E         'Company.legal_name'
E         'GeneratedDocument.output_uri'
E         
E         Full diff:
E         + set()
E         - {
E         -     'Company.legal_name',
E         -     'Company.registered_office_address',
E         -     'GeneratedDocument.output_uri',
E         -     'Response.value_json',
E         - }

tests/functional/test_epic_a_data_model_functional.py:2093: AssertionError
________________ test_7_2_2_120_constraints_applied_incomplete _________________

    def test_7_2_2_120_constraints_applied_incomplete():
        """Verifies 7.2.2.120 — Constraints Applied Incomplete."""
        outputs = _get_outputs_for_contract()
        constraints = set(outputs.get("constraints_applied") or [])
        required = {"pk_response", "fk_response_set", "uq_response_set_question"}
>       assert required.issubset(constraints)
E       AssertionError: assert False
E        +  where False = <built-in method issubset of set object at 0x7f7245a365e0>(set())
E        +    where <built-in method issubset of set object at 0x7f7245a365e0> = {'fk_response_set', 'pk_response', 'uq_response_set_question'}.issubset

tests/functional/test_epic_a_data_model_functional.py:2115: AssertionError
____________________ test_7_2_2_124_migration_journal_empty ____________________

    def test_7_2_2_124_migration_journal_empty():
        """Verifies 7.2.2.124 — Migration Journal Empty."""
        outputs = _get_outputs_for_contract()
>       assert (outputs.get("migration_journal") or [])
E       AssertionError: assert (None or [])
E        +  where None = <built-in method get of dict object at 0x7f724634a300>('migration_journal')
E        +    where <built-in method get of dict object at 0x7f724634a300> = {}.get

tests/functional/test_epic_a_data_model_functional.py:2142: AssertionError
=========================== short test summary info ============================
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_1_entities_persisted_with_canonical_names - AssertionError: assert set() == {'AnswerOptio...ldGroup', ...}
  
  Extra items in the right set:
  'GroupValue'
  'Response'
  'GeneratedDocument'
  'AnswerOption'
  'QuestionnaireQuestion'
  'FieldGroup'
  'QuestionToFieldGroup'
  'Company'
  'ResponseSet'
  
  Full diff:
  + set()
  - {
  -     'AnswerOption',
  -     'Company',
  -     'FieldGroup',
  -     'GeneratedDocument',
  -     'GroupValue',
  -     'QuestionToFieldGroup',
  -     'QuestionnaireQuestion',
  -     'Response',
  -     'ResponseSet',
  - }
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_2_entity_fields_exposed_with_declared_types - AssertionError: assert None == 'uuid'
 +  where None = <built-in method get of dict object at 0x7f7246082580>('response_id')
 +    where <built-in method get of dict object at 0x7f7246082580> = {}.get
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_3_primary_key_externally_declared - AssertionError: assert [] == ['response_id']
  
  Right contains one more item: 'response_id'
  
  Full diff:
  + []
  - [
  -     'response_id',
  - ]
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_4_foreign_key_constraints_present - AssertionError: assert {'columns': ['response_set_id'], 'name': 'fk_response_set', 'references': {'columns': ['response_set_id'], 'entity': 'ResponseSet'}} in []
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_5_unique_constraints_present - AssertionError: assert {'columns': ['response_set_id', 'question_id'], 'name': 'uq_response_set_question'} in []
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_6_indexes_present - AssertionError: assert {'columns': ['placeholder_code'], 'name': 'uq_question_placeholder_code'} in []
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_7_enums_externally_declared - AssertionError: assert None == ['boolean', 'enum_single', 'long_text', 'number', 'short_string']
 +  where None = <built-in method get of dict object at 0x7f7245d41440>('values')
 +    where <built-in method get of dict object at 0x7f7245d41440> = {}.get
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_8_encrypted_fields_flagged - AssertionError: assert False is True
 +  where False = <function test_7_2_1_8_encrypted_fields_flagged.<locals>._encrypted at 0x7f7246c0e0e0>('Company', 'legal_name')
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_9_global_encrypted_fields_manifest_exists - AssertionError: assert set() == {'Company.leg...e.value_json'}
  
  Extra items in the right set:
  'Company.registered_office_address'
  'Response.value_json'
  'Company.legal_name'
  'GeneratedDocument.output_uri'
  
  Full diff:
  + set()
  - {
  -     'Company.legal_name',
  -     'Company.registered_office_address',
  -     'GeneratedDocument.output_uri',
  -     'Response.value_json',
  - }
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_10_constraints_listed_globally - AssertionError: assert False
 +  where False = <built-in method issubset of set object at 0x7f7246c3aea0>(set())
 +    where <built-in method issubset of set object at 0x7f7246c3aea0> = {'fk_response_set', 'pk_response', 'uq_response_set_question'}.issubset
 +    and   set() = set([])
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_11_migration_journal_includes_filenames - AssertionError: assert 'migrations/001_init.sql' in []
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_13_one_response_per_question_per_submission_visible - AssertionError: assert {'columns': ['response_set_id', 'question_id'], 'name': 'uq_response_set_question'} in []
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_14_duplicate_placeholders_rejected_via_uniqueness - AssertionError: assert ({'columns': ['placeholder_code'], 'name': 'uq_question_placeholder_code'} in ((None or [])) or {'columns': ['placeholder_code'], 'name': 'uq_question_placeholder_code'} in ((None or [])))
 +  where None = <built-in method get of dict object at 0x7f7245c14080>('unique_constraints')
 +    where <built-in method get of dict object at 0x7f7245c14080> = {}.get
 +  and   None = <built-in method get of dict object at 0x7f7245c14080>('indexes')
 +    where <built-in method get of dict object at 0x7f7245c14080> = {}.get
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_15_direct_lookup_resolves_placeholders_structurally - assert False
 +  where False = any(<generator object test_7_2_1_15_direct_lookup_resolves_placeholders_structurally.<locals>.<genexpr> at 0x7f7245b96030>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_1_16_tls_enforcement_externally_visible - assert None is True
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_3_erd_spec_schema_mismatch - ModuleNotFoundError: No module named 'app.validation'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_1_1_table_creation_after_runner_starts - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_1_2_constraints_follow_table_creation - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_1_3_encryption_after_constraints - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_1_4_tls_before_db_operations - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_1_5_row_validation_after_secure_connection - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_1_6_direct_lookup_follows_row_validation - ModuleNotFoundError: No module named 'app.db.base.DBSession'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_1_7_placeholder_resolution_follows_direct_lookup - ModuleNotFoundError: No module named 'app.resolution'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_1_8_rollback_immediately_after_migration_failure - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_1_9_determinism_check_precedes_next_step - ModuleNotFoundError: No module named 'app.determinism'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_1_11_template_registration_reuses_schema - ModuleNotFoundError: No module named 'app.registry'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_1_12_policy_registration_reuses_schema - ModuleNotFoundError: No module named 'app.registry'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_1_halt_on_migration_execution_error - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_2_halt_on_constraint_creation_error - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_3_halt_on_encryption_apply_error - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_4_halt_on_rollback_failure - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_5_halt_on_tls_connection_error - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_6_halt_on_row_insertion_validation_error - ModuleNotFoundError: No module named 'app.db.base.DBSession'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_7_halt_on_join_resolution_error - ModuleNotFoundError: No module named 'app.db.base.DBSession'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_8_halt_on_invalid_encryption_key - ModuleNotFoundError: No module named 'app.encryption'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_9_halt_when_tls_materials_unavailable - ModuleNotFoundError: No module named 'app.security'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_10_halt_on_unsupported_data_type - ModuleNotFoundError: No module named 'app.validation'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_11_halt_on_out_of_order_migration - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_12_halt_on_unidentified_runtime_error - ModuleNotFoundError: No module named 'app.telemetry'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_13_db_connectivity_failure_halting_step - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_14_db_permission_failure_prevents_schema_creation - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_15_tls_handshake_failure_prevents_inserts - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_16_db_storage_exhaustion_prevents_journal_updates - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_17_temp_fs_unavailable_prevents_step_continuation - ModuleNotFoundError: No module named 'app.fs'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_18_kms_unavailability_halts_encryption - ModuleNotFoundError: No module named 'app.encryption'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_19_time_sync_failure_halts_step - ModuleNotFoundError: No module named 'app.time'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_3_2_20_config_dependency_unavailable_prevents_start - ModuleNotFoundError: No module named 'app.config.loader'; 'app.config' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_22_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_23_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_24_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.net'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_25_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_26_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_27_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_28_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_29_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.encryption'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_30_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.encryption'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_31_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.encryption'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_32_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.encryption'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_33_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.encryption'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_34_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.cache'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_35_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.secrets'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_36_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_37_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.logging'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_38_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_39_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_40_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_41_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_42_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_43_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_44_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_45_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_46_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_47_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_48_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DBSession'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_49_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_50_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_51_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DBSession'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_52_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.resolution'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_53_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.encryption'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_54_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DB'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_55_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.base.DBSession'; 'app.db.base' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_56_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.db.migrations_runner.MigrationRunner'; 'app.db.migrations_runner' is not a package
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_57_enhanced_error_semantics - ModuleNotFoundError: No module named 'app.telemetry'
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_58_outputs_entities_incomplete - assert None is not None
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_60_outputs_entities_mutable_within_step - assert ({})
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_62_outputs_entity_name_mismatch_with_erd - AssertionError: assert set() == {'AnswerOptio...ldGroup', ...}
  
  Extra items in the right set:
  'GroupValue'
  'Response'
  'GeneratedDocument'
  'AnswerOption'
  'QuestionnaireQuestion'
  'FieldGroup'
  'QuestionToFieldGroup'
  'Company'
  'ResponseSet'
  
  Full diff:
  + set()
  - {
  -     'AnswerOption',
  -     'Company',
  -     'FieldGroup',
  -     'GeneratedDocument',
  -     'GroupValue',
  -     'QuestionToFieldGroup',
  -     'QuestionnaireQuestion',
  -     'Response',
  -     'ResponseSet',
  - }
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_64_outputs_fields_set_invalid - AssertionError: assert {} == {'question_id...son': 'jsonb'}
  
  Right contains 4 more items:
  {'question_id': 'uuid',
   'response_id': 'uuid',
   'response_set_id': 'uuid',
   'value_json': 'jsonb'}
  
  Full diff:
  + {}
  - {
  -     'question_id': 'uuid',
  -     'response_id': 'uuid',
  -     'response_set_id': 'uuid',
  -     'value_json': 'jsonb',
  - }
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_67_outputs_field_name_mismatch_with_erd - AssertionError: assert set() == {'question_id... 'value_json'}
  
  Extra items in the right set:
  'question_id'
  'response_id'
  'value_json'
  'response_set_id'
  
  Full diff:
  + set()
  - {
  -     'question_id',
  -     'response_id',
  -     'response_set_id',
  -     'value_json',
  - }
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_70_outputs_field_type_mismatch_with_erd - AssertionError: assert {} == {'question_id...son': 'jsonb'}
  
  Right contains 4 more items:
  {'question_id': 'uuid',
   'response_id': 'uuid',
   'response_set_id': 'uuid',
   'value_json': 'jsonb'}
  
  Full diff:
  + {}
  - {
  -     'question_id': 'uuid',
  -     'response_id': 'uuid',
  -     'response_set_id': 'uuid',
  -     'value_json': 'jsonb',
  - }
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_72_outputs_encrypted_flag_false_when_required - AssertionError: assert None is True
 +  where None = <built-in method get of dict object at 0x7f7245ce4240>('encrypted')
 +    where <built-in method get of dict object at 0x7f7245ce4240> = {}.get
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_78_primary_key_columns_missing_when_pk_defined - assert False
 +  where False = any(<generator object test_7_2_2_78_primary_key_columns_missing_when_pk_defined.<locals>.<genexpr> at 0x7f7245b02880>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_79_foreign_keys_set_invalid - assert False
 +  where False = any(<generator object test_7_2_2_79_foreign_keys_set_invalid.<locals>.<genexpr> at 0x7f7245b02260>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_80_foreign_keys_order_not_deterministic - assert False
 +  where False = any(<generator object test_7_2_2_80_foreign_keys_order_not_deterministic.<locals>.<genexpr> at 0x7f7245b015b0>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_81_foreign_key_name_empty - assert False
 +  where False = any(<generator object test_7_2_2_81_foreign_key_name_empty.<locals>.<genexpr> at 0x7f7245b902e0>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_82_foreign_key_name_not_unique - assert False
 +  where False = any(<generator object test_7_2_2_82_foreign_key_name_not_unique.<locals>.<genexpr> at 0x7f7245b93370>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_83_foreign_key_name_missing_when_fks_exist - assert False
 +  where False = any(<generator object test_7_2_2_83_foreign_key_name_missing_when_fks_exist.<locals>.<genexpr> at 0x7f7245b90040>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_84_foreign_key_columns_unknown - assert False
 +  where False = any(<generator object test_7_2_2_84_foreign_key_columns_unknown.<locals>.<genexpr> at 0x7f7245b1d460>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_85_foreign_key_columns_order_not_deterministic - assert False
 +  where False = any(<generator object test_7_2_2_85_foreign_key_columns_order_not_deterministic.<locals>.<genexpr> at 0x7f7245b1f3e0>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_86_foreign_key_columns_missing_when_fks_exist - assert False
 +  where False = any(<generator object test_7_2_2_86_foreign_key_columns_missing_when_fks_exist.<locals>.<genexpr> at 0x7f7245b1e110>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_87_foreign_key_references_entity_missing - assert []
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_88_foreign_key_references_columns_missing - assert False
 +  where False = any(<generator object test_7_2_2_88_foreign_key_references_columns_missing.<locals>.<genexpr> at 0x7f7245bb5e70>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_89_foreign_key_references_entity_unknown - assert []
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_90_foreign_key_references_columns_unknown - assert False
 +  where False = any(<generator object test_7_2_2_90_foreign_key_references_columns_unknown.<locals>.<genexpr> at 0x7f7245bb6110>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_91_foreign_key_references_columns_count_mismatch - assert False
 +  where False = any(<generator object test_7_2_2_91_foreign_key_references_columns_count_mismatch.<locals>.<genexpr> at 0x7f7245bb5d20>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_92_unique_constraints_set_invalid - assert False
 +  where False = any(<generator object test_7_2_2_92_unique_constraints_set_invalid.<locals>.<genexpr> at 0x7f7245b02b20>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_93_unique_constraints_order_not_deterministic - assert False
 +  where False = any(<generator object test_7_2_2_93_unique_constraints_order_not_deterministic.<locals>.<genexpr> at 0x7f7245b00660>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_94_unique_constraint_name_empty - assert False
 +  where False = any(<generator object test_7_2_2_94_unique_constraint_name_empty.<locals>.<genexpr> at 0x7f7245b010e0>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_95_unique_constraint_name_not_unique - assert False
 +  where False = any(<generator object test_7_2_2_95_unique_constraint_name_not_unique.<locals>.<genexpr> at 0x7f7245b02260>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_96_unique_constraint_name_missing_when_uniques_exist - assert False
 +  where False = any(<generator object test_7_2_2_96_unique_constraint_name_missing_when_uniques_exist.<locals>.<genexpr> at 0x7f7245b91700>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_97_unique_constraint_columns_unknown - assert False
 +  where False = any(<generator object test_7_2_2_97_unique_constraint_columns_unknown.<locals>.<genexpr> at 0x7f7245b90970>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_98_unique_constraint_columns_order_not_deterministic - assert False
 +  where False = any(<generator object test_7_2_2_98_unique_constraint_columns_order_not_deterministic.<locals>.<genexpr> at 0x7f7245b1ceb0>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_99_unique_constraint_columns_missing_when_uniques_exist - assert False
 +  where False = any(<generator object test_7_2_2_99_unique_constraint_columns_missing_when_uniques_exist.<locals>.<genexpr> at 0x7f7245b1d070>)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_108_enums_incomplete - assert (None is not None)
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_111_enum_name_mismatch_with_erd - AssertionError: assert False
 +  where False = <built-in method issubset of set object at 0x7f7245a35ee0>(set())
 +    where <built-in method issubset of set object at 0x7f7245a35ee0> = {'answer_kind'}.issubset
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_114_enum_values_mismatch_with_erd - AssertionError: assert set() == {'boolean', '...short_string'}
  
  Extra items in the right set:
  'enum_single'
  'number'
  'boolean'
  'long_text'
  'short_string'
  
  Full diff:
  + set()
  - {
  -     'boolean',
  -     'enum_single',
  -     'long_text',
  -     'number',
  -     'short_string',
  - }
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_117_encrypted_fields_incomplete - AssertionError: assert set() == {'Company.leg...e.value_json'}
  
  Extra items in the right set:
  'Company.registered_office_address'
  'Response.value_json'
  'Company.legal_name'
  'GeneratedDocument.output_uri'
  
  Full diff:
  + set()
  - {
  -     'Company.legal_name',
  -     'Company.registered_office_address',
  -     'GeneratedDocument.output_uri',
  -     'Response.value_json',
  - }
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_120_constraints_applied_incomplete - AssertionError: assert False
 +  where False = <built-in method issubset of set object at 0x7f7245a365e0>(set())
 +    where <built-in method issubset of set object at 0x7f7245a365e0> = {'fk_response_set', 'pk_response', 'uq_response_set_question'}.issubset
FAILED tests/functional/test_epic_a_data_model_functional.py::test_7_2_2_124_migration_journal_empty - AssertionError: assert (None or [])
 +  where None = <built-in method get of dict object at 0x7f724634a300>('migration_journal')
 +    where <built-in method get of dict object at 0x7f724634a300> = {}.get
================== 118 failed, 71 passed, 1 xfailed in 26.11s ==================
