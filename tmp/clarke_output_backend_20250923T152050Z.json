{
  "clarke_review": {
    "acceptable_as_is": [
      "feature::Epic A Behaviour::scenario::Migration Initiates Schema Creation"
    ],
    "needs_improvement": [
      "feature::Epic A Behaviour::scenario::Direct Lookup Follows Row Validation"
    ],
    "required_missing_tests": [],
    "suspicious_passing_tests": [],
    "explicit_actions_for_ada": [
      {
        "test_id": "feature::Epic A Behaviour::scenario::Direct Lookup Follows Row Validation",
        "category": "needs_improvement",
        "instruction": "Strengthen the 'When placeholder sourcing is required' step to verify the partial uniqueness semantics explicitly: assert the index is defined on questionnaire_question(placeholder_code) AND includes the predicate 'WHERE placeholder_code IS NOT NULL'. Use a regex to match the full statement (including index name 'uq_question_placeholder_code') rather than substring checks. Keep the existing ERD schema validation.",
        "files": [
          "tests/integration/features/steps/epic_a_behaviour_steps.py",
          "migrations/002_constraints.sql",
          "docs/Epic A - Data model & migration.md",
          "schemas/erd_and_runtime_inputs.schema.json"
        ],
        "evidence": "Spec: docs/Epic A - Data model & migration.md â€” In-scope notes and Goals explicitly require a partial unique on QuestionnaireQuestion(placeholder_code) where not null. Current step only checks for 'CREATE UNIQUE INDEX' and 'placeholder_code' substrings, which can pass even if the predicate is missing. Feature: 'Direct Lookup Follows Row Validation' calls out uniqueness when present."
      }
    ]
  },
  "final_decision": {
    "continue": false
  }
}